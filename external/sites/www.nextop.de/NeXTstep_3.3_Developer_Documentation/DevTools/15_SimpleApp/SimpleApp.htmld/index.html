<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<!-- Created with LatinByrd III -->
<!-- File: /Apps/NextDev/DevTools/15_SimpleApp/SimpleApp.rtfd -->
<!-- Date: Sun Jun 28 19:51:39 1998 -->
<head>
<title>SimpleApp</title>
</head>

<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" alink="#FF00FF" vlink="#FF0000">

<basefont size=3>

<p><font face="Times" size="-1">Copyright</font> <font size="-1">&copy;</font><font face="Times" size="-1">1995 by NeXT Computer, Inc.&nbsp; All Rights Reserved.</font>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+3" color="#FF00FF"><b>15</b></font></td></tr>

</table>

<p><br><br>

<p><font face="Times" size="+3"><i>Building a Simple Application</i></font>

<p><br><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Even the simplest application that presents the user with a graphic interface represents a staggering amount of programming effort.&nbsp; If each developer had to start from scratch, few applications would make it to completion.&nbsp; Fortunately, NEXTSTEP--through its integrated software kits and programming tools--dramatically reduces your workload in creating such applications.</font>

<p><font face="Times">NEXTSTEP's object-oriented software kits let your application benefit from numerous years of software development and testing, providing you with the elements (windows, buttons, text- and image-handling objects, and so on) that most applications require.&nbsp; Interface Builder dramatically simplifies the task of assembling and interconnecting these elements and helps you create new, reusable elements of your own.&nbsp; Overseeing the entire development process is Project Builder.&nbsp; Project Builder keeps track of the elements that make up your application, gives you access to other development tools, builds your application, and helps you with many other details.</font>

<p><font face="Times">The project presented in this chapter will give you a taste of application development using NEXTSTEP.&nbsp; You'll create a complete, though content-free, application using Interface Builder to assemble &quot;off-the-shelf&quot; objects from the Application Kit and then build the application using Project Builder.&nbsp; The objectives of this project are twofold:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">To introduce NEXTSTEP's main development tools:&nbsp; Interface Builder and Project Builder.</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">To give you an understanding of your part in the application-development process by showing you which parts can be done entirely with Project Builder and Interface Builder.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>Creating a Project</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">The first step in building any NEXTSTEP application is to use Project Builder to create a project.&nbsp; A project is a directory of files under the control of Project Builder.</font>

<p><font face="Times">Start Project Builder from the Workspace Manager, either from its location in <b>/NextDeveloper/Apps/ProjectBuilder</b> or from the dock, if its icon is there.&nbsp; When the application starts, it displays its main menu.</font>

<p><font face="Times">Choose New from the Project menu.&nbsp; The Open panel that appears has two points of interest.&nbsp; First is the Name field, which suggests &quot;PB.project&quot;.&nbsp; This is the standard project file that Project Builder uses to record the elements and dependencies within a project.&nbsp; Second is the pop-up list that indicates that the type of project being built is an application.</font>

<p><font face="Times">For clarity, a new project should be created in its own directory, so let's create a directory for this project.&nbsp; Enter &quot;Simple&quot; in the Name field--overwriting &quot;PB.project&quot;--and press Return.&nbsp; (You don't have to specify <b>PB.project</b>.&nbsp; By default Project Builder adds this file to a new project directory.)</font>

<p><font face="Times">A Project window titled &quot;Simple&quot; appears.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F1.gif" width=501 height=377></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Figure 15-1</b></font><font face="Times">.&nbsp; The Project Window</font>

<p><br><br>

<p><font face="Times">The five buttons at the top of the window give you access to Project Builder's main commands and displays.&nbsp; The buttons have these functions:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=24></td>

<td width=182><img src="F2.gif" width=65 height=65></td>

<td><font face="Times">Builds the application (if necessary) and then runs it.</font></td></tr>

<tr valign=top>

<td width=24 height=46></td></tr>

<tr valign=top>

<td width=24></td>

<td width=182><img src="F4.gif" width=65 height=65></td>

<td><font face="Times">Builds the application (if necessary) and then runs it in debugging mode using GDB and Edit.</font></td></tr>

<tr valign=top>

<td width=24 height=29></td></tr>

<tr valign=top>

<td width=24></td>

<td width=182><img src="F3.gif" width=65 height=65></td>

<td><font face="Times">Shows the Attributes display, which lets you set the application's name, associated icon, installation directory, and other attributes.</font></td></tr>

<tr valign=top>

<td width=24 height=29></td></tr>

<tr valign=top>

<td width=24></td>

<td width=182><img src="F5.gif" width=65 height=65></td>

<td><font face="Times">Shows the Files display, which gives you access to the files that make up the project.</font></td></tr>

<tr valign=top>

<td width=24 height=29></td></tr>

<tr valign=top>

<td width=24></td>

<td width=182><img src="F6.gif" width=65 height=65></td>

<td><font face="Times">Shows the Builder display.&nbsp; This display lets you specify compiler and linker options and view messages generated during the build process.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Let's take a look at the three different displays.</font>

<p><font face="Times">Click the Attributes button.&nbsp; This display lets you set some of the global attributes of your project, such as its name, the icon the application displays in the workspace, where the finished application will be installed in the file system, and other features:</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F7.gif" width=501 height=377></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Figure 15-2</b></font><font face="Times">.&nbsp; Project Builder's Attributes Display</font>

<p><font face="Times">You'll learn more about the Attributes display during the course of this project and the others in the following chapters.</font>

<p><font face="Times">Click the Files button. The Files display gives you an organized view of the files that make up your application.&nbsp; (See Figure 15-1 above for an illustration.)&nbsp; The left column lists the types of source files, and, for a selected type, the right column (or columns) displays the names of any files of that type that your project contains.</font>

<p><font face="Times">Finally, click the Builder button.</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F8.gif" width=501 height=377></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Figure 15-3</b></font><font face="Times">.&nbsp; Project Builder's Builder Display</font>

<p><br><br>

<p><font face="Times">You use this display to control how your application is built.&nbsp; For example, using the Args field, you can specify whether a debugging or an optimized version of the application will be built.&nbsp; Using the Host field, you can specify that the application be compiled and linked on some other computer on the network, thus reducing the load on your computer.</font>

<p><font face="Times">Return to the Files display by clicking the Files button.&nbsp; If you click the different entries in the Files display, you'll notice that Project Builder has already created these files for the Simple project:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Helvetica"><b>Type</b></font></td>

<td><font face="Helvetica"><b>File</b></font></td></tr>

<tr valign=top>

<td width=124 height=4></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times">Other Sources</font></td>

<td><font face="Times">Simple_main.m</font></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times">Interfaces</font></td>

<td><font face="Times">Simple.nib</font></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times">Supporting Files</font></td>

<td><font face="Times">Makefile</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">In addition, the standard shared libraries, Media_s and NeXT_s, are listed under Libraries.&nbsp; Their entries are listed in gray since you can't remove them.</font>

<p><font face="Times"><b>Simple_main.m</b> is the project's main program file, the source file that contains the entry point (that is, the <b>main()</b> function) for the Simple application.&nbsp; You can open this (or any) file listed in the Files display by double-clicking the file name in the browser. Double-click <b>Simple_main.m</b> in the browser to see how this works.&nbsp; Leave the file unchanged, however, since Project Builder maintains it for you.&nbsp; When you're through viewing the file, close the Edit window.</font>

<p><font face="Times"><b>Simple.nib</b> is a template interface file that Project Builder has added to the project.&nbsp; In &quot;Creating the User Interface&quot; below, we'll examine and edit this file, so don't open it yet.&nbsp; The flag image next to the file's name indicates that its contents may require &quot;localization,&quot; that is, adaptation of its text, images, and sounds for speakers of different languages.&nbsp; Project Builder helps you create and maintain localized versions of your application.</font>

<p><font face="Times">Finally, <b>Makefile</b>, a specification file for the UNIX <b>make</b> utility, lists the files and dependencies for building your project.&nbsp; As with <b>Simple_main.m</b>, don't modify the contents of this file; Project Builder maintains it for you.</font>

<p><font face="Times">With this short introduction to Project Builder's main features, you are ready to move on to the next step:&nbsp; assembling your application's user interface.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>Creating the User Interface</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">As a starting point for an application's user interface, Project Builder supplies new projects with a template user interface file. In our case, this file is listed as <b>Simple.nib</b> under the Interfaces entry of Project Builder's Files display.&nbsp; You use Interface Builder to modify the contents of this file.</font>

<p><font face="Times">Switch to Project Builder's Files display and double-click <b>Simple.nib</b> to start Interface Builder.&nbsp; Interface Builder starts and displays several windows.&nbsp; Before beginning work on the interface, let's take a short look at Interface Builder itself.</font>

<p><font face="Times">As an application that helps you build applications, Interface Builder displays both its own windows and those of the application under construction.&nbsp; In this case, the window titled &quot;My Window&quot; and the menu titled &quot;Simple&quot; belong to your application; the other windows are Interface Builder's.&nbsp; At the upper left of the screen is Interface Builder's main menu, at the upper right is the Palettes window, and at the lower left is a window titled &quot;Simple.nib&quot;.&nbsp; This last window is referred to as the File window, since it has the title of the nib file and it gives you access to the contents of that file.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F0.gif" width=356 height=267></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Figure 15-4</b></font><font face="Times">.&nbsp; The File Window</font>

<p><br><br>

<p><font face="Times">A File window's title displays the name of the nib file and its directory location.&nbsp; Below the title is a row of icons.&nbsp; These icons correspond to the objects and resources in the nib file.&nbsp; The four icons give you access to these displays:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Helvetica"><b>Display</b></font></td>

<td><font face="Helvetica"><b>Use</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=123></td>

<td nowrap><font face="Times">Objects</font></td>

<td><font face="Times">Shows the top-level objects within your application</font></td></tr>

<tr valign=top>

<td width=123 height=12></td></tr>

<tr valign=top>

<td width=123></td>

<td nowrap><font face="Times">Images</font></td>

<td><font face="Times">Displays the image resources available to your application.</font></td></tr>

<tr valign=top>

<td width=123 height=12></td></tr>

<tr valign=top>

<td width=123></td>

<td nowrap><font face="Times">Sounds</font></td>

<td><font face="Times">Displays the sound resources available to your application.</font></td></tr>

<tr valign=top>

<td width=123 height=12></td></tr>

<tr valign=top>

<td width=123></td>

<td nowrap><font face="Times">Classes</font></td>

<td><font face="Times">Displays a hierarchical listing of the classes available to your application.</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Initially, the first icon is highlighted, indicating that the File window shows the Objects display.&nbsp; In the upper left corner of the display is an icon representing the nib file's owner.&nbsp; The two objects named &quot;MainMenu&quot; and &quot;MyWindow&quot; correspond to the Menu and Window objects in the nib file.&nbsp; The object titled &quot;First Responder&quot; represents the object that at run time has first responder status within MyWindow.</font>

<p><font face="Times">Within the File window, you can edit an object's name by selecting the object and then clicking its name.&nbsp; Only object names that are displayed in black can be edited, however.&nbsp; Changing an object's name has no effect on the object's class; it only changes the name Interface Builder uses to keep track of the various objects within your application.&nbsp; For now, however, leave the default names.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>Adding and Editing Objects</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Perhaps the easiest operation in Interface Builder is adding objects to an application:&nbsp; You simply drag the object from the Palettes window to the desired destination in your application.&nbsp; Before beginning, let's look at some features of the Palettes window.</font>

<p><font face="Times">The Palettes window by default has four distinct displays, represented by the four buttons near the top.&nbsp; (Note, however, that more palettes can be loaded into the Palettes window--see Chapter 18 for more information.)&nbsp; The left button gives you access to Menus and MenuCells, the next to Windows, the next to Basic Views, and the last to Scrolling Views:</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F10.gif" width=324 height=180></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Figure 15-5</b></font><font face="Times">.&nbsp; Menu Palette</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F11.gif" width=315 height=165></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Figure 15-6</b></font><font face="Times">.&nbsp; Window Palette</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F9.gif" width=396 height=194></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Figure 15-7</b></font><font face="Times">.&nbsp; Basic Views Palette</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F12.gif" width=364 height=164></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Figure 15-8</b></font><font face="Times">.&nbsp; Scrolling Views Palette</font>

<p><br><br>

<p><font face="Times">Let's add some objects to the application.&nbsp; First, make sure the Basic Views palette is displayed.&nbsp; Drag a Button object from the Palettes window into your application's standard window.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F13.gif" width=360 height=219></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Figure 15-9</b></font><font face="Times">.&nbsp; Adding a Button to Your Application</font>

<p><br><br>

<p><font face="Times">Notice that as you drag the button over the destination window, the cursor changes to the copy cursor, indicating that if you release the mouse button, the object will be copied into the window.&nbsp; Release the mouse button, and the Button object drops into the window.&nbsp; Eight small gray squares, or <i>control points</i>, appear around the button.&nbsp; These control points indicate that the button is selected.&nbsp; You can manipulate these points to change the object's shape and size.&nbsp; Dragging a corner control point adjusts the object's width and height simultaneously.&nbsp; Dragging a side control point adjusts only its width or height, depending on the point.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F14.gif" width=359 height=53></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Figure 15-10</b></font><font face="Times">.&nbsp; Resizing an Object</font>

<p><br><br>

<p><font face="Times">To move the entire object, press the mouse button while the cursor is within the rectangular area delimited by the object's control points and drag--taking care not to drag one of the control points.&nbsp; You can constrain the object to move only vertically or horizontally by Command-dragging it.&nbsp; If you start Command-dragging vertically, for example, no horizontal motion is possible until you release the mouse button and begin dragging again.</font>

<p><font face="Times">Let's add another button to the window.&nbsp; You could drag a second button from the Palettes window, but instead, try copying and pasting the existing button.&nbsp; First make sure the button is selected (its control points should be visible) and then choose the Copy and then Paste commands from the Edit menu.&nbsp; A second button appears overlapping the first.&nbsp; Notice that the second button is now selected and the first is not.&nbsp; Drag the second button to one side of the first.</font>

<p><font face="Times">When you select one object within the window, its control points appear and the previously selected object's control points disappear.&nbsp; To select all the objects in a window, use the Select All command in the Edit menu.&nbsp; You can also select a group of objects in a window by &quot;rubberbanding,&quot; dragging out a rectangular area that includes or intersects the objects.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F15.gif" width=268 height=90></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Figure 15-11</b></font><font face="Times">.&nbsp; Selecting Objects by Rubberbanding</font>

<p><br><br>

<p><font face="Times">Selected objects can be moved as a group by moving any one of them, and they can be cut, copied, or pasted by using the corresponding commands in the Edit menu.&nbsp; The Cut, Copy, and Paste commands work within a single window, between windows in the same project, and even between windows in different projects.</font>

<p><font face="Times">You can edit the text displayed by an object by double-clicking the text.&nbsp; Edit the title of one button to read &quot;On&quot;.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F16.gif" width=235 height=54></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Figure 15-12</b></font><font face="Times">.&nbsp; Editing an Object's Text</font>

<p><br><br>

<p><font face="Times">To edit an object's attributes that can't be easily manipulated graphically, Interface Builder provides an Inspector panel for the particular object.&nbsp; The Button Inspector, for example, lets you set the type and appearance of a button, among other things.</font>

<p><font face="Times">To display the Button Inspector, first make sure the On button is selected and then choose the Inspector command from the Tools menu.&nbsp; The Inspector panel appears.&nbsp; This panel's title changes to reflect the object that is being inspected; it reads &quot;Button Inspector&quot; since the button is selected.&nbsp; The Inspector panel has multiple displays accessed by the pop-up list at the top of the panel.&nbsp; The other displays will be discussed in this and later chapters; for now, let's work with the Attributes display.</font>

<p><font face="Times">Using the Button Inspector, let's configure the On button to be a button that toggles between two states labeled &quot;On&quot; and &quot;Off&quot;.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F17.gif" width=274 height=424></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Figure 15-13</b></font><font face="Times">.&nbsp; The Button Inspector</font>

<p><br><br>

<p><font face="Times">In the Inspector panel, type &quot;Off&quot; in the text field labeled &quot;Alt. Title&quot; (Alternate Title).&nbsp; Next, set the button type by pressing the Type pop-up list and dragging to the Toggle option.&nbsp; You can check the operation of this button in a moment when you test the interface.</font>

<p><font face="Times">Before leaving the Inspector panel, let's use it to change the title of the application's standard window.&nbsp; Select the window titled &quot;MyWindow&quot; (by clicking anywhere within its boundaries or by double-clicking its icon in the File window).&nbsp; The display in the Inspector panel changes from the Button Inspector to the Window Inspector.&nbsp; Notice that the Window Inspector (as shown in Figure 15-13) lets you set the window's title, class, and other attributes.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F18.gif" width=274 height=424></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Figure 15-14</b></font><font face="Times">.&nbsp; The Window Inspector</font>

<p><br><br>

<p><font face="Times">Change the window's title to &quot;Test Window&quot; or another title of your choice.&nbsp; Notice that when you begin to alter the window's title, the Inspector panel's close button changes to display a partially drawn &quot;X,&quot; indicating that your changes haven't yet been applied to your application's window.&nbsp; When you press Return, Interface Builder applies the changes to the window's title.</font>

<p><font face="Times">Before continuing, choose the Save command from the Document menu to save the work you've done so far to the nib file, <b>Simple.nib</b>.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>Laying Out the Interface</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">You can arrange the top-level components of your application--its windows and panels--through direct manipulation.&nbsp; For example, to specify where a window will appear at run time, simply drag it to that position within Interface Builder.&nbsp; (Menus don't obey this system, however.&nbsp; No matter where you place the menu during development, when the application runs, the menu follows the NeXT user interface guidelines by appearing at the upper left corner of the screen--unless the user specifies a different location using the Preferences application.)&nbsp; To change a window's size, you use one of two methods, based on whether the window will be resizable when the program runs.&nbsp; If it will be, resize it with the resize bar as you normally would. If at run time its size is fixed (as with an application's Info panel), you have to make it temporarily resizable within Interface Builder by clicking the resize button <img src="EPS19.gif" width=16 height=16> in the title bar.</font>

<p><font face="Times">Interface Builder provides a large selection of layout tools to help you arrange objects within your application's windows.&nbsp; To experiment with these tools, arrange the two buttons in your application's window so that one partially covers the other, and then open the Layout menu (choose Format from the main menu, and then choose Layout).&nbsp; Select one button and then alternately select Bring to Front and Send to Back to see what these commands do.&nbsp; Next, choose Size to Fit.&nbsp; This command resizes an object so that it just accommodates it contents.</font>

<p><font face="Times">Select both buttons (you could &quot;rubberband&quot; them or click one button and then hold down Shift while you click the other) and choose Same Size.&nbsp; One button is resized to match the other button.&nbsp; (The object you select last is resized to match the size of the object that's selected first, unless this would cause it to be resized to less than its minimum size.)</font>

<p><font face="Times">Now, with both buttons selected, choose Group.&nbsp; This command has two effects:&nbsp; It visually groups selected objects by surrounding them with a box, and it makes the selected objects subviews of the surrounding box.&nbsp; Notice that if you move the surrounding box, the buttons, being subviews, move with it whether or not they're selected.&nbsp; To move a button within the box, double-click within the box.&nbsp; A gray border appears indicating that the editing focus is now within the box.&nbsp; Once the focus is on the box's contents, you can manipulate the individual buttons as you normally would.&nbsp; This is the pattern for editing grouped objects.&nbsp; For example, if a button is grouped in a box that in turn is grouped within another box, you can edit the button's title by double-clicking the outer box, then the inner box, and then the button itself.&nbsp; To remove a surrounding box without destroying its contents, select the box and then choose the Ungroup command.</font>

<p><font face="Times">You can also group objects within a ScrollView.&nbsp; Select both buttons again and choose the Group in ScrollView command from the Layout menu.&nbsp; A ScrollView appears around the two buttons; however, no scroll knobs are visible.&nbsp; Again, double-clicking within the ScrollView allows you to manipulate the grouped objects individually.</font>

<p><font face="Times">Double-clicking within the ScrollView changes the editing focus to the ScrollView's document view within the ScrollView. Once the focus is on the document view, you can manipulate the grouped objects individually and you can resize the document view.&nbsp; Notice that as you move the cursor toward the top or right side of the ScrollView, the cursor's image changes to that of the resizing cursor.&nbsp; When this cursor image is displayed, you can press the mouse button and drag the side of the document view to change the view's size.&nbsp; Experiment with this feature and notice how resizing the document view affects the sized of the scroll knobs.</font>

<p><font face="Times">The Make Row and Make Column commands align a series of selected objects vertically or horizontally.&nbsp; If you select several objects and then click Make Row, the objects form a row to the right of the object that was nearest the left edge of the window. Similarly, clicking Make Column causes the objects to line up under the object that was nearest the top edge of the window. Add three or four switches from the Palettes window to your application's window and experiment with these commands.</font>

<p><font face="Times">The Turn Grid On command turns on an alignment feature in all your application's windows, making it easier to create pleasing layouts.&nbsp; Choose the Turn Grid On command and then drag one of the switches.&nbsp; Notice that the switch moves in small increments both vertically and horizontally.&nbsp; Click Show Grid to make the alignment grid visible as a rectangular pattern of gray dots.&nbsp; You'll notice that when you move an object, the object's lower left corner jumps from dot to dot.&nbsp; The grid is visible only while you're building the application.&nbsp; It has no effect on your application's appearance in test mode or at run time.&nbsp; Both of these commands toggle, so a second click turns the feature off.</font>

<p><font face="Times">The Alignment command opens a panel that affects how the alignment commands in the Layout menu work.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F20.gif" width=211 height=258></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Figure 15-15</b></font><font face="Times">.&nbsp; The Alignment Panel</font>

<p><br><br>

<p><font face="Times">The radio buttons let you set the part of an object's frame rectangle that's used as the reference point by the Make Column and Make Row commands.&nbsp; By default, objects are aligned according to their lower left corners.&nbsp; However, by clicking one of the other choices, you can align them according to their centers or their top right corners.&nbsp; Using the slider in the Grid group, you can set the spacing of the alignment grid.&nbsp; Experiment with these controls, if you wish.</font>

<p><font face="Times">Any of the Controls in the Views palette--in other words, the Slider, TextField, and Button objects--can be made into matrices of objects by holding down Alternate while dragging one of the object's control points.&nbsp; For example, drag a Button into the window.&nbsp; While holding Alternate down, drag one of the corner control points diagonally across the window.&nbsp; When you've dragged the point far enough to make room for more Buttons, these objects appear.&nbsp; Try dragging the point vertically and then horizontally.&nbsp; In this way, you can make a row, column, or two-dimensional array of buttons.&nbsp; You can manipulate a Slider or TextField in the same way, but you can drag a Form only into a column.&nbsp; If you need a row or two-dimensional configuration of a Form object, you must create it programmatically.</font>

<p><font face="Times">The objects in a matrix act as a unit:&nbsp; Dragging one drags the entire matrix.&nbsp; To eliminate one or more objects from a matrix, hold down Alternate and resize the matrix so that the object or objects you want to eliminate fall outside the new limits of the matrix.</font>

<p><font face="Times">The spacing between objects in a matrix can be controlled by dragging a control point of a matrix while holding Command down.&nbsp; Experiment by dragging out a column of buttons and then stretching the matrix by holding down Command and dragging a control point.</font>

<p><font face="Times">To select one of the objects in a matrix, double-click the object.&nbsp; The object's highlighting indicates that it's selected.&nbsp; By double-clicking a second time, you can edit the text displayed in the object.</font>

<p><font face="Times">Editing the text in each of the objects in a matrix is made easier by the use of Tab to move from object to object.&nbsp; For example, edit the text in one button in the matrix of buttons.&nbsp; Press Tab, and you can immediately edit the text of the next button in the matrix.&nbsp; By repeatedly pressing Tab, you can access each of the objects in the matrix.&nbsp; Shift-Tab reverses the direction of motion so that the selection moves to the previous object.</font>

<p><font face="Times">Add examples of the other Application Kit objects from the Basic Views palette, but don't add a CustomView.&nbsp; The CustomView object is a proxy for a View subclass you write.&nbsp; By supplying this proxy, Interface Builder lets you specify the size, placement, and other parameters of a View subclass you'll supply.&nbsp; A later project will demonstrate the use of a CustomView object.&nbsp; Also for now, don't take anything from the other palettes; you'll use these palettes in the later projects.</font>

<p><font face="Helvetica"><b>Note:</b></font>&nbsp; <font face="Times">Remember that you can remove an object from the application's window by selecting it and choosing the Cut command.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>Testing the Interface</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">To run the application in test mode, choose the Test Interface command from the Document menu.&nbsp; All of Interface Builder's windows disappear, leaving your application's windows on the screen.&nbsp; To indicate that it's in test mode, Interface Builder's application icon changes to display a large switch.&nbsp; Finally, your application's main menu moves to the upper left corner of the screen.</font>

<p><font face="Times">Your application's interface can now be tested.&nbsp; Even though it's running under Interface Builder, it should behave--with two small exceptions--as if it were a stand-alone program.</font>

<p><font face="Times">The exceptions are in the way the Hide and Quit menu commands operate.&nbsp; When your application is running in test mode, it doesn't display its application icon.&nbsp; Consequently, after you choose the Hide command, there's no way to recall your application's windows to the screen.&nbsp; To make your application's windows visible again, double-click Interface Builder's application icon.&nbsp; This restores your application to the screen and exits test mode.&nbsp; The Quit command, rather than quitting your application, exits test mode.</font>

<p><font face="Times">In all other respects, your application's interface operates normally.&nbsp; Buttons highlight when you click them, text in text fields can be edited, radio buttons work as you would expect.</font>

<p><font face="Times">In the normal course of application development, you'll probably pass through the build and test modes several times until you're sure your application's interface is perfect.&nbsp; After that, you'll write the code for any custom objects your application requires, compile the application, and then run it.&nbsp; In the next section, you'll see how to compile and run this sample application.</font>

<p><font face="Times">Before going on, choose the Save command from the Document menu to save your work.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>Preparing to Compile the Application</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Before compiling the application, let's take a look at the pieces Project Builder has provided.&nbsp; If you look in the project directory, you'll see these entries:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times"><i>language</i>.lproj (A directory where <i>language</i> is English, French, or another language.)</font></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">Makefile</font></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">PB.gdbinit</font></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">PB.project</font></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">Simple.iconheader</font></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">Simple_main.m</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">The &quot;.lproj&quot; directory contains files that are specific to a particular language or cultural context.&nbsp; In the case of the Simple application, only its nib file, <b>Simple.nib</b>, has elements (menu commands and button titles, for instance) that would have to change if the application were to be in a different language environment.&nbsp; Thus, this directory contains only the nib file.&nbsp; (It may also contain a backup file.&nbsp; A backup file is marked with a trailing tilde character (~) and contains the previous version of the file.&nbsp; For example, the backup file for <b>Simple.nib</b> is <b>Simple.nib~</b>.)</font>

<p><font face="Times"><b>Makefile</b>, the file that coordinates the compilation process, is constructed from information in <b>PB.project</b>.&nbsp; Don't make changes to this file; Project Builder maintains this file for you.&nbsp; (However, by adding a <b>Makefile.preamble</b> or <b>Makefile.postamble</b> file, you can supplement the instructions in the standard makefile.)</font>

<p><font face="Times"><b>PB.gdbinit</b> contains initialization commands for the debugger, GDB.&nbsp; Again, don't alter this file since Project Builder maintains it for you.</font>

<p><font face="Times"><b>PB.project</b> contains a simple ASCII listing of your project's attributes, such as its name, installation directory, and source files. Project Builder uses this information to construct the makefile, among other things.</font>

<p><font face="Times"><b>Simple.iconheader</b> contains information that the Workspace Manager will use to relate icons with the application and its documents.</font>

<p><font face="Times">The last file, <b>Simple_main.m,</b> is the main program file.&nbsp; This file contains the <b>main()</b> function, the entry point for execution. You may, on occasion, need to edit this file directly.</font>

<p><font face="Times">Let's take a closer look at <b>Makefile</b> and the main program file.</font>

<p><br><br><br>

<p><font face="Helvetica" size="+1"><b>Makefile</b></font>

<p><font face="Times"><b>Makefile</b> controls the compilation and linking of the elements that make up your application.&nbsp; Project Builder generates the makefile and fills in the names of your application's source files in the appropriate spots:</font></td></tr>

</table>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">#</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1"># Generated by the NeXT Project Builder.</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">#</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1"># NOTE: Do NOT change this file -- Project Builder maintains it.</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">#</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1"># Put all of your customizations in files called Makefile.preamble</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1"># and Makefile.postamble (both optional), and Makefile will</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1"># include them.</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">#</font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">NAME = Simple</font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">PROJECTVERSION = 1.1</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">LANGUAGE = English</font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">LOCAL_RESOURCES = Simple.nib</font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">MFILES = Simple_main.m</font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">OTHERSRCS = Makefile</font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">MAKEFILEDIR = /NextDeveloper/Makefiles/app</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">INSTALLDIR = $(HOME)/Apps</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">INSTALLFLAGS = -c -s -m 755</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">SOURCEMODE = 444</font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">ICONSECTIONS = -sectcreate __ICON app</font><br>
<img src="../../Images/sp.gif" width=180 height=1><font face="Courier" size="-1">/usr/lib/NextStep/Workspace.app/application.tiff</font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">LIBS = -lMedia_s -lNeXT_s</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">DEBUG_LIBS = $(LIBS)</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">PROF_LIBS = $(LIBS)</font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">-include Makefile.preamble</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">include $(MAKEFILEDIR)/app.make</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">-include Makefile.postamble</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">-include Makefile.dependencies</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">You shouldn't alter this makefile; Project Builder maintains it for you.&nbsp; Notice that it lists the name of your application and the source files that are specific to it.&nbsp; It lists the libraries that the linker uses to create the finished application, and it defines the <b>Apps</b> directory (within your home directory) as the installation directory for the finished application.</font>

<p><font face="Times">The last four lines let this makefile include as many as four other files:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">Makefile.preamble</font></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">app.make</font></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">Makefile.postamble</font></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">Makefile.dependencies</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times"><b>app.make</b> is always included; the other files are included only if they're present.&nbsp; No error occurs if they're not.&nbsp; <b>app.make</b> is the standard NeXT makefile.&nbsp; The ability to include other files lets you add additional rules to this standard makefile.</font>

<p><br><br><br>

<p><font face="Helvetica" size="+1"><b>Simple_main.m</b></font>

<p><font face="Times">This file contains your application's <b>main()</b> function:</font></td></tr>

</table>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">/* Generated by the NeXT Project Builder</font><br>
<img src="../../Images/sp.gif" width=145 height=1><font face="Courier" size="-1">NOTE: Do NOT change this file -- Project Builder maintains it.</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">*/</font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">#import &lt;appkit/Application.h&gt;</font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">void main(int argc, char *argv[]) {</font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1">[Application new];</font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1">if ([NXApp loadNibSection:&quot;Simple.nib&quot; owner:NXApp withNames:NO)</font><br>
<img src="../../Images/sp.gif" width=208 height=1><font face="Courier" size="-1">[NXApp run];</font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1">[NXApp free];</font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1">exit(0);</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">}</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">This file starts by importing <b>appkit/Application.h</b> for its declaration of the Application class and the NXApp global variable, which refers to the Application object.</font>

<p><font face="Helvetica"><b>Note:</b></font>&nbsp; <font face="Times">A fast way to determine where a specific constant, function, or method is declared is to use Digital Librarian to search the files in <b>/NextDeveloper/Headers</b>.</font>

<p><font face="Times">It then creates a new Application object and sends a <b>loadNibSection:owner:withNames:</b> message to it to load the nib file.&nbsp; The <b>loadNibSection:owner:withNames:</b> method locates the correct nib file based on the user's current language preference.&nbsp; (See the Application class description for more information.)&nbsp; Assuming the nib file is found, the objects archived in it are loaded, and then the Application object is sent a run message.&nbsp; At this point the application becomes responsive to the user.&nbsp; When the user chooses the Quit command, the event loop terminates and the final message is sent, freeing the application's objects.&nbsp; The last statement calls <b>exit()</b>, a standard C library function that terminates the process.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>Compiling the Application</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Compiling the application is the next step.&nbsp; You can compile and run the application in one step by clicking Project Builder's Run button.</font>

<p><font face="Times">When you click the Run button, Project Builder switches to the Builder display and begins building your application.&nbsp; While the build proceeds, its progress is reflected in various ways, as indicated in Figure 15-16.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F21.gif" width=405 height=188></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Figure 15-16</b></font><font face="Times">.&nbsp; Building Simple.app</font></td></tr>

</table>

<p><br><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>Running the Application</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">When the building process is finished, your application begins running.&nbsp; When your application's windows appear, you can verify its operation.</font>

<p><font face="Times">Although limited in scope, this simple application incorporates many of the attributes of a larger program.&nbsp; It responds to mouse and keyboard input and allows simple text editing.&nbsp; In addition, its window can be dragged and resized, and the application can hide itself when the user chooses the Hide command.</font>

<p><font face="Times">Before going on to the next project, you might try altering the interface and then rebuilding the application.&nbsp; Rebuilding will take little time, since changing the interface alters only the nib file, not any files that must be recompiled.</font></td></tr>

</table>



<p>

</body>
</html>
