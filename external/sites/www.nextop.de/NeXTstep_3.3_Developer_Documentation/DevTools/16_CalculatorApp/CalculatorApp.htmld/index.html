<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<!-- Created with LatinByrd III -->
<!-- File: /Apps/NextDev/DevTools/16_CalculatorApp/CalculatorApp.rtfd -->
<!-- Date: Sun Jun 28 19:51:42 1998 -->
<head>
<title>CalculatorApp</title>
</head>

<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" alink="#FF00FF" vlink="#FF0000">

<basefont size=3>

<p><font face="Times" size="-1">Copyright</font> <font size="-1">&copy;</font><font face="Times" size="-1">1995 by NeXT Computer, Inc.&nbsp; All Rights Reserved.</font>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+3" color="#FF00FF"><b>16</b></font></td></tr>

</table>

<p><br><br>

<p><font face="Times" size="+3"><i>Building a One-Button Calculator</i></font>

<p><br><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">This chapter describes how to build a simple calculator using many of the techniques introduced in the previous chapter.&nbsp; In addition, it shows how to define a custom object, Calculator, for the application and connect the interface to this object.&nbsp; The calculator's abilities will grow over the course of this project, but its first task will be to convert Celsius temperatures to Fahrenheit.&nbsp; As a temperature converter, the application's calculator window looks like this:</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F0.gif" width=472 height=117></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Figure 16-1</b></font><font face="Times">.&nbsp; The Universal Calculator</font>

<p><br><br>

<p><font face="Times">The user enters a Celsius temperature in the left text field, then presses Return or clicks the Calculate button, and the Fahrenheit equivalent appears in the right field.&nbsp; What happens internally is that when the user signals that the input is complete, the Calculator object takes the input value from the left TextField object, performs the calculation, and then sends a message to the right TextField object to set its value to the result.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>Creating the Interface</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">As you did in the first project, create a new project by choosing New from Project Builder's Project menu.&nbsp; Name this new project &quot;Calculator&quot; and save it in your home directory.&nbsp; When the project window appears, double-click <b>Calculator.nib</b> to open the interface file.&nbsp; (<b>Calculator.nib</b> is listed under Interfaces in Project Builder's Files display.)</font>

<p><font face="Times">Interface Builder becomes active and opens the template file for this new project.&nbsp; If the interface file for the previous project is still open you'll notice that Calculator's File window opens and overlaps the File window for Simple.&nbsp; By allowing multiple nib files to be open at the same time, Interface Builder makes it easy to copy and paste objects from one to the other.</font>

<p><font face="Times">Clicking a File window--or any application window that has an icon in that File window--makes the nib file associated with the File window the current nib file.&nbsp; In Interface Builder, commands such as Save or Close operate on the current nib file.</font>

<p><font face="Times">Since Simple's nib file is finished, close it by making it current and then choosing the Close command from the Document menu.</font>

<p><font face="Times">Next, drag the interface objects shown in Figure 16-1 above from the Basic Views palette to the application's standard window. (You'll find it easier to align the different objects if you first turn on the grid.)&nbsp; You'll be using only two types of objects--Buttons and TextFields--although the TextFields will be configured as both titles and editable text fields:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td width=125><img src="F2.gif" width=69 height=33></td>

<td><font face="Times">Title text field</font></td></tr>

<tr valign=top>

<td width=106 height=12></td></tr>

<tr valign=top>

<td width=106></td>

<td width=125><img src="F3.gif" width=69 height=33></td>

<td><font face="Times">Editable text field</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Since the input and output fields are nearly identical, it's fastest to configure one first, then duplicate it and modify the copy to create the other field.&nbsp; Drag an editable text field into the window and stretch it a bit horizontally.&nbsp; Delete the word &quot;Text&quot; by double-clicking it and pressing the Delete key.&nbsp; Now drag in two title text fields and place one above and the other to the left of the editable text field.&nbsp; Edit the titles to match those in Figure 16-1 by double-clicking them in turn.&nbsp; You can also change their fonts and sizes using the Font panel, which is accessible through Interface Builder's Format menu.</font>

<p><font face="Times">Resize the window so that it resembles the window in Figure 16-1 above.&nbsp; Now open the Window Inspector by dragging to Attributes in the Inspector panel's pop-up list.&nbsp; Change the window's title to &quot;Universal Calculator.&quot;</font>

<p><font face="Times">With the exception of the Return icon in the Calculate button, the Universal Calculator window in your application should look identical to the one in the figure above.&nbsp; To add the icon, open the Images display (shown in Figure 16-2) by clicking the Images button in the File window.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F4.gif" width=356 height=267></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Figure 16-2</b></font><font face="Times">.&nbsp; The Images Display of the File Window</font>

<p><br><br>

<p><font face="Times">This display shows the images that are used throughout the Application Kit and lets you add new images by dragging them in from the File Viewer.&nbsp; Once an image is displayed in this window, you can drag it onto Button objects in your application.</font>

<p><font face="Times">Drag an NXreturnSign image from the File window to the Calculate button in the Universal Calculator.&nbsp; When the cursor intersects some part of the button, it changes to the link cursor, indicating that releasing the mouse button will assign the image to the button.&nbsp; Release the mouse button and notice that the button resizes to accommodate the title and the icon.</font>

<p><font face="Times">The Button Inspector now lists the name of the button's icon.&nbsp; You can alter the position of the icon in relation to the button's text by using the buttons that are grouped in the Icon Position cluster.&nbsp; Try several different placements if you like.&nbsp; If you place the icon above or below the title, the Calculate button grows so that both the icon and the title are visible.&nbsp; It doesn't shrink, however, if the extra area is no longer needed.&nbsp; In that case, you have to resize it by hand or use the Size to Fit command.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>Defining the Calculator Class</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">The Calculator object is this application's control center.&nbsp; The Calculate button in the interface sends a message to the Calculator object to perform the calculation; in other words, the Calculator object is the target of the Button's action method. The Calculator object must then send messages to the two TextField objects to ascertain the input value and set the output value.&nbsp; We'll use the Classes display of the File window to design the Calculator class to handle these tasks.&nbsp; Click the Classes icon at the top of the File window.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F5.gif" width=356 height=267></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Figure 16-3</b></font><font face="Times">.&nbsp; The Classes Display</font>

<p><br><br>

<p><font face="Times">This display shows a hierarchy of the classes available to your application.&nbsp; With the exception of the First Responder entry, class names are displayed in gray, indicating that these classes can't be edited.&nbsp; (First Responder, as mentioned previously, is not a particular class, but the class of an object that has first-responder status in a window.)</font>

<p><font face="Times">Notice that the Inspector panel that you opened previously now displays the Class Inspector.&nbsp; With this inspector, you can examine (and edit, for classes you build) the outlets and action methods of the class.</font>

<p><font face="Times">Returning to the File window, select the Application class entry.&nbsp; (A quick way to locate a class is to type its name in the Find field and press Return.)&nbsp; Its superclass, Responder, is displayed as the title of one browser column.</font>

<p><font face="Times">With the Application class selected in the Classes window, the Class Inspector displays an Application object's outlet (<b>delegate</b>) and action methods (such as <b>hide:</b> and <b>terminate:</b>).&nbsp; Again, these entries are displayed in gray since they aren't editable.</font>

<p><font face="Times">Using the File window and the Class Inspector, you can define the class name, superclass, action methods, and outlet instance variables of a custom object.&nbsp; You start defining the new class by selecting where it will go in the class hierarchy.&nbsp; Since a Calculator object has very limited functionality and won't be displayed, we'll make the Calculator class a subclass of Object.</font>

<p><font face="Times">Scroll the browser in the File window to the extreme left so that the Object class appears.&nbsp; Click Object, making sure that only this class is selected.&nbsp; The class you define will become a subclass of Object.&nbsp; Now, drag to the Subclass button in the pull-down list.&nbsp; When you release the mouse button, a new class called &quot;MyObject&quot; appears in the right column.&nbsp; The class name also appears in the text field in the Class inspector.&nbsp; Edit this field to read &quot;Calculator&quot; and press Return.&nbsp; Notice that the File window now displays the name of the new class in its proper position in the class hierarchy.&nbsp; The name is in black since this class is editable.</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=34></td>

<td nowrap><font face="Helvetica"><b>Warning:</b></font></td>

<td><font face="Times">Always check that the intended superclass is selected before you add a subclass.&nbsp; It's easy to inherit from the wrong class.</font></td></tr>

<tr valign=top>

<td width=34 height=12></td></tr>

<tr valign=top>

<td width=34></td>

<td nowrap></td>

<td><font face="Times">The next step in defining the Calculator class is to add two outlets corresponding to the TextField objects a Calculator object sends messages to.&nbsp; Make sure the Outlets button in the Class Inspector is highlighted and then enter &quot;inputField&quot; in the text field below the button.&nbsp; Click the Add Outlet button; the new outlet appears in the Outlets list.&nbsp; Again, it's in black, indicating that you can rename or remove this outlet.&nbsp; In the same way add an outlet named &quot;outputField&quot;.</font></td></tr>

<tr valign=top>

<td width=34 height=12></td></tr>

<tr valign=top>

<td width=34></td>

<td nowrap></td>

<td><font face="Times">A Calculator object also needs to respond to an action message from the Calculate button in the application.&nbsp; Let's specify this new action method.&nbsp; Click the Actions radio button so that it is highlighted and then enter &quot;calculate:&quot; in the text field at the bottom of the panel.&nbsp; Click Add Action to add this method name to those displayed in the Actions list.&nbsp; (Since all action methods take one argument, the <b>id</b> of the sender, the method name must end with a colon.&nbsp; If you forget to add a colon, Interface Builder will add one for you.)</font></td></tr>

<tr valign=top>

<td width=34 height=12></td></tr>

<tr valign=top>

<td width=34></td>

<td nowrap></td>

<td><font face="Times">This completes the definition of the Calculator class.&nbsp; The Class Inspector should look like this:</font></td></tr>

<tr valign=top>

<td width=34 height=24></td></tr>

<tr valign=top>

<td width=34></td>

<td nowrap></td>

<td><img src="F8.gif" width=274 height=424></td></tr>

<tr valign=top>

<td width=34 height=12></td></tr>

<tr valign=top>

<td width=34></td>

<td nowrap></td>

<td><font face="Helvetica"><b>Figure 16-4</b></font><font face="Times">.&nbsp; Calculator Class Interface</font></td></tr>

<tr valign=top>

<td width=34 height=28></td></tr>

<tr valign=top>

<td width=34></td>

<td nowrap></td>

<td><font face="Times">Interface Builder can now create Objective-C interface and implementation files for the Calculator class.&nbsp; These files will only be templates; we'll fill them in shortly.</font></td></tr>

<tr valign=top>

<td width=34 height=12></td></tr>

<tr valign=top>

<td width=34></td>

<td nowrap></td>

<td><font face="Times">In the File window, drag to the Unparse button in the pull-down list.&nbsp; A panel opens asking if you want to create <b>Calculator.[hm]</b> (a shorthand for <b>Calculator.h</b> and <b>Calculator.m</b>).&nbsp; Confirm that you do, and the template files are written into the project directory.&nbsp; Another panel opens asking if you want to add <b>Calculator.[hm]</b> to the project.&nbsp; Again, confirm that you do.&nbsp; Project Builder's window comes forward and shows you that the Calculator class has been added to the project.</font></td></tr>

<tr valign=top>

<td width=34 height=12></td></tr>

<tr valign=top>

<td width=34></td>

<td nowrap></td>

<td><font face="Times">In this project, you defined a class and had Interface Builder write template files for it.&nbsp; Interface Builder's File window can also be used to import the class declaration from class files that already exist.&nbsp; Although we won't try this here, you'd simply drag the icon for the class's interface file from the File Viewer into the File window.&nbsp; Interface Builder then parses the file and adds the name of the class in the appropriate position in the class hierarchy.&nbsp; If the new class conflicts with an existing one, Interface Builder gives you the choice of replacing the existing one or canceling the operation.&nbsp; If you want to make this new class part of the project, you must also drag the class files into the Files display of Project Builder's project window.</font></td></tr>

<tr valign=top>

<td width=34 height=12></td></tr>

<tr valign=top>

<td width=34></td>

<td nowrap><font face="Helvetica"><b>Warning:</b></font></td>

<td><font face="Times">Once you've edited a template file, don't use Unparse again for that class unless you want to overwrite the edited file with a new template file.&nbsp; Interface Builder will warn you before carrying out such an operation.</font></td></tr>

<tr valign=top>

<td width=34 height=12></td></tr>

<tr valign=top>

<td width=34></td>

<td nowrap></td>

<td><font face="Times">Now that the Calculator class is defined, you can create an instance of this class--a Calculator object.&nbsp; Verify that the Calculator class is selected in Interface Builder's File window and then drag to the Instantiate button in the pull-down list. When you release the mouse button, the File window switches to the Objects display, and a new object appears.&nbsp; This icon, titled &quot;Calculator,&quot; represents your application's Calculator object.&nbsp; In the next section, you'll use this icon to make connections between interface objects and the Calculator object.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>Connecting the Objects</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">After gathering the interface objects and creating a Calculator object, you need to interconnect them.&nbsp; To gain an understanding of how objects are interconnected in Interface Builder, let's first look at one of the predefined connections.</font>

<p><font face="Times">When a user chooses the Hide command, an application removes all but its application icon from the screen.&nbsp; The MenuCell titled &quot;Hide&quot; sends the message and the Application object's <b>hide:</b> method performs the operation.&nbsp; To see this connection, click the Hide command in Calculator's main menu.&nbsp;&nbsp; Drag to Connections in the Inspector panel's pop-up list to reveal the Connections display for a MenuCell:</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F6.gif" width=274 height=424></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Figure 16-5</b></font><font face="Times">.&nbsp; The Connections Display</font>

<p><br><br>

<p><font face="Times">The left column shows the MenuCell's sole outlet, <b>target</b>.&nbsp; The right column lists the action messages that the target object--in this case an Application object--recognizes.&nbsp; Notice that the entry <b>hide:</b> is highlighted and is marked with a small dimple.&nbsp; The dimple indicates that a connection using this action message has been previously established.&nbsp; The list titled &quot;Connections&quot; near the bottom of the panel summarizes the connections for the inspected object.</font>

<p><font face="Times">To see a graphic depiction of the connection, click the entry in the Connections list.&nbsp; The connection is displayed in the workspace by a black line drawn between the MenuCell that sends the action message and the File's Owner.&nbsp; Figure 16-6 shows this connection.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F9.gif" width=517 height=442></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Figure 16-6</b></font><font face="Times">.&nbsp; Displaying a Connection</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=34></td>

<td nowrap><font face="Helvetica"><b>Warning:</b></font></td>

<td><font face="Times">A single click in the Connections displays shows the connection; a double-click removes the connection.&nbsp; Be careful not to remove a connection that you only want to display.</font></td></tr>

<tr valign=top>

<td width=34 height=12></td></tr>

<tr valign=top>

<td width=34></td>

<td nowrap></td>

<td><font face="Times">Now that you've seen how connections are indicated, let's create some in the calculator application.&nbsp; First, let's connect the Celsius TextField to the Calculate button so that when the user presses Return after entering a Celsius value, the button will act as if it had been clicked.&nbsp; Control-drag from the Celsius TextField toward the Calculate button.&nbsp; You'll notice that a black line trails from the cursor.&nbsp; When the cursor overlaps the Calculate button, a box appears around the button.&nbsp; Release the mouse button.&nbsp; The source and destination of the connection are now identified, and the TextField Inspector lists the TextField's outlets and the action messages that a Button object responds to.&nbsp; Select the <b>target</b> outlet in the first column and the <b>performClick: </b>action method in the second column.&nbsp; Finally, click the Connect button to establish the connection.&nbsp; The new connection is listed in the lower part of the Inspector panel.</font></td></tr>

<tr valign=top>

<td width=34 height=12></td></tr>

<tr valign=top>

<td width=34></td>

<td nowrap></td>

<td><font face="Times">When the user clicks the Calculate button (or it receives a <b>performClick:</b> message), the Calculator object should receive a <b>calculate:</b> message.&nbsp; To identify the source and destination of this connection, Control-drag a connecting line from the Calculate button to the Calculator icon in the File window.&nbsp; In the Button Inspector, establish that the Button's target receives a <b>calculate:</b> action message.</font></td></tr>

<tr valign=top>

<td width=34 height=12></td></tr>

<tr valign=top>

<td width=34></td>

<td nowrap></td>

<td><font face="Times">Next, you have to connect the Calculator object's outlets to the appropriate TextField objects.&nbsp; Control-drag a line from the Calculator icon in the File window toward the Celsius TextField object.</font></td></tr>

<tr valign=top>

<td width=34 height=12></td></tr>

<tr valign=top>

<td width=34></td>

<td nowrap></td>

<td><font face="Times">The CustomObject Inspector shows a Calculator object's two outlets, <b>inputField</b> and <b>outputField</b>.&nbsp; Select <b>inputField</b> and click Connect.&nbsp; Notice that a dimple appears next to the <b>inputField</b> listing in the Inspector panel, indicating that the connection has been made.</font></td></tr>

<tr valign=top>

<td width=34 height=12></td></tr>

<tr valign=top>

<td width=34></td>

<td nowrap></td>

<td><font face="Times">Following the same steps, connect the <b>outputField</b> outlet to the Fahrenheit TextField.</font></td></tr>

<tr valign=top>

<td width=34 height=12></td></tr>

<tr valign=top>

<td width=34></td>

<td nowrap></td>

<td><font face="Times">If you want to review the target/action connections within your application, select a Control object and then, in the Connections display, click the action message that's marked with a dimple.&nbsp; Connection lines will appear on the screen to identify the object that will receive this message.&nbsp; To review outlet assignments, select the object whose outlets you want to review and click the outlet names in the Connections display.&nbsp; Again, lines will appear on the screen for each connection that's been established.</font></td></tr>

<tr valign=top>

<td width=34 height=12></td></tr>

<tr valign=top>

<td width=34></td>

<td nowrap></td>

<td><font face="Times">Save the nib file by choosing the Save command from the Document menu.&nbsp; You can now test the interface by choosing the Test Interface command in the Document menu.&nbsp; The controls should operate correctly (for example, pressing Return after you enter a number in the Celsius field highlights the Calculate button), but of course no calculation takes place.&nbsp; For that, we have to define the Calculator class and then compile the application.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>Writing the Calculator Class Definition Files</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Interface Builder has given you template files for the Calculator class; now you can add the code that converts from one temperature scale to the other.&nbsp; To open the files, return to Project Builder and double-click <b>Calculator.h</b> and <b>Calculator.m</b>, which you'll find in the Files display under Header and Classes.&nbsp; The Edit application opens these files.&nbsp; The Calculator class template files and the alterations you need to make to them are described in the next sections.</font>

<p><br><br><br>

<p><font face="Helvetica" size="+1"><b>Calculator.h</b></font>

<p><font face="Times">The interface to the Calculator class is defined in <b>Calculator.h</b>:</font></td></tr>

</table>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">#import &lt;appkit/appkit.h&gt;</font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">@interface Calculator:Object</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">{</font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1">id&nbsp; inputField;</font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1">id&nbsp; outputField;</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">}</font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">- calculate:sender;</font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">@end</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Calculator is a subclass of Object.&nbsp; As you specified in the class editor, a Calculator object has two instance variables that can be used to store the <b>id</b>s of the calculator window's input and output TextFields.&nbsp; Also, as listed in the class editor, a Calculator object declares the <b>calculate:</b> action method.</font>

<p><br><br><br>

<p><font face="Helvetica" size="+1"><b>Calculator.m</b></font>

<p><font face="Times"><b>Calculator.m</b> will contain the implementation of the Calculator class:</font></td></tr>

</table>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">#import &#34;Calculator.h&#34;</font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">@implementation Calculator</font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">- calculate:sender</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">{</font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1">return self;</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">}</font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">@end</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">The <b>calculate:</b> method must send a message to the object referred to by its <b>inputField</b> variable to retrieve the Celsius value, calculate the Fahrenheit equivalent, and then send a message to the object referred to by its <b>outputField</b> variable to set the value it displays.&nbsp; One implementation of this method looks like this:</font></td></tr>

</table>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">- calculate:sender</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">{</font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1">float degreesF;</font>

<p><img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1">[inputField selectText:self];</font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1">degreesF = ((9.0 * [inputField floatValue])/ 5.0) + 32.0;</font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1">[outputField setFloatValue:degreesF];</font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1">return self;</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">}</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">The first message in this method implementation selects the text in the input field.&nbsp; We select the text so that the user can immediately enter a new value after finishing a previous calculation.&nbsp; The function of the next two lines should be self-evident. (These lines could be combined into one message, eliminating the <b>degreesF</b> variable, but are broken out into two lines for clarity.)</font>

<p><font face="Times">Edit the <b>Calculator.m</b> file to include this method implementation.&nbsp; Finally, save the file.&nbsp; You're now ready to compile and test the application.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>Testing the Application</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">To compile and run the calculator application, click Run in Project Builder's project window.</font>

<p><font face="Times">If any errors are detected while the application is being built, they will be listed in the summary view of the Project window. Click an entry and Edit opens the file to the appropriate line, making it convenient to correct the problem.&nbsp; (You may want to introduce an error, just to see how this works!)</font>

<p><font face="Times">Once the application has been successfully compiled and linked, it begins to run.&nbsp; Test its features to verify that they all work properly.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>Modifying the Calculator</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">So far, the Universal Calculator can handle any calculation--as long as it's converting degrees Celsius to Fahrenheit.&nbsp; The rest of this chapter describes how to add to the calculator's functionality and, in passing, introduces several features concerning menus and submenus.&nbsp; The final sections of this project demonstrate how to add icons and sounds to an application.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>Adding a Submenu</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Since the calculator has only one button, extending its functionality beyond temperature conversion means redefining the meaning of the button.&nbsp; (Of course, you could add buttons, but that would be too easy--and wouldn't require a submenu!)&nbsp; The modified calculator application will allow the user to select the type of calculation--either temperature conversion or square root calculation--from a submenu.&nbsp; The titles of the input and output fields will change to reflect the type of calculation selected.</font>

<p><font face="Times">Click the menu button at the top of the Palettes window to display the menu palette.&nbsp; Drag the menu item titled &quot;Submenu&quot; from the Palettes window to the main menu of your application and release the mouse button.&nbsp; The menu item inserts itself within the list of other menu items, and the menu resizes to accommodate the width of the new item.&nbsp; You can reposition a menu item by dragging it vertically within the menu.&nbsp; A submenu containing one menu item appears to the side of the main menu.</font>

<p><font face="Times">MenuCell selection is indicated by highlighting:&nbsp; black text on a white background.&nbsp; Selected MenuCells can be cut, copied, and pasted within a menu or between menus using the standard editing commands.</font>

<p><font face="Times">You can edit the text a MenuCell displays by double-clicking it.&nbsp; Similarly, you can edit the keyboard equivalent for the item by double-clicking the right part of the MenuCell.&nbsp; A square appears indicating that a keyboard equivalent can be added or edited.</font>

<p><font face="Times">Edit the text in the new main menu item so that it reads &quot;Calculations&quot; and press Return.&nbsp; The main menu resizes to accommodate the menu item's text, and the submenu's title changes to match the text.&nbsp; Now add another item to the submenu by dragging the MenuCell titled &quot;Item&quot; from the Palettes window to your application's submenu.</font>

<p><font face="Times">Finally, edit the text of the submenu's two items to read &quot;Temperature&quot; and &quot;Square Root&quot;.&nbsp; The finished menus should look like those shown in Figure 16-7.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F1.gif" width=200 height=123></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Figure 16-7</b></font><font face="Times">.&nbsp; The Menu and Submenu</font>

<p><br><br>

<p><font face="Times">Now, select the Calculator class in the Classes display of the File window.&nbsp; To edit the class definition, open the Class Inspector (by choosing the Inspector command from Interface Builder's Tools menu).&nbsp; The revised Calculator object must respond to action messages from the new submenu, so let's add <b>convertToTemp:</b> and <b>convertToSqRoot:</b> methods.&nbsp; It will also need to send messages to the TextFields that titles the input and output fields, so let's add <b>inputTitle</b> and <b>outputTitle </b>outlets.&nbsp; Figure 16-8 shows how the Class Inspector should look after you make these changes to the Calculator class interface.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F7.gif" width=274 height=424></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Figure 16-8</b></font><font face="Times">.&nbsp; Revising the Calculator Class Description</font>

<p><br><br>

<p><font face="Times">Next, establish the connections from the submenu items to the Calculator object.&nbsp; While holding down Control, drag the cursor from the Temperature submenu item to the Calculator object in the Objects display of the File window.&nbsp; Double-click the <b>convertToTemp:</b> entry in the Inspector panel to establish the connection.&nbsp; Likewise, specify that the Square Root submenu item sends a <b>convertToSqRoot:</b> message to the Calculator object.</font>

<p><font face="Times">Now, connect the Calculator's <b>inputTitle</b> and <b>outputTitle</b> outlets to the proper TextFields in the Calculator window.&nbsp; (The Calculator object will send messages to these objects to change their text from &quot;Celsius&quot; and &quot;Fahrenheit&quot; to &quot;x&quot; and &quot;sqrt(x)&quot;, as the user picks one or the other type of calculation.)&nbsp; Control-drag from the Calculator object in the File window to the TextField that reads &quot;Celsius&quot;.&nbsp; Double-click <b>inputTitle</b> in the Connections inspector to establish the connection.&nbsp; Follow the same process to connect the <b>outputTitle</b> outlet to the TextField currently titled &quot;Fahrenheit&quot;.</font>

<p><font face="Times">Finally, use the TextField inspector's alignment buttons to specify that the text in these fields is right aligned.&nbsp; In this way, although a title's text may change from &quot;Celsius&quot; to &quot;x&quot;, it will stay visually associated with the input field it labels.</font>

<p><font face="Times">The revised interface is complete; the only changes that remain affect the Calculator class files.&nbsp; The next two sections describe the changes you need to make.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>Modifying Calculator.h</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">The new calculator is designed either to convert temperatures or to calculate square roots; in other words, the calculator has two states.&nbsp; One way to keep track of the current state of the calculator is to add an instance variable that can have either of two values.&nbsp; We'll add the integer variable <b>calcType</b> for this purpose.&nbsp; For convenience, let's also define the constants TEMP and SQROOT to correspond to the two states.&nbsp; The <b>inputTitle</b> and <b>outputTitle</b> instance variables also need to be declared.&nbsp; These changes add eight lines to the <b>Calculator.h</b> file.&nbsp; The lines you need to add are shown in bold:</font></td></tr>

</table>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">#import &lt;appkit/appkit.h&gt;</font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1"><b>#define TEMP 1</b></font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1"><b>#define SQROOT 2</b></font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">@interface Calculator : Object</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">{</font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1">id inputField;</font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1">id outputField;</font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1"><b>id inputTitle;</b></font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1"><b>id outputTitle;</b></font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1"><b>int calcType;</b></font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">}</font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1"><b>- init;</b></font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">- calculate:sender;</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1"><b>- convertToTemp:sender;</b></font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1"><b>- convertToSqRoot:sender;</b></font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">@end</font>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>Modifying Calculator.m</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">The implementation file must be modified in three ways.&nbsp; It needs an initialization method to establish the value of the <b>calcType </b>instance variable (and thus the calculator's initial state).&nbsp; The <b>init</b> method below handles this initialization.&nbsp; When the calculator first appears, it will be configured to perform temperature conversions.&nbsp; It also must be modified so that the <b>calculate:</b> method performs the proper calculation according to the calculator's current state.&nbsp; Finally, it needs to implement the <b>convertToTemp: </b>and <b>convertToSqRoot:</b> action methods.&nbsp; These methods set the value of <b>calcType</b> and change the titles of the input and output fields.</font>

<p><font face="Times">Make these changes to the <b>Calculator.m</b> file.&nbsp; As before, each line you need to add or alter is shown in bold.</font></td></tr>

</table>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">#import &#34;Calculator.h&#34;</font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">@implementation Calculator</font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1"><b>- init</b></font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1"><b>{</b></font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1"><b>[super init];</b></font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1"><b>calcType = TEMP;</b></font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1"><b>return self;</b></font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1"><b>}</b></font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">- calculate:sender</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">{</font><br>
<img src="../../Images/sp.gif" width=180 height=1><font face="Courier" size="-1"><b>[inputField selectText:self];</b></font><br>
<img src="../../Images/sp.gif" width=180 height=1><font face="Courier" size="-1"><b>if (calcType == TEMP) {</b></font><br>
<img src="../../Images/sp.gif" width=208 height=1><font face="Courier" size="-1"><b>float degreesF;</b></font><br>
<img src="../../Images/sp.gif" width=208 height=1><font face="Courier" size="-1"><b>degreesF = ((9.0 * [inputField floatValue])/5.0) + 32.0;</b></font><br>
<img src="../../Images/sp.gif" width=208 height=1><font face="Courier" size="-1"><b>[outputField setFloatValue:degreesF];</b></font><br>
<img src="../../Images/sp.gif" width=180 height=1><font face="Courier" size="-1"><b>} else if (calcType == SQROOT) {</b></font><br>
<img src="../../Images/sp.gif" width=208 height=1><font face="Courier" size="-1"><b>double sqRoot;</b></font><br>
<img src="../../Images/sp.gif" width=208 height=1><font face="Courier" size="-1"><b>sqRoot = sqrt([inputField doubleValue]);</b></font><br>
<img src="../../Images/sp.gif" width=208 height=1><font face="Courier" size="-1"><b>[outputField setDoubleValue:sqRoot];</b></font><br>
<img src="../../Images/sp.gif" width=180 height=1><font face="Courier" size="-1"><b>}</b></font><br>
<img src="../../Images/sp.gif" width=180 height=1><font face="Courier" size="-1"><b>return self;</b></font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">}</font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1"><b>- convertToTemp:sender</b></font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1"><b>{</b></font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1"><b>calcType = TEMP;</b></font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1"><b>[inputTitle setStringValue:&#34;Celsius:&#34;];</b></font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1"><b>[outputTitle setStringValue:&#34;Fahrenheit:&#34;];</b></font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1"><b>[outputField setStringValue:&#34;&#34;];</b></font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1"><b>[inputField selectText:self];</b></font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1"><b>return self;</b></font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1"><b>}</b></font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1"><b>- convertToSqRoot:sender</b></font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1"><b>{</b></font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1"><b>calcType = SQROOT;</b></font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1"><b>[inputTitle setStringValue:&#34;x:&#34;];</b></font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1"><b>[outputTitle setStringValue:&#34;sqrt(x):&#34;];</b></font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1"><b>[outputField setStringValue:&#34;&#34;];</b></font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1"><b>[inputField selectText:self];</b></font><br>
<img src="../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1"><b>return self;</b></font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1"><b>}</b></font>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">@end</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">After you edit and save these files, compile the application.&nbsp; Watch for error messages from the compiler.&nbsp; In most cases, they will signal typographical errors in the source code.&nbsp; Make the necessary corrections and recompile the application.&nbsp; Finally, run the application and test its new features.</font>

<p><font face="Helvetica"><b>Note:</b></font>&nbsp; <font face="Times">If the application fails at run time, the problem is probably caused by an inconsistency between the method and instance variable names you declared in the Class inspector and those in the Calculator class definition files.&nbsp; Use Interface Builder to check the method and variable names in the Class Inspector panel against those in <b>Calculator.h</b> and <b>Calculator.m</b>.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>Adding an Icon</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">With the Images display of the File window, you can access existing system images, as illustrated earlier in this project, or you can create images from data in either TIFF (Tag Image File Format) or EPS (Encapsulated PostScript) file format.&nbsp; Once you import the image, it can be assigned to Button objects in your application.&nbsp; Figure 16-9 shows some examples of buttons that display icons.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F10.gif" width=203 height=68></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Figure 16-9</b></font><font face="Times">.&nbsp; Icons and Buttons</font>

<p><br><br>

<p><font face="Times">To see how this works, click the Images suitcase in the File window to display a variety of icons used in the Application Kit. The titles under the icons are displayed in gray to indicate that these icons can't be deleted nor can their names be edited. However, you can copy and paste any icon that appears in this window.</font>

<p><font face="Times">Let's add an image to this window.&nbsp; Using the File Viewer, switch to <b>/NextLibrary/Documentation/NextDev/Examples/IBTutorial/Images</b>.&nbsp; You'll notice that this directory contains the TIFF file <b>willy.tiff</b>.&nbsp; Drag the file icon from the File Viewer to Interface Builder's File window.&nbsp; When you release the mouse button, Interface Builder displays a panel asking if you want to add <b>willy.tiff</b> to the project.&nbsp; Click Yes, and Project Builder's window comes forward to show you that the file has been added under Images in the Files browser.</font>

<p><font face="Times">(In general, it's best to add TIFF or EPS format files to a project rather than use them to create local images.&nbsp; By adding the image file to the project you make one copy of the image data available to all nib files in the project.&nbsp; If, on the other hand, you ask Interface Builder to create an image with the data, the image data is copied from the image file into the nib file.&nbsp; Thus, each nib file that requires the image would have to have a separate copy of the data.)</font>

<p><font face="Times">If the image that you add to the File window is no larger than 48 by 48 pixels, the Images display shows the actual image. Larger images (as in this case) are displayed by Interface Builder's Image Inspector.</font>

<p><font face="Times">The Image Inspector has two uses:&nbsp; It gives you the dimensions of the image in pixels, and it lets you see the actual icon image even for icons larger than 48 by 48 pixels.&nbsp; Figure 16-10 shows a detail of the Image Inspector.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F11.gif" width=245 height=263></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Figure 16-10</b></font><font face="Times">.&nbsp; The Image Inspector</font>

<p><br><br>

<p><font face="Times">To place the image on a button in your application, simply drag the icon from the File window to a Button object in your application's window.&nbsp; (The cursor must be over the button when you release the mouse button; otherwise, the image isn't transferred.)</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>Adding Sound</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">To manipulate the sounds in your application, Interface Builder provides two tools, the Sounds display of the File window and the Sound Inspector.&nbsp; The Sounds display is the repository for your application's sound resources.&nbsp; By dragging a sound icon from the Sounds display onto a Button object in your application, you can associate a sound with that object.&nbsp; The Sound Inspector lets you play sounds from sound files on disk and lets you record your own sounds.&nbsp; It also gives you a graphic display of the sound and allows you basic editing capability.</font>

<p><font face="Times">Open the Sounds display by clicking the Sounds suitcase in the File window.&nbsp; Each of the icons in the Sounds window represents a sound.&nbsp; The gray titles indicate that these sounds can't be edited since they are system sounds.&nbsp; You select a sound by clicking its icon.&nbsp; A selected sound can be copied, pasted, and (except for system sounds) deleted.&nbsp; In fact, it's common to create a new sound for editing by copying an existing sound.</font>

<p><font face="Times">Make a copy of the Basso sound in the Sound window.&nbsp; The new sound icon is labeled &quot;Sound.&quot;&nbsp; Now, open the Sound Inspector by double-clicking the new sound's icon.</font>

<p><font face="Times">The Sound Inspector shows a graphic representation of the selected sound's waveform.&nbsp; The graph plots the change of the sound's amplitude over time.&nbsp; You can play the entire sound by clicking the Play button, or you can select and play only a portion of the displayed sound.&nbsp; For a demonstration, drag horizontally across a portion of the graph and click Play.&nbsp; Notice that the sound meter below the waveform shows the instantaneous and peak volumes for the sound that's played.</font>

<p><font face="Times">Using your computer's microphone, you can replace the selection in the Sound Inspector with sound you record.&nbsp; Click the Record button to start recording.&nbsp; When you're through recording, click Stop to end the recording session and display the waveform.&nbsp; Clicking Pause halts the recording until the next time Pause is clicked.</font>

<p><font face="Times">You can add sounds to the Sounds window by dragging the sounds file icon from the File Viewer to the File window.&nbsp; Using the File Viewer, switch to the <b>/NextLibrary/Documentation/NextDev/Examples/IBTutorial/Sounds</b> directory.&nbsp; Within this directory there are three sound files:&nbsp; <b>drum1.snd</b>, <b>drum2.snd</b>, and <b>drum3.snd</b>.&nbsp; Drag <b>drum1.snd</b> into the Sounds window.&nbsp; A panel appears and asks if you want to insert the sound into the project.&nbsp; Click Create Local Sound, and the sound is inserted into the nib file.</font>

<p><font face="Helvetica"><b>Note:</b></font>&nbsp; <font face="Times">Inserting a sound into the nib file makes it directly editable within Interface Builder, as you'll see shortly.&nbsp; Often, however, it's better to insert the sound file into the project (rather than into the nib file), so that a single sound file can be accessed from multiple program modules.</font>

<p><font face="Times">The graph in the Sound Inspector shows the sound's waveform.&nbsp; Click Play to hear the sound.</font>

<p><font face="Times">Now, let's create a sound for the Calculate button in the Calculator application.&nbsp; Select a portion of the drum sound.&nbsp; For example, you might find that the decay portion of one of the louder drum beats, as shown in Figure 16-11, makes a satisfying button-click sound.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F12.gif" width=274 height=424></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Figure 16-11</b></font><font face="Times">.&nbsp; The Sound Inspector</font>

<p><br><br>

<p><font face="Times">Once you've found a portion of the waveform that you want for the Calculate button, select and then delete the portions that precede and follow it.&nbsp; Click OK to save the modified sound.</font>

<p><font face="Times">Let's associate the sound with the Calculate button.&nbsp; Drag the sound icon from the Sounds window to the Calculate button and release the mouse button.&nbsp; The button becomes selected to confirm that the sound has been assigned to the button.&nbsp; If you look at the button's attributes in the Button Inspector, you'll see that <b>drum1</b> is listed.&nbsp; By deleting this name, you can remove the association of the sound with the button.&nbsp; You can check the operation of the button by putting Interface Builder in test mode and then clicking Calculate.</font>

<p><font face="Times">This ends the Universal Calculator project.&nbsp; Save the project and then compile and run the application to test its operation.&nbsp; You might try adding other features to the calculator to test your understanding of the concepts introduced so far.</font></td></tr>

</table>



<p>

</body>
</html>
