<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<!-- Created with LatinByrd III -->
<!-- File: /Apps/NextDev/DevTools/NewInterfaceBuilder/03_Connections.rtfd -->
<!-- Date: Sun Jun 28 19:52:17 1998 -->
<head>
<title>03_Connections</title>
</head>

<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" alink="#FF00FF" vlink="#FF0000">

<basefont size=3>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Times" size="-1"><i>Once you build an interface with objects, you connect those objects so they can communicate with each other. You make connections between objects in Interface Builder by Control-dragging a line between them and then selecting a name for the connection.</i></font>

<p><font face="Helvetica"><b>Working with Interface Builder</b></font></td></tr>

</table>

<p><br><br><br><br>

<p><font face="Helvetica" size="+4" color="#006911"><b>3</b></font>

<p><font face="Times" size="+2"><b>Making and Managing Connections</b></font>

<p><br><br><br><br>

<p><font face="Helvetica" size="-1" color="#006911"><b>Connecting objects</b></font>

<p><font face="Helvetica" size="-1" color="#006911"><b>Making connections in outline mode</b></font>

<p><font face="Helvetica" size="-1" color="#006911"><b>Examining connections</b></font>

<p><font face="Helvetica" size="-1" color="#006911"><b>Identifying objects in outline mode</b></font>

<p><font face="Helvetica" size="-1" color="#006911"><b>Enabling inter-field tabblng</b></font>

<p><font face="Helvetica" size="-1" color="#006911"><b>Disconnecting objects</b></font>

<p><font face="Helvetica" size="-1" color="#006911"><b>Copying connected objects</b></font>

<p><font face="Helvetica" size="-1" color="#006911"><b>Testing the interface</b></font>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Times">It could be said of me that in this book I have only made up a bunch of other men's flowers, providing of my own only the string that binds them together.</font><br>
<img src="../../Images/sp.gif" width=72 height=1><font face="Times">Montaigne, <i>Essais</i></font>

<p><font face="Times">Let him look to his bond.</font><br>
<img src="../../Images/sp.gif" width=72 height=1><font face="Times">Shakespeare, <i>Merchant of Venice</i></font>

<p><br><br><br><br>

<p><img src="../../Images/F53.gif" width=580 height=10 vspace=3>

<p><font face="Helvetica"><b>Communicating With Other Objects: Outlets and Actions</b></font>

<p><font face="Helvetica" size="-1"><b>Outlets</b></font>

<p><font face="Times">An outlet is an instance variable that points to another object.. Objects use outlets to communicate with other objects; they simply send messages to the object identified by the outlet.</font>

<p><font face="Times">Using Interface Builder, you can declare and set outlets for the custom objects in your application. You can also set ready-made outlets in many Application Kit objects, such as browsers. .Once initialized, the connection information for the outlet is stored in the nib file. At run time, the nib file is unarchived and the outlet is reinitialized with the connection information.</font>

<p><font face="Times">The Application Kit defines two types of outlets that you can use to establish specialized connections with other objects: delegates and targets.</font>

<p><img src="OutletConnection_RTF.gif" width=547 height=342>

<p><br><br>

<p><font face="Helvetica" size="-1"><b>Delegates</b></font>

<p><font face="Times">A delegate is an object that acts on behalf of another object. Many kit classes define delegate outlets as an alternative to subclassing. All your object must do is register itself as a delegate of the kit object. At important junctures in its life cycle, the kit object sends messages to its delegate, giving it an opportunity to participate in processing and sometimes even the chance to veto some behavior.</font>

<p><font face="Times">As examples, browsers request their delegates to supply the cells for browser columns; applications inform their delegates when they (the application) are initialized, hidden, and activated.</font>

<p><font face="Helvetica" size="-1"><b>Targets</b></font>

<p><font face="Times">Targets are a special kind of outlet. They identify objects that can respond to action messages. When a user activates a Control object (for instance, clicking a button or moving a slider), that object sends an action message to the target. The action message gives application-specific meaning to the original mouse or key event.</font>

<p><font face="Times">Like a delegate, a target must implement methods to respond to the messages it's sent. But unlike a delegate, which receives messages chosen from a limited set defined by a kit, a target responds to action messages defined by the programmer.</font>

<p><font face="Times">You can also make one object a target of a second object programmatically by sending that second object <b>setTarget:</b>.</font>

<p><br><br>

<p><font face="Helvetica" size="-1"><b>Actions</b></font>

<p><font face="Times">Control objects translate the event messages they receive when users manipulate them into messages meaningful within the application. They then send these messages to other objects.&nbsp;&nbsp; These application-specific messages initiated by a Control object are called <i>action messages</i>, and the method they invoke are called <i>action methods</i>. A Control object is simply a user-interface device that permits the user to give instructions to the application, a device that mediates between the user and the object that will ultimately respond to the user's event.</font>

<p><font face="Times">Control, an abstract class, defines for its many subclasses (such as Button, Scroller, TextField, and Form) a paradigm for inter-object communication--action messages. But Control objects don't act alone: they always contain one or more objects of ActionCell or its subclasses. The ActionCell superclass defines instance variables for the two elements essential to an action message:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times"><b>target</b>: the object that's responsible for responding to the user's action on the Control</font></td></tr>

<tr valign=top>

<td width=36 height=8></td></tr>

<tr valign=top>

<td width=36></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times"><b>action</b>: the method that specifies what the target is to do</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Times">Action methods take a single argument, the <b>id</b> of the Control object that sends the message. This argument enables the receiver to ask the control for more information, if it's needed.</font>

<p><font face="Times">A Control can send a different action message to a different target for each ActionCell it contains. Controls dispatch action messages differently; for instance, a Button generally sends action messages on a mouse-up event, but a Slider usually sends action messages continuously, as long as the mouse button is pressed.</font>

<p><img src="Action_Diag.gif" width=599 height=442>

<p><img src="../../Images/F54.gif" width=580 height=10 vspace=3></td></tr>

</table>

<p><br><br><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=9></td>

<td><a name="IB3_ConnectObjs"></a><font face="Helvetica"><b>CONNECTING OBJECTS</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=35></td>

<td nowrap><font face="Helvetica" size="-1">1</font></td>

<td><font face="Helvetica" size="-1"><b>Select an object.</b></font></td></tr>

<tr valign=top>

<td width=35 height=15></td></tr>

<tr valign=top>

<td width=35></td>

<td nowrap><font face="Helvetica" size="-1">2</font></td>

<td><font face="Helvetica" size="-1"><b>Control-drag a connection to another object.</b></font></td></tr>

<tr valign=top>

<td width=35 height=15></td></tr>

<tr valign=top>

<td width=35></td>

<td nowrap><font face="Helvetica" size="-1">3</font></td>

<td><font face="Helvetica" size="-1"><b>In the Inspector panel's Connections display, select an outlet or action.</b></font></td></tr>

<tr valign=top>

<td width=35 height=15></td></tr>

<tr valign=top>

<td width=35></td>

<td nowrap><font face="Helvetica" size="-1">4</font></td>

<td><font face="Helvetica" size="-1"><b>Click the Connect button.</b></font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Times">In an object-oriented application, isolated objects have little value; they need to send messages to each other to get the work of the application done. Interface Builder gives you a way to establish connections between objects.</font>

<p><font face="Times">Begin making a connection in Interface Builder by Control-dragging a connection line from one object to another object. Almost any object will do. Usually you Control-drag a line between an object in the interface and an object in the Instances display.</font>

<p><img src="ObjConnect1.gif" width=595 height=445>

<p><font face="Times">When you release the mouse button, the Inspector panel becomes the key window (see facing page). Its Connections display shows the current and potential connections for the destination object.</font>

<p><font face="Times"><b>Outlet Connections</b></font>

<p><font face="Times">In the example above, the connection is made from a <i>controller</i> object--a custom object that manages the application--to a text field. The controller object (SimpleCalcInstance) declares several <i>outlets</i>--identifiers of destination objects-- as instance variables.</font>

<p><font face="Times">When you make a connection between objects, the first column of the Connections display shows the source object's outlets (&quot;source&quot; meaning the object from which a connection line is drawn).</font>

<p><img src="ObjConnect2.gif" width=543 height=388>

<p><font face="Times">You can make outlet connections between objects in the Instances display.</font>

<p><img src="ObjConnect3.gif" width=548 height=221>

<p><font face="Times"><b>Action Connections</b></font>

<p><font face="Times">When you make a connection by dragging a line <i>from</i> a Control object in the interface--a button, slider, text field, menu command, pop-up list, or matrix--odds are that the destination object is a <i>target</i>, and that you can complete the connection by selecting an <i>action</i> method.</font>

<p><img src="ObjConnect4.gif" width=511 height=389>

<p><font face="Times">The destination object in an action connection is frequently a custom object that manages the application or a particular window (controller object).</font>

<p><font face="Times">When you make a connection from a Control object, the Inspector panel becomes key and shows the Connections display for the destination object.</font>

<p><img src="ObjConnect5.gif" width=530 height=387>

<p><font face="Times">When the user manipulates the Control object, such as clicking a button or moving a slider, the action message is sent to the destination object (the target).</font>

<p><font face="Times"><b>Connections Within the Interface</b></font>

<p><font face="Times">Sometimes you can connect two objects on an interface. These connections can involve both outlets and actions. Often one of the objects is a custom View object, as in this example:</font>

<p><img src="ObjConnect6.gif" width=488 height=325>

<p><font face="Times">Connections within an interface can also involve two Application Kit objects. Two examples are interconnecting text fields (so the user can tab from field to field), and connecting a menu command such as Print to a Text object.</font>

<p><font face="Times" size="-1"><b>Tip:</b></font> <font face="Times">To enable printing of a Text object, drag a connection line from the Print menu command (or other Control object that initiates printing) and select the <b>printPSCode:</b> action in the Connections display.</font>

<p><font face="Times" color="#006811">Outlets are destination objects specified as instance variables. Actions are methods that Control objects (such as buttons) invoke in another object. See &quot;Communicating with Other Objects: Outlets and Actions&quot; in this chapter for more information.</font>

<p><font face="Times" color="#006811">Chapter 4, &quot;Creating a Class&quot; describes connecting the outlets and actions of custom objects in the context of creating a class.</font>

<p><font face="Times" color="#006811">See &quot;Communicating with Objects: Outlets and Actions&quot; in this chapter for more information on targets and actions.</font>

<p><font face="Times" color="#006811">See &quot;Compound Objects&quot; in Chapter 3 for descriptions of the interaction between Control objects and Cell objects, and of the role Matrix objects play.</font>

<p><font face="Times" color="#006811">You can connect text fields and form fields so that when the user presses the Tab key, the cursor moves to another field. See &quot;Enabling Inter-Field Tabbing&quot; later in this chapter for information on this procedure.</font>

<p><br><br><br><br>

<p><img src="../../Images/F53.gif" width=580 height=10 vspace=3>

<p><font face="Helvetica"><b>The Modes of the Instances Display</b></font>

<p><font face="Helvetica" size="-1"><b><sup>Icon Mode</sup></b></font><br>
<img src="Icon_mode.gif" width=588 height=220>

<p><font face="Times">When you open a nib file in Interface Builder, the Instance display of the nib file window first shows objects as icons. This icon mode doesn't show all objects, just the <i>top-level objects</i>--those objects that are not contained by another object. Windows and panels and most controller objects (that is, objects that manage an application or a window) are top-level objects; although they may contain other objects (for instance, a window contains one or more views), no other object contains them.</font>

<p><font face="Times">The graphical representation of objects in icon mode makes it an ideal interface for many operations. Its simple, intuitive, and uncluttered nature makes it easy to do the basic things, such as making connections between top-level and interface objects.</font>

<p><font face="Times">For more complex operations, the Instances display has another mode--outline mode--that shows more detail about objects in the nib file, including their connections with each other.</font>

<p><br><br>

<p><font face="Helvetica" size="-1"><b><sup>Outline Mode</sup></b></font><br>
<img src="Outline_mode1.gif" width=692 height=280><br>
<font face="Times">The most important advantage of outline mode of the Instances display is that it shows <i>all</i> objects in the nib file, not merely the top-level objects. It also shows all connections, both connections into an object and connections from an object to other objects.</font>

<p><font face="Times">The outline mode starts by listing the top-level objects in the nib file. By clicking the open button next to an instance, you can see what other objects it contains. Click a connection button (triangle button) to see what connections go into or out of an object.</font>

<p><font face="Times">You can connect objects in outline mode; there's no need no drag a connection line to the interface. Outline mode also has facilities that make it easy to identify objects in the interface and to disconnect objects.</font>

<p><font face="Times">Objects in icon mode are identified first by class name and then, in parentheses, by title. If the title is obscured, you can resize the nib file window until it is visible.</font>

<p><font face="Helvetica" size="-1"><b><sup>Expanding Objects in Outline Mode</sup></b></font><br>
<font face="Times">In outline mode objects that contain other objects have a small circle button to their left that is filled with gray. The subordinate objects are usually subviews of a window, panel, or another View object, but can be objects that are part of another object not visible on the screen. You display these contained objects by expanding the container object.</font>

<p><font face="Times">Click a circle button to expand an object into a list of its component objects; click it again to collapse the list. Expansions can be nested many levels. To expand everything within an object, Command-click the circle button. Collapse the list back to the original level by Command-clicking the circle button again.</font>

<p><font face="Times">See &quot;The View Hierarchy&quot; later in this chapter for a desciption of the relationship between superview and subview.</font>

<p><br><br>

<p><img src="Outline_mode2.gif" width=625 height=410>

<p><img src="Outline_mode3.gif" width=643 height=228><br>
<img src="../../Images/F54.gif" width=580 height=10 vspace=3></td></tr>

</table>

<p><br><br><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=9></td>

<td><font face="Helvetica"><b>MAKING CONNECTIONS IN OUTLINE MODE</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=35></td>

<td nowrap><font face="Helvetica" size="-1">1</font></td>

<td><font face="Helvetica" size="-1"><b>Select an object.</b></font></td></tr>

<tr valign=top>

<td width=35 height=15></td></tr>

<tr valign=top>

<td width=35></td>

<td nowrap><font face="Helvetica" size="-1">2</font></td>

<td><font face="Helvetica" size="-1"><b>Control-drag a connection to another object.</b></font></td></tr>

<tr valign=top>

<td width=35 height=15></td></tr>

<tr valign=top>

<td width=35></td>

<td nowrap><font face="Helvetica" size="-1">3</font></td>

<td><font face="Helvetica" size="-1"><b>Specify an outlet or action in the Connections display for the destination object.</b></font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Times">You can make connections between objects in the outline mode of the Instances display as well as its icon mode. The connections can be between an object in the outline and an object in the interface or between two objects listed in the outline.</font>

<p><font face="Times">Before you make a connection involving an object in outline mode, make sure that the objects is visible in the display. (You might have to expand the object's &quot;parents&quot; in outline mode to do this.)</font>

<p><img src="ConnectInOutline1.gif" width=609 height=494><br>
<font face="Times">The Connections display of the destination object's Inspector lists the possible connections.</font>

<p><img src="ConnectInOutline2.gif" width=543 height=388>

<p><font face="Times">The outline mode offers the useful capability for making connections without leaving the nib file window. In this example, the same connection is made as in the previous example.</font>

<p><img src="ConnectInOutline3.gif" width=504 height=296>

<p><font face="Times">When the destination object is outlined, its Connections display lists the possible connections. Complete the connection as described above.</font></td></tr>

</table>

<p><br><br><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=9></td>

<td><a name="IB3_ExaminingConnect"></a><font face="Helvetica"><b>EXAMINING CONNECTIONS</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=21></td>

<td width=29><img src="../../Images/F55.gif" width=23 height=7 vspace=3></td>

<td><font face="Helvetica" size="-1"><b>In the interface:</b></font><br>
<font face="Helvetica" size="-1"><b>Select an object and look at the Connections display of the Inspector panel.</b></font></td></tr>

<tr valign=top>

<td width=21 height=15></td></tr>

<tr valign=top>

<td width=21></td>

<td width=29><img src="../../Images/F55.gif" width=23 height=7 vspace=3></td>

<td><font face="Helvetica" size="-1"><b>In the Instances display:</b></font><br>
<font face="Helvetica" size="-1"><b>Select an object and look at the Connections display of the Inspector panel.</b></font></td></tr>

<tr valign=top>

<td width=21 height=15></td></tr>

<tr valign=top>

<td width=21></td>

<td width=29><img src="../../Images/F55.gif" width=23 height=7 vspace=3></td>

<td><font face="Helvetica" size="-1"><b>In the Connections display:</b></font><br>
<font face="Helvetica" size="-1"><b>Click a dimpled outlet to see the connection line drawn.</b></font></td></tr>

<tr valign=top>

<td width=21 height=15></td></tr>

<tr valign=top>

<td width=21></td>

<td width=29><img src="../../Images/F55.gif" width=23 height=7 vspace=3></td>

<td><font face="Helvetica" size="-1"><b>In outline mode:</b></font><br>
<font face="Helvetica" size="-1"><b>Click a triangle button in the column to the right of an object.</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Times">Interface Builder gives you many ways to examine and verify connections between objects. It makes it easy, for example, to discover what outlets and actions might be associated with an object in the interface.</font>

<p><img src="ExamineConnect1.gif" width=544 height=510>

<p><font face="Times">You can also select an object in the Instances display (in both icon and outline modes) and examine the Inspector panel as described above to find out what object it is connected to.</font>

<p><font face="Times">You can also examine object connections going in the other direction too, from the Connections display to the interface and the Instances display.</font>

<p><img src="ExamineConnect2.gif" width=595 height=548>

<p><font face="Times">The Connections display allows you to see one connection at a time. The outline mode of the Instances display shows you <i>all</i> connections an object has, both connections into the object and connections from that object to other objects.</font>

<p><img src="ExamineConnect3.gif" width=601 height=302><br>
<font face="Times">When you click a three-dimensional triangle, lines appear to show the connections between objects. The name and class of each connected object is highlighted in bold. Each connection is labelled with the name of an outlet or action.</font>

<p><img src="ExamineConnect4.gif" width=595 height=379><br>
<font face="Times">To see connections <i>into</i> an object, click a three-dimensional triangle that points to the left (that is, a triangle on the right side of the connections column).</font>

<p><font face="Times">Note that an object may have multiple connections with another object, both in and out, both outlets and actions. In these cases, the outline mode lets you toggle between the connections.</font>

<p><img src="ExamineConnect5.gif" width=590 height=278>

<p><font face="Times">To make the connection lines disappear, click the three-dimensional triangle button that is highlighted.</font>

<p><br><br><br>

<p><img src="../../Images/F53.gif" width=580 height=10 vspace=3>

<p><font face="Helvetica"><b>The View Hierarchy</b></font>

<p><font face="Times">When you expand a Window object in outline mode, and then expand the View objects indented beneath, you are looking at a <i>view hierarchy</i>. All the View objects within a window are linked together in this hierarchy, an abstract tree structure similar to the class inheritance hierarchy.</font>

<p><font face="Times">Within every window's content rectangle--the area enclosed by the border, title bar, and resize bar-- is its <i>content view</i>.&nbsp;&nbsp; The content view is at the top of the view hierarchy. All other Views of the window descend from it. Each View has one other View as its <i>superview</i> and can be the superview for any number of <i>subviews</i>.</font>

<p><img src="ViewHierarchy.gif" width=454 height=344>

<p><font face="Times">What physically determines a View's place in the hierarchy is <i>enclosure</i>.&nbsp;&nbsp; A superview encloses its subviews. Three outlets of View reflect a View's physical relationships to other Views in the window and locate the View in the hierarchy:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times"><b>window</b> identifies the View's window (the window points to the content view)</font></td></tr>

<tr valign=top>

<td width=36 height=8></td></tr>

<tr valign=top>

<td width=36></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times"><b>superview</b>&nbsp; identifies the View's superview</font></td></tr>

<tr valign=top>

<td width=36 height=8></td></tr>

<tr valign=top>

<td width=36></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times"><b>subviews</b> a list of the View's subviews</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><img src="F40.gif" width=257 height=154>

<p><font face="Times">The defining relationship of enclosure makes it easeir to draw a View:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">It allows you to construct a View object (the superview) from its subviews.</font></td></tr>

<tr valign=top>

<td width=36 height=8></td></tr>

<tr valign=top>

<td width=36></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">Views are positioned within the coordinates of their superviews, so when a View object is moved or its coordinate system is transformed, all its subviews are moved and transformed with it.</font></td></tr>

<tr valign=top>

<td width=36 height=8></td></tr>

<tr valign=top>

<td width=36></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">Each View object has its own coordinate system for drawing. Since a View draws within its own coordinate system, its drawing instructions can remain constant no matter where it or its superview moves on the screen.</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Times">Two other instance variables, the frame and bounds rectangles, set the location, dimensions, and coordinate systems of a View.&nbsp;&nbsp; The <b>frame</b> instance variable holds the position and size of a View within its superview's coordinate system. The <b>frame</b> rectangle defines the area in which drawing can occur. The <b>origin</b> point of a frame locates the lower-left corner of the rectangle in the superview's coordinates. The <b>bounds</b> rectangle occupies the same area as the frame rectangle, but it is stated in a different coordinate system; the frame's <b>origin</b> becomes the origin (0.0, 0.0) of the View's drawing coordinates (<b>bounds.origin</b>). The bounds rectangle is thus expressed in the View's own drawing coordinates.</font>

<p><font face="Times">Another instance variable, inherited from the Responder class, determines how events are handled within the view hierarchy. The <b>nextResponder</b> variable by default identifies a View's superview. If a View receives an event message (for example, <b>mouseDown:</b>) and cannot handle it, that message is passed on to the View identified by <b>nextResponder</b>. See the specifications of the Application Kit's View and Responder classes in the <i>NEXTSTEP General Reference</i> and the book <i>Object-Oriented Programming and the Objective C Language</i> for more information on the view hierarchy and event handling.</font>

<p><img src="../../Images/F54.gif" width=580 height=10 vspace=3></td></tr>

</table>

<p><br><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=9></td>

<td><a name="IB3_IdentifyViews"></a><font face="Helvetica"><b>IDENTIFYING OBJECTS IN OUTLINE MODE</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=21></td>

<td width=29><img src="../../Images/F55.gif" width=23 height=7 vspace=3></td>

<td><font face="Helvetica" size="-1"><b>To see a representation of an object, Alternate-click it in outline mode of the Instances display.</b></font></td></tr>

<tr valign=top>

<td width=21 height=15></td></tr>

<tr valign=top>

<td width=21></td>

<td width=29><img src="../../Images/F55.gif" width=23 height=7 vspace=3></td>

<td><font face="Helvetica" size="-1"><b>To have an arrow point at the interface object, Control-Shift-click the object in outline mode.</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Times">In the outline mode of the Instances display you might want to verify what an object is before connecting it to another object. You have two graphical ways to identify an interface object. One method displays an image representing a selected object.</font>

<p><img src="IdentifyObjs1.gif" width=580 height=264>

<p><font face="Times">When you Alternate-click non-View objects in outline mode, the images that represent them in icon mode are displayed (cubes for custom objects, mini-windows for panels and windows). Menus, First Responder, and File's Owner don't display icons.</font>

<p><font face="Times">The other technique locates an object in the interface with a large arrow.</font>

<p><img src="IdentifyObjs2.gif" width=576 height=420>

<p><font face="Times">Control-Shift-Clicking Menu, File's Owner, and First Responder has no effect.</font>

<p><font face="Times" color="#006811">See &quot;The Modes of the Instances Display&quot; earlier in this chapter for an introduction to outline mode.</font></td></tr>

</table>

<p><br><br><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=9></td>

<td><font face="Helvetica"><b>ENABLING INTER-FIELD TABBING</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=35></td>

<td nowrap><font face="Helvetica" size="-1">1</font></td>

<td><font face="Helvetica" size="-1"><b>Make a connection line between forms or fields.</b></font></td></tr>

<tr valign=top>

<td width=35 height=15></td></tr>

<tr valign=top>

<td width=35></td>

<td nowrap><font face="Helvetica" size="-1">2</font></td>

<td><font face="Helvetica" size="-1"><b>Select nextText in the object's Connections display.</b></font></td></tr>

<tr valign=top>

<td width=35 height=15></td></tr>

<tr valign=top>

<td width=35></td>

<td nowrap><font face="Helvetica" size="-1">3</font></td>

<td><font face="Helvetica" size="-1"><b>Click the Connect button.</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><img src="../../Images/sp.gif" width=3 height=1><font face="Times">Sometimes when users press the Tab or Return key in a window with multiple fields, you want the cursor to jump from the current text or form field to the next field. When users press Shift-Tab, you want the cursor to go the previous field. A Form object (a matrix) automatically moves the cursor between its fields. But between text fields, between Forms, or between a Form and a text field, you must specify this behavior.</font>

<p><font face="Times">The Matrix class (of which Form is a subclass) and the TextField class define an instance variable, <b>nextText</b>, as an outlet. This is what you connect.</font>

<p><img src="Sequencing1.gif" width=553 height=216>

<p><font face="Times">Next, make the connection in the Inspector panel.</font>

<p><img src="Sequencing2.gif" width=533 height=387>

<p><br><br>

<p><font face="Times" color="#006811">Note the <b>textDelegate</b> outlet in this example's Inspector. This is the object that receives delegation messages from the Text class on behalf of a text-editable field. See &quot;Acting as Delegate&quot; in Chapter 4 and &quot;Managing Documents Through Delegation&quot; in Chapter 5 for information on delegation.</font>

<p><br><br><br>

<p><img src="../../Images/F53.gif" width=580 height=10 vspace=3>

<p><font face="Helvetica"><b>Standard Objects in the Instances Display:</b></font><br>
<font face="Helvetica"><b>File's Owner, First Responder, and FontManager</b></font>

<p><img src="F36.gif" width=48 height=48>&nbsp;&nbsp; <font face="Helvetica" size="-1"><b>File's Owner</b></font>

<p><font face="Times">Every nib file has one owner, represented by the File's Owner icon. The owner is an object, external to the nib file, that channels messages between the objects unarchived from the nib file and the other objects in your application.</font>

<p><br><br>

<p><img src="FilesOwner.gif" width=583 height=305>

<p><font face="Times">Not only must the owning object be external to its nib file, it must exist before the nib file is unarchived. This is because the same message to NXApp that loads a nib file (<b>loadNibSection:owner:</b> and its variants) also specifies the file's owner.</font>

<p><font face="Times">The typical owner of an auxiliary nib file (such as one containing an Info panel) is an instance of the class you assign to File's Owner in Interface Builder. This class is almost always a custom class, and is frequently the class of the object that manages your application. Once you make the assignment, File's Owner serves as a proxy instance of your class, which you can then connect to the interface. (By the way, the typical owner of an application's main nib file is NXApp, the global Application object.)</font>

<p><font face="Times">See Chapter 5, &quot;Working with Multiple Nib Files,&quot; for more on the role of File's Owner in the loading of auxiliary nib files and for details on assigning classes to File's Owner.</font>

<p><br><br>

<p><img src="FirstResponder8bit.jpeg" width=48 height=48>&nbsp;&nbsp; <font face="Helvetica" size="-1"><b>First Responder</b></font>

<p><font face="Times">The First Responder is the object within a window that first receives keyboard events, mouse-moved events, and action messages from Control objects that don't have an explicit target (for example, cut and paste). The FirstResponder object is the active window's focus for future events. Although technically an object, First Responder is really a status conferred on an object.</font>

<p><font face="Times">Usually, when you click an object that accepts key events (such as a text field), that object becomes the window's First Responder. First Responder status also changes when you make another window key in your application. (Because of this, First Responder can be useful when you build multiple-document applications.) Over time, many different objects can become the First Responder, but at any one time only one object has this status. The First Responder icon stands for the object that currently has this status, no matter which actual object it is within your application.</font>

<p><img src="FirstResponder.gif" width=634 height=415>

<p><font face="Times">The First Responder figures into the event-handling behavior defined by the Responder class. In a window, objects inheriting from Responder (including View, Application, and Window) are part of a a linked list of event-handling objects called a <i>responder chain</i>. If the First Responder can't respond to an event message, its next responder is given a chance to respond. The next responder is (in this general order) a view's superview, or its window, the application, or the delegates of the window or application. If a Responder object can't handle the message, the message continues to be passed up the chain from object to object in search of a Responder that can. Messages are passed in one direction only: up the view hierarchy toward the window and application.</font>

<p><font face="Times">In Interface Builder you can connect a Control object in the interface to the First Responder icon. Thereafter, when the user manipulates this Control (say, by clicking a menu cell entitled Copy) an action message ( <b>copy:</b>) is sent to the object that is currently First Responder. If you examine in Interface Builder the default connections from the Edit menu, you'll discover that its menu cells are all connected to First Responder.</font>

<p><br><br>

<p><img src="fontmanager8bit.jpeg" width=48 height=48>&nbsp;&nbsp; <font face="Helvetica" size="-1"><b>Font Manager</b></font>

<p><font face="Times">The FontManager icon represents a shared instance of the FontManager class among the objects of an application. Interface Builder automatically creates and adds this object to your project when you drag the Font menu into your application's menu. The FontManager is the center of activity for font conversion. It accepts messages from font conversion user-interface objects (such as the Font menu or the Font panel) and appropriately converts the current font in the selection by sending a <b>changeFont:</b> message up the responder chain. See the documentation on the FontManager class for more information.</font>

<p><img src="../../Images/F54.gif" width=580 height=10 vspace=3></td></tr>

</table>

<p><br><br><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=9></td>

<td><a name="IB3_SeverConnect"></a><font face="Helvetica"><b>DISCONNECTING OBJECTS</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=35></td>

<td nowrap><font face="Helvetica" size="-1">1</font></td>

<td><font face="Helvetica" size="-1"><b>Select an object.</b></font></td></tr>

<tr valign=top>

<td width=35 height=15></td></tr>

<tr valign=top>

<td width=35></td>

<td nowrap><font face="Helvetica" size="-1">2</font></td>

<td><font face="Helvetica" size="-1"><b>In the Connections display, select a connection.</b></font></td></tr>

<tr valign=top>

<td width=35 height=15></td></tr>

<tr valign=top>

<td width=35></td>

<td nowrap><font face="Helvetica" size="-1">3</font></td>

<td><font face="Helvetica" size="-1"><b>Click Disconnect..</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Times">Interface Builder gives you two ways to break the connections between objects. The first method uses the Inspector panel.</font>

<p><img src="Severing.gif" width=539 height=511>

<p><font face="Times">You can also initiate this procedure by selecting objects in icon mode of the Instances display, and then disconnecting them in the Inspector panel as above.</font>

<p><font face="Times">The alternative method for disconnecting objects is somewhat easier because you can complete the operation in one place: in outline mode of the Instances display. First show connections for an object by clicking a three-dimensional triangle button.</font>

<p><img src="Severing2.gif" width=578 height=292>

<p><font face="Times">To make the scissors cursor appear over a connection line, you must press the Control key over a line on the <i>right</i> side of the column divider (nearest the connection-out and connection-in triangle buttons). You Control-click on the <i>left</i> side of the column divider to begin connection operations.

<p></font><font face="Times" color="#006811">See the task earlier in this chapter, &quot;Examining Connections,&quot; to learn how to use outline mode to display the connections between objects.</font></td></tr>

</table>

<p><br><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=9></td>

<td><font face="Helvetica"><b>COPYING INTERCONNECTED OBJECTS</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=35></td>

<td nowrap><font face="Helvetica" size="-1">1</font></td>

<td><font face="Helvetica" size="-1"><b>Select the objects that are connected.</b></font></td></tr>

<tr valign=top>

<td width=35 height=15></td></tr>

<tr valign=top>

<td width=35></td>

<td nowrap><font face="Helvetica" size="-1">2</font></td>

<td><font face="Helvetica" size="-1"><b>Alternate-drag the objects into another nib file window or onto another Window or Panel object.</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Times">You can easily copy objects--with their connections-- between nib files. You'll probably use this feature most often to copy a window and its views along with the custom object that manages those views.</font>

<p><img src="CopyInterconnect1.gif" width=524 height=449>

<p><font face="Times">Notice the icon representing the copied objects in the example above. Under the mouse is the icon representing the object that is actually dragged. The plus sign indicates that more than one object is involved in the operation. When the copying process completes, the new nib file window holds duplicates of the objects that include their connections to each other.</font>

<p><font face="Times">You can use the same basic technique to copy connected objects on an interface. In the next example, an instance of a View subclass is connected to the Run and Stop buttons. You can copy these objects and their connections by Alternate-dragging them onto a window in another nib file.</font>

<p><img src="CopyInterconnect2.gif" width=519 height=359>

<p><font face="Times">Another occasion for copying connected interface objects is when you want to make copies of text fields or form fields and preserve the connections between fields.</font>

<p><font face="Times" size="-1"><b>Tip:</b></font> <font face="Times">If you want to copy interconnected interface objects to another window or panel in the <i>same</i> nib file, select the objects, copy and paste them (using the Copy and Paste commands), and then Alternate-drag the duplicated objects.</font>

<p><font face="Times">From the outline mode of the Instances display, you can copy an individual View object, a custom non-View object, and the connections between the two.</font>

<p><img src="CopyInterconnect3.gif" width=554 height=385>

<p><br><br>

<p><font face="Times" color="#006811">The various scenarios for copying objects and their connections between nib files is quite similar to the procedures for copying objects to dynamic palettes. See Chapter 5, &quot;Using Dynamic Palettes,&quot; for more information on this Interface Builder feature.</font></td></tr>

</table>

<p><br><br><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=9></td>

<td><a name="IB3_TestIF"></a><font face="Helvetica"><b>TESTING THE INTERFACE</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=35></td>

<td nowrap><font face="Helvetica" size="-1">1</font></td>

<td><font face="Helvetica" size="-1"><b>Choose the Test Interface menu command.</b></font></td></tr>

<tr valign=top>

<td width=35 height=15></td></tr>

<tr valign=top>

<td width=35></td>

<td nowrap><font face="Helvetica" size="-1">2</font></td>

<td><font face="Helvetica" size="-1"><b>Check the functioning of kit objects.</b></font></td></tr>

<tr valign=top>

<td width=35 height=15></td></tr>

<tr valign=top>

<td width=35></td>

<td nowrap><font face="Helvetica" size="-1">3</font></td>

<td><font face="Helvetica" size="-1"><b>Choose Quit from the application menu or double-click the switch icon in the application dock.</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Times">After you create an interface, Interface Builder lets you see how it works from</font><br>
<font face="Times">the user's perspective. Just choose the Test Interface command from the Document menu.</font>

<p><font face="Times">Interface Builder's menu, windows, and panels disappear, leaving only the actual interface and (if you are testing the application's main nib file) the main menu. Give your interface a test ride. Here's some of the things you might try:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">Verify that the cursor moves from field to field when you press Tab and Return.</font></td></tr>

<tr valign=top>

<td width=36 height=8></td></tr>

<tr valign=top>

<td width=36></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">Verify that you can copy, cut, and paste text (First Responder actions).</font></td></tr>

<tr valign=top>

<td width=36 height=8></td></tr>

<tr valign=top>

<td width=36></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">See if you can print (the Print menu item must be connected to an appropriate View object's <b>printPSCode:</b> action method).</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Times"><b>Note</b></font><font face="Times" size="-1"><b>:</b></font> <font face="Times">When you test your interface, the behavior provided by your custom classes is not called into play (with the exception of static, compiled palette objects). You can only test the behavior that kit and static palette objects exhibit in themselves and when they send messages to each other. To test all components of your application, you must compile and run it.</font>

<p><font face="Times">When you are finished testing the interface, exit from text mode.</font>

<p><img src="TestingIF.gif" width=587 height=125></td></tr>

</table>



<p><br>

</body>
</html>
