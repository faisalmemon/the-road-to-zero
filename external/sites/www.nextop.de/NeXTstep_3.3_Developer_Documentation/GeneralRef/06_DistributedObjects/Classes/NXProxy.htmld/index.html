<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<!-- Created with LatinByrd III -->
<!-- File: /Apps/NextDev/GeneralRef/06_DistributedObjects/Classes/NXProxy.rtf -->
<!-- Date: Sun Jun 28 20:05:22 1998 -->
<head>
<title>NXProxy</title>
</head>

<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" alink="#FF00FF" vlink="#FF0000">

<basefont size=3>

<p><font face="Times" size="-1">Copyright</font> <font size="-1">&copy;</font><font face="Times" size="-1">1995 by NeXT Computer, Inc.&nbsp; All Rights Reserved.</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica" size="+2"><b>NXProxy</b></font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Helvetica"><b>Inherits From:</b></font></td>

<td><font face="Times">none (<i>NXProxy is a root class</i>.)</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Helvetica"><b>Conforms To:</b></font></td>

<td><font face="Times">NXReference (Mach Kit)</font><br>
<font face="Times">NXTransport</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Helvetica"><b>Declared In:</b></font></td>

<td><font face="Times">remote/NXProxy.h</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=69></td>

<td><font face="Helvetica" size="+1"><b>Class Description</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">The NXProxy class defines objects that are used to stand in for real objects (descendants of the Object class), where the real objects may exist within another process, even across a network.&nbsp; To the application, the NXProxy appears to be the real object, though the real object may not be directly accessible.&nbsp; The real object is known as the proxy's <i>correspondent</i>, indicating both that the objects are counterparts and that the real object is required to respond to messages sent to the proxy.</font>

<p><font face="Times">The NXProxy class defines very few methods, because proxies respond to very few messages directly.&nbsp; Instead, when an NXProxy receives a message that it doesn't respond to, it encodes the message, including the arguments, and forwards it to its remote correspondent (the &quot;real&quot; object).&nbsp; The actual communication details involved in forwarding the message are taken care of by an NXConnection object.&nbsp; The message is then acted upon by the real object, and any return values and parameters are encoded and sent back to the proxy.</font>

<p><font face="Times">An application never instantiates NXProxy objects directly; they are created for your application when you are given a reference to an object that doesn't exist in your address space.&nbsp; The proxies vended to your application are reference-counted, so only a single NXProxy per connection is instantiated for any real object.&nbsp; When you're done with a remote object, you should typically send it a <b>free</b> message to eliminate its remote proxy locally and its local proxy remotely.&nbsp; This will decrement the reference-count on the proxy, and free it if there are no outstanding references.&nbsp; The <b>free</b> message will also be forwarded to the proxy's correspondent, which will free it (or dereference it if the object conforms to the NXReference protocol).&nbsp; An application alternatively might free the proxy's NXConnection, which will free all the connection's resources, including all its proxies.</font>

<p><font face="Times">The methods defined in this class are the ones that the NXProxy class directly responds to.&nbsp; Unless otherwise noted, none of these methods are forwarded to the proxy's correspondent.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=69></td>

<td><font face="Helvetica" size="+1"><b>Instance Variables</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">None declared in this class.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=69></td>

<td><font face="Helvetica" size="+1"><b>Adopted Protocols</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times">NXReference</font></td>

<td><img src="../../../Images/c2D.gif" width=8 height=4> <font face="Times">addReference</font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=306></td>

<td><img src="../../../Images/c2D.gif" width=8 height=4> <font face="Times">free</font><br>
<img src="../../../Images/c2D.gif" width=8 height=4> <font face="Times">references</font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times">NXTransport</font></td>

<td><img src="../../../Images/c2D.gif" width=8 height=4> <font face="Times">encodeRemotelyFor: freeAfterEncoding:isBycopy:</font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=306></td>

<td><img src="../../../Images/c2D.gif" width=8 height=4> <font face="Times">encodeUsing:</font><br>
<img src="../../../Images/c2D.gif" width=8 height=4> <font face="Times">decodeUsing:</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=69></td>

<td><font face="Helvetica" size="+1"><b>Method Types</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Times">Returning the proxy's connection</font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=308></td>

<td><img src="../../../Images/c2D.gif" width=8 height=4> <font face="Times">connectionForProxy</font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times">Freeing an NXProxy instance</font></td>

<td><img src="../../../Images/c2D.gif" width=8 height=4> <font face="Times">freeProxy</font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Times">Determining if an object is a proxy</font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=308></td>

<td><img src="../../../Images/c2D.gif" width=8 height=4> <font face="Times">isProxy</font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times">Specifying a protocol</font></td>

<td><img src="../../../Images/c2D.gif" width=8 height=4> <font face="Times">setProtocolForProxy:</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=69></td>

<td><font face="Helvetica" size="+1"><b>Instance Methods</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Helvetica"><b>connectionForProxy</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td><img src="../../../Images/c2D.gif" width=8 height=4>&nbsp; <font face="Times"><b>connectionForProxy</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Returns the local NXConnection instance used by the receiving NXProxy.&nbsp; A client might send messages to the returned NXConnection to be notified of invalidations (such as port deaths), or to instruct it to begin receiving messages with a variant of the <b>run</b> message.</font>

<p><font face="Helvetica"><b>See also:</b></font>&nbsp; <img src="../../../Images/c2D.gif" width=8 height=4> <font face="Times"><b>registerForInvalidationNotification</b> (NXInvalidationNotifier in Mach Kit),</font> <img src="../../../Images/c2D.gif" width=8 height=4> <font face="Times"><b>runFromAppKit </b>(NXConnection)</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Helvetica"><b>free</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td><img src="../../../Images/c2D.gif" width=8 height=4> <font face="Times"><b>free</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Decrements the reference count on the proxy.&nbsp; If there are remaining references to the proxy, the <b>free</b> message isn't forwarded across the connection and this method returns <b>self</b>.&nbsp; If there are no remaining references, the proxy forwards the <b>free</b> message to its corresponding object, invokes the <b>freeProxy</b> method to free the proxy locally, and returns <b>nil</b>.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Helvetica"><b>freeProxy</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td><img src="../../../Images/c2D.gif" width=8 height=4> <font face="Times"><b>freeProxy</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Frees the receiving NXProxy instance.&nbsp; You generally shouldn't send this message; it isn't forwarded across the connection, so remote NXConnection objects may still have references to the freed NXProxy and it won't get removed from remote hashtables.&nbsp; If you want to free the local proxy and eliminate outstanding references, the real object should obey the NXReference protocol; then when you send the object a <b>free</b> message, the proper dereferencing (and perhaps freeing) will occur both locally and remotely.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Helvetica"><b>isProxy</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td><img src="../../../Images/c2D.gif" width=8 height=4> <font face="Times">(BOOL)<b>isProxy</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Returns YES to indicate that the receiver is an NXProxy rather than a normal object.&nbsp; This method is also implemented in a category of the Object class (where it returns NO), so you can send this message to any object to determine whether it is a real object or a proxy.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Helvetica"><b>setProtocolForProxy:</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td><img src="../../../Images/c2D.gif" width=8 height=4> <font face="Times"><b>setProtocolForProxy:</b>(Protocol *)<i>proto</i></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Formally establishes the messages and arguments that the proxy will forward to its corresponding object.&nbsp; It's a good idea to send this message to an NXProxy immediately after it is vended to your application.</font>

<p><font face="Times">If you don't send this message to a proxy (and therefore a protocol isn't established), at run-time the proxy doesn't know a message's argument types, and can't immediately encode the arguments.&nbsp; It must then send a remote message to its corresponding object to get the argument types.&nbsp; This round trip increases the cost of the message.&nbsp; You should therefore send the <b>setProtocolForProxy:</b> message to the proxy to cache the argument types, alleviating the need for the initial round trip.</font>

<p><font face="Times">If you send a message that isn't in the established protocol, the round trip to establish the argument types will still be performed. You must take care that the argument types in the given protocol <i>proto</i> accurately reflect the argument types of the methods in the proxy's corresponding object; otherwise the arguments will not be correctly encoded.&nbsp; Returns <b>self</b>.</font></td></tr>

</table>



<p>

</body>
</html>
