<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<!-- Created with LatinByrd III -->
<!-- File: /Apps/NextDev/GeneralRef/_ApA_DataFormats/DataFormats.rtf -->
<!-- Date: Sun Jun 28 20:08:06 1998 -->
<head>
<title>DataFormats</title>
</head>

<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" alink="#FF00FF" vlink="#FF0000">

<basefont size=3>

<p><font face="Times" size="-1">Copyright</font> <font size="-1">&copy;</font><font face="Times" size="-1">1995 by NeXT Computer, Inc.&nbsp; All Rights Reserved.</font>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+3" color="#FF00FF"><b>A</b></font></td></tr>

</table>

<p><br><br>

<p><font face="Times" size="+3"><i>Data Formats</i></font>

<p><br><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">To make it easier for applications to share information, the NEXTSTEP pasteboard supports a number of standard data formats. Each format, or <i>pasteboard type</i>, is identified by a global variable:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Helvetica"><b>Variable Name</b></font></td>

<td><font face="Helvetica"><b>Type Description</b></font></td></tr>

<tr valign=top>

<td width=124 height=4></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times">NXAsciiPboardType</font></td>

<td><font face="Times">Plain ASCII text</font></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times">NXPostScriptPboardType</font></td>

<td><font face="Times">Encapsulated PostScript code (EPS)</font></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times">N3DRIBPboardType</font></td>

<td><font face="Times">RenderMan Interface Bytestream code (RIB)</font></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times">NXTIFFPboardType</font></td>

<td><font face="Times">Tag Image File Format (TIFF)</font></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times">NXRTFPboardType</font></td>

<td><font face="Times">Rich Text Format (RTF)</font></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times">NXSoundPboardType</font></td>

<td><font face="Times">Sound data</font></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times">NXFilenamePboardType</font></td>

<td><font face="Times">ASCII text designating a file name</font></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times">NXTabularTextPboardType</font></td>

<td><font face="Times">Tab-separated fields of ASCII text</font></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times">NXFontPboardType</font></td>

<td><font face="Times">Font and character information</font></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times">NXRulerPboardType</font></td>

<td><font face="Times">Paragraph formatting information</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Data in other formats can also be placed in the pasteboard.&nbsp; However, the sending and receiving applications must both agree on the structure of the format, its name, and how to interpret it.&nbsp; Other formats may be adopted as standards in the future.</font>

<p><font face="Times">Each of the standard formats is discussed below.&nbsp; In most cases, the discussion is short and consists only of a reference to the primary source document for the format.&nbsp; In some cases, more information is given on modifications to or interpretations of the format in the NEXTSTEP environment.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>NXAsciiPboardType</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Text in this format consists only of characters from the ASCII character set as extended by NEXTSTEP encoding.&nbsp; None of the characters is given a special interpretation (in contrast to NXTabularTextPboardType and NXFilenamePboardType, for example).&nbsp; Standard ASCII is documented on-line in <b>/usr/pub/ascii</b> and the <b>ascii</b>(7) manual page.&nbsp; NEXTSTEP encoding is documented in Appendix C, &quot;Keyboard Event Information.&quot;</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>NXPostScriptPboardType</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">This type is defined as PostScript code in the Encapsulated PostScript Files format (EPS).&nbsp; The PostScript language is documented by Adobe Systems Incorporated, principally in the <i>PostScript Language Reference Manual</i>.&nbsp; EPS conventions are documented in <i>Encapsulated PostScript Files Specification</i>, also by Adobe.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>N3DRIBPboardType</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">This type is for RenderMan Interface Bytestream (RIB) code. The format of RIB code is documented in <i>The RenderMan Interface</i>, by Pixar.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>NXTIFFPboardType</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">This type is for image data in Tag Image File Format (TIFF).&nbsp; TIFF is documented in <i>Tag Image File Format Specification</i>, by Aldus Corporation and Microsoft Corporation.</font>

<p><font face="Times">TIFF support in the current NEXTSTEP release follows version 6.0 of the TIFF standard and is based on version 3.0 of Sam Leffler's freely distributed TIFF library.&nbsp; This library provides a good set of routines for dealing with TIFF files that conform to the 6.0 specification.</font>

<p><font face="Times">NEXTSTEP TIFF support is embodied in the Application Kit's NXBitmapImageRep class and the command-line program <b>tiffutil</b>.&nbsp; See the class specification for NXBitmapImageRep in Chapter 2, &quot;The Application Kit,&quot; and the <b>tiffutil</b>(1) manual page for more information.</font>

<p><br><br><br>

<p><font face="Helvetica" size="+1"><b>Unsupported Fields</b></font>

<p><font face="Times">In the current release, some fields--principally those having to do with response curves-- will be read correctly but ignored when imaging the data.&nbsp; Color palettes are not supported except when the palette entries are 8 bits and the stored colors are 24 bits.&nbsp; These files will be read correctly and converted to 24-bit images on the fly.</font>

<p><br><br><br>

<p><font face="Helvetica" size="+1"><b>Multiple Images</b></font>

<p><font face="Times">Multiple forms of an image can now be stored in the same file--that is, under the same TIFF header.&nbsp; &quot;Multiple forms&quot; might mean the same image at different resolutions (for example, 72dpi and 400dpi) and at different bit depths or colors (for example, 2 bits per sample on a gray scale and 4 bits per sample RGB).</font>

<p><font face="Times">This feature is useful when you want to create color icons for an application and its documents.&nbsp; It's best to create both gray scale and color versions of the icons and store them in the same section of the __ICON segment.&nbsp; Both versions of the icon would be created at 72 dpi and would be 48 pixels wide by 48 pixels high.&nbsp; The gray-scale version would have two components (gray and alpha), with each component stored at 2 bits.&nbsp; The color version would have four components (red, green, blue, and alpha) and each component would be 4 bits deep.&nbsp; (It's recommended that application and document icons be stored at 4 bits per sample, not 8.)</font>

<p><br><br><br>

<p><font face="Helvetica" size="+1"><b>Compression</b></font>

<p><font face="Times">NEXTSTEP software can both read and write compressed TIFF images.&nbsp; The Compression field in a TIFF file can have any of the following values:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Helvetica"><b>Value</b></font></td>

<td><font face="Helvetica"><b>Type</b></font></td></tr>

<tr valign=top>

<td width=124 height=4></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><img src="../../Images/sp.gif" width=7 height=1><font face="Times">1</font></td>

<td><font face="Times">No compression</font></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><img src="../../Images/sp.gif" width=7 height=1><font face="Times">3</font></td>

<td><font face="Times">CCITT Group 3 compression</font></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><img src="../../Images/sp.gif" width=7 height=1><font face="Times">4</font></td>

<td><font face="Times">CCITT Group 4 compression</font></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><img src="../../Images/sp.gif" width=7 height=1><font face="Times">5</font></td>

<td><font face="Times">LZW (Lempel-Ziv and Welch) compression</font></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><img src="../../Images/sp.gif" width=7 height=1><font face="Times">6</font></td>

<td><font face="Times">JPEG compression</font></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><img src="../../Images/sp.gif" width=7 height=1><font face="Times">32773</font></td>

<td><font face="Times">PackBits compression</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">JPEG compression can be used only for images that have a depth of at least 4 bits per sample; in all cases, the compressed images will be expanded to 8 bits per sample.&nbsp; CCITT Group 3 and Group 4 images can be applied only to monochrome images that have 1 bit per sample.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>NXRTFPboardType</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">This is the pasteboard type for &quot;rich text,&quot; text that follows the conventions of the Rich Text Format</font><font size="-2"><sup>&reg;</sup></font><font face="Times">, as described in <i>Rich Text Format Specification</i> by Microsoft Corporation.</font>

<p><font face="Times">To this specification, NeXT has added a control word to indicate how the user selected the text before copying it to the pasteboard.&nbsp; The control word is</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=125></td>

<td><font face="Times">\smartcopy<i>&lt;num&gt;</i></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">where <i>&lt;num&gt;</i> can be 1 or 0.&nbsp; A value of 1 indicates that the user made the selection by double-clicking a word, or double-clicking and dragging over a group of words.&nbsp; The range of text in the pasteboard will be delimited by a word boundary on either side.&nbsp; The pasting application can use this information to correctly adjust the spacing around the word or words that are pasted.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>NXSoundPboardType</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">This format is defined by the SNDSoundStruct structure in the header file <b>sound/soundstruct.h</b>.&nbsp; The structure is discussed in detail in Chapter 16, &quot;Sound.&quot;</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>NXFilenamePboardType</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">This format is a list of tab-separated file names (or pathnames), terminated by a null character (`\0').</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>NXTabularTextPboardType</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">This format is ASCII text where tabs (ASCII 0x09) and returns or newlines (ASCII 0x0D) are interpreted as separators between text fields.&nbsp; In a matrix, tabs separate columns and returns separate rows.&nbsp; The text is null-terminated.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>NXFontPboardType</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">This format is used in the font pasteboard to record character properties that are copied and pasted using the Copy Font and Paste Font commands.&nbsp; It consists of RTF control words from the &quot;Font Table&quot; and &quot;Character Formatting Properties&quot; groups.</font>

<p><font face="Times">The following is an example of character data in this format:</font></td></tr>

</table>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">{\rtf1\ansi{\fonttbl\f0\froman Times;}</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">\f0\b0\i\ul0\fs48}</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">The first two control words, <b>\rtf1</b> and <b>\ansi</b>, announce that the information enclosed within the outer braces is RTF version 1 in ANSI character encoding.&nbsp; These two control words, or their equivalent, are required by RTF conventions.</font>

<p><font face="Times">The group within the inner braces defines a font table, here with a single entry specifying font 0 to be Times-Roman.&nbsp; The font is then specified as Times-Roman (font 0), not bold, Oblique (italic), not underlined, and having a font size of 24 points (48 half points).</font>

<p><font face="Times">Among the fonts that can be specified in a font table are these:</font></td></tr>

</table>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">\fmodern Courier;</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">\fswiss Helvetica;</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">\fmodern Ohlfs;</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">\ftech Symbol;</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">\froman Times;</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Several synonyms are recognized for the Times-Roman font.&nbsp; Usually it's written as &quot;Times&quot; or &quot;Times-Roman&quot;.</font>

<p><font face="Times">If the font pasteboard contains RTF control words that don't belong to the &quot;Font Table&quot; or &quot;Character Formatting Properties&quot; groups, they should be ignored.&nbsp; If control words specify more than one value for a font characteristic, the last value specified should be used when pasting.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>NXRulerPboardType</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">This format is used in the ruler pasteboard to capture information about how a paragraph is formatted.&nbsp; It consists of RTF control words from the &quot;Paragraph Formatting Properties&quot; group.</font>

<p><font face="Times">The following is an example of this type:</font></td></tr>

</table>

<p><img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">{\rtf1\ansi</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">\pard\ql\tx1252\tx2716\tx4148\tx5592\tx7004\tx11520</font><br>
<img src="../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">\fi-540\li1260}</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">The first two control words are required by RTF conventions, as explained under &quot;NXFontPboardType&quot; above.&nbsp; The next control word, <b>\pard</b>, resets the paragraph format to the default.&nbsp; The paragraph is then specified to be left-aligned and a series of six tabs are set.&nbsp; Next, the indentation of the first line is specified and, finally, the left indent.&nbsp; (The example is for a paragraph with a hanging indent.)</font>

<p><font face="Times">If the ruler pasteboard contains RTF control words that aren't in the &quot;Paragraph Formatting Properties&quot; group, they should be ignored.&nbsp; If it includes control words that first set then reset a paragraph property, the final specification should be the one that's used.</font></td></tr>

</table>



<p>

</body>
</html>
