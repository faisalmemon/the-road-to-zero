<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<!-- Created with LatinByrd III -->
<!-- File: /Apps/NextDev/OperatingSystem/Part3_DriverKit/Reference/Classes/IONetwork.rtf -->
<!-- Date: Sun Jun 28 20:11:36 1998 -->
<head>
<title>IONetwork</title>
</head>

<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" alink="#FF00FF" vlink="#FF0000">

<basefont size=3>

<p><font face="Times" size="-1">Copyright</font> <font size="-1">&copy;</font><font face="Times" size="-1">1995 by NeXT Computer, Inc.&nbsp; All Rights Reserved.</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica" size="+2"><b>IONetwork</b></font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Helvetica"><b>Inherits From:</b></font></td>

<td><font face="Times">Object</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Helvetica"><b>Declared In:</b></font></td>

<td><font face="Times">driverkit/IONetwork.h</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=69></td>

<td><font face="Helvetica" size="+1"><b>Class Description</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">The IONetwork class connects direct drivers, such as Ethernet drivers, into the kernel network interface. One IONetwork object is associated with each instance of a network direct driver. In the future, support may be added for indirect network drivers, as well.</font>

<p><font face="Times">Network direct drivers must implement the IONetworkDeviceMethods protocol, so that the IONetwork can send them messages.</font>

<p><font face="Helvetica"><b>Note:</b></font>&nbsp; <font face="Times">Network drivers must run in the kernel.</font>

<p><font face="Times">See the IOEthernet specification for information on how to write Ethernet drivers, and the IOTokenRing specification for information on writing Token Ring drivers. See Chapter 8, &quot;Network Modules,&quot; in <i>NEXTSTEP Operating System Software</i> for more information about network drivers.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=69></td>

<td><font face="Helvetica" size="+1"><b>Instance Variables</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">None declared in this class.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=69></td>

<td><font face="Helvetica" size="+1"><b>Method Types</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Times">Initializing an IONetwork instance</font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=306></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">initForNetworkDevice:name:unit:type:</font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=333></td>

<td><font face="Times">maxTransferUnit:flags:</font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=306></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">finishInitialization</font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Times">Passing packets from the driver up to the protocol stack</font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=306></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">handleInputPacket:extra:</font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times">Outputting a packet</font></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">outputPacket:address:</font></td></tr>

<tr valign=top>

<td width=105 height=7></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times">Performing a command</font></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">performCommand:data:</font></td></tr>

<tr valign=top>

<td width=105 height=7></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times">Allocating a network buffer</font></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">allocateNetbuf</font></td></tr>

<tr valign=top>

<td width=105 height=7></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times">Keeping statistics</font></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">collisions</font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=306></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">incrementCollisions</font><br>
<img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">incrementCollisionsBy:</font><br>
<img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">incrementInputErrors</font><br>
<img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">incrementInputErrorsBy:</font><br>
<img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">incrementInputPackets</font><br>
<img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">incrementInputPacketsBy:</font><br>
<img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">incrementOutputErrors</font><br>
<img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">incrementOutputErrorsBy:</font><br>
<img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">incrementOutputPackets</font><br>
<img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">incrementOutputPacketsBy:</font><br>
<img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">inputErrors</font><br>
<img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">inputPackets</font><br>
<img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">outputErrors</font><br>
<img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">outputPackets</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=69></td>

<td><font face="Helvetica" size="+1"><b>Instance Methods</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Helvetica"><b>allocateNetbuf</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">(netbuf_t)<b>allocateNetbuf</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">This method creates and returns a netbuf to be used for an impending output.</font>

<p><font face="Times">This method doesn't always have to return a buffer. For example, you might want to limit the number of buffers your driver instance can allocate (say, 200 kilobytes worth) so that it won't use too much wired-down kernel memory. When this method fails to return a buffer, it should return NULL.</font>

<p><font face="Times">Here's an example of implementing <b>allocateNetbuf</b>.</font></td></tr>

</table>

<p><img src="../../../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">#define my_HDR_SIZE&nbsp;&nbsp;&nbsp; 14</font><br>
<img src="../../../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">#define my_MTU&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1500</font><br>
<img src="../../../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">#define my_MAX_PACKET&nbsp; (my_HDR_SIZE + my_MTU)</font>

<p><img src="../../../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">- netbuf_t allocateNetbuf</font><br>
<img src="../../../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">{</font><br>
<img src="../../../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1">if (_numbufs == _maxNumbufs)</font><br>
<img src="../../../../Images/sp.gif" width=180 height=1><font face="Courier" size="-1">return(NULL);</font><br>
<img src="../../../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1">else {</font><br>
<img src="../../../../Images/sp.gif" width=180 height=1><font face="Courier" size="-1">_numbufs++;</font><br>
<img src="../../../../Images/sp.gif" width=180 height=1><font face="Courier" size="-1">return(nb_alloc(my_MAX_PACKET));</font><br>
<img src="../../../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1">}</font><br>
<img src="../../../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">}</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>See also:</b></font>&nbsp; <font face="Times"><b>nb_alloc()</b> (<i>NEXTSTEP Operating System Software)</i></font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Helvetica"><b>collisions</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">(unsigned int)<b>collisions</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Returns the total number of network packet collisions that have been detected since boot time.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Helvetica"><b>finishInitialization</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td><font face="Times">- (int)<b>finishInitialization</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">This method should perform any initialization that hasn't already been done. For example, it should make sure its hardware is ready to run. You can specify what the integer return value (if any) should be.</font>

<p><font face="Times">If you implement this method, you need to check that [self isRunning] == YES.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Helvetica"><b>handleInputPacket:extra:</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">(int)<b>handleInputPacket:</b>(netbuf_t)<i>packet</i> <b>extra:</b>(void *)<i>extra</i></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Increments the number of input packets and passes <i>packet</i> to the kernel for processing. The kernel dispatches the packet to the appropriate protocol handler, as described <i>&lt;&lt;only in the OS book, for now&gt;&gt;</i>.</font>

<p><font face="Times">A network device driver should invoke this method after it's processed a newly received packet. The value of <i>extra</i> should be zero, unless the protocol handler requires another value. For instance, token ring drivers need to return a valid pointer to a token ring header. This method returns EAFNOSUPPORT if no protocol handler accepts the packet; otherwise, it returns zero.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Helvetica"><b>incrementCollisions</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">(void)<b>incrementCollisions</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Increments by one the total number of network packet collisions that have been detected since boot time.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Helvetica"><b>incrementCollisionsBy:</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">(void)<b>incrementCollisionsBy:</b>(unsigned int)<i>increment</i></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Increments by <i>increment</i> the total number of network packet collisions that have been detected since boot time.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Helvetica"><b>incrementInputErrors</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">(void)<b>incrementInputErrors</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Increments by one the total number of packet input errors that have been detected since boot time.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Helvetica"><b>incrementInputErrorsBy:</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">(void)<b>incrementInputErrorsBy:</b>(unsigned int)<i>increment</i></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Increments by <i>increment</i> the total number of packet input errors that have been detected since boot time.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Helvetica"><b>incrementInputPackets</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">(void)<b>incrementInputPackets</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Increments by one the total number of packets that have been received by the computer since boot time. You usually don't need to invoke this method because <b>handleInputPacket:extra:</b> does so for you.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Helvetica"><b>incrementInputPacketsBy:</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">(void)<b>incrementInputPacketsBy:</b>(unsigned int)<i>increment</i></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Increments by <i>increment</i> the total number of packets that have been received by the computer since boot time.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Helvetica"><b>incrementOutputErrors</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">(void)<b>incrementOutputErrors</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Increments by one the total number of packet output errors that have been detected since boot time.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Helvetica"><b>incrementOutputErrorsBy:</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">(void)<b>incrementOutputErrorsBy:</b>(unsigned int)<i>increment</i></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Increments by <i>increment</i> the total number of packet output errors that have been detected since boot time.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Helvetica"><b>incrementOutputPackets</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">(void)<b>incrementOutputPackets</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Increments by one the total number of packets that have been transmitted by the computer since boot time.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Helvetica"><b>incrementOutputPacketsBy:</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">(void)<b>incrementOutputPacketsBy:</b>(unsigned int)<i>increment</i></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Increments by <i>increment</i> the total number of packets that have been transmitted by the computer since boot time.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Helvetica"><b>initForNetworkDevice:name:unit:type:maxTransferUnit:flags:</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times"><b>initForNetworkDevice:</b><i>device</i></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=163></td>

<td><font face="Times"><b>name:</b>(const char *)<i>name</i></font><br>
<font face="Times"><b>unit:</b>(unsigned int)<i>unit</i></font><br>
<font face="Times"><b>type:</b>(const char *)<i>type</i></font><br>
<font face="Times"><b>maxTransferUnit:</b>(unsigned int)<i>mtu</i></font><br>
<font face="Times"><b>flags:</b>(unsigned int)<i>flags</i></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Initializes and returns the IONetwork instance associated with the specified direct device driver <i>device</i>. This method connects <i>device</i> into the kernel's networking subsystem. It's typically called from a network driver's implementation of <b>initFromDeviceDescription</b>. You shouldn't invoke <b>initForNetworkDevice:...</b> directly. IOEthernet and IOTokenRing invoke this method on behalf of their subclasses and return an IONetwork object in their respective <b>attachToNetworkWithAddress: </b>methods.</font>

<p><font face="Times">The <i>name</i> argument should be set to a constant string that names this type of network device. For example, Ethernet drivers are named &quot;en&quot;, and Token Ring drivers are named &quot;tr&quot;. The <i>unit</i> is an integer greater than or equal to zero that's unique for <i>name</i>. For example, the first instance of an Ethernet driver is unit 0, the second is unit 1, and so on.</font>

<p><font face="Times">The <i>type</i> is a constant string that describes this module. For example, Ethernet drivers supply the constant IFTYPE_ETHERNET (which is defined in <b>net/etherdefs.h</b> to be &quot;10MB Ethernet&quot;).</font>

<p><font face="Times">The <i>mtu</i> is the maximum amount of data your module can send or receive. For example, Ethernet drivers use the value </font><font face="Courier" size="-1">ETHERMTU</font><font face="Times">, which is defined in the header file <b>net/etherdefs.h</b> as <b>1500</b>.</font>

<p><font face="Times">Finally, <i>flags</i> defines the initial flags for the interface. Possible values are:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times">IFF_UP:</font></td>

<td><font face="Times">If true, this interface is working.</font></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times">IFF_BROADCAST:</font></td>

<td><font face="Times">If true, this interface supports broadcast.</font></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times">IFF_LOOPBACK:</font></td>

<td><font face="Times">If true, this interface is local only.</font></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times">IFF_POINTTOPOINT:</font></td>

<td><font face="Times">If true, this is a point-to-point interface.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Helvetica"><b>inputErrors</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">(unsigned int)<b>inputErrors</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Returns the total number of packet input errors that have been detected since boot time.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Helvetica"><b>inputPackets</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">(unsigned int)<b>inputPackets</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Returns the total number of packets that have been received by the computer since boot time.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Helvetica"><b>outputErrors</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">(unsigned int)<b>outputErrors</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Returns the total number of packet output errors that have been detected since boot time.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Helvetica"><b>outputPacket:address:</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">(int)<b>outputPacket:</b>(netbuf_t)<i>packet</i> <b>address:</b>(void *)<i>address</i></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">This method should deliver the specified packet to the given address. Its return value should be zero if no error occurred; otherwise, return an error number from the header file <b>sys/errno.h</b>.</font>

<p><font face="Times">If you implement this method, you need to check that [self isRunning] == YES. If so, insert the necessary hardware addresses into the packet and check it for minimum length requirements.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Helvetica"><b>outputPackets</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">(unsigned int)<b>outputPackets</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Returns the total number of packets that have been transmitted by the computer since boot time.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td><font face="Helvetica"><b>performCommand:data:</b></font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td><img src="../../../../Images/c2D.gif" width=8 height=4> <font face="Times">(int)<b>performCommand:</b>(const char *)command <b>data:</b>(void *)data</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">This method performs arbitrary control operations; the character string <i>command</i> is used to select between these operations. Although you don't have to implement any operations, there are five standard operations. You can also define your own operations.</font>

<p><font face="Times">The standard commands are listed in the following table. The constant strings listed below are declared in the header file <b>net/netif.h</b> (under the <b>bsd</b> directory of <b>/NextDeveloper/Headers</b>).</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Helvetica"><b>Command</b></font></td>

<td><font face="Helvetica"><b>Operation</b></font></td></tr>

<tr valign=top>

<td width=124 height=4></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times">IFCONTROL_SETFLAGS</font></td>

<td><font face="Times">Request to have interface flags turned on or off. The <i>data</i> argument for this command is of type <b>union ifr_ifru</b> (which is declared in the header file <b>net/if.h</b>).</font></td></tr>

<tr valign=top>

<td width=124 height=9></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times">IFCONTROL_SETADDR</font></td>

<td><font face="Times">Set the address of the interface.</font></td></tr>

<tr valign=top>

<td width=124 height=9></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times">IFCONTROL_GETADDR</font></td>

<td><font face="Times">Get the address of the interface.</font></td></tr>

<tr valign=top>

<td width=124 height=9></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times">IFCONTROL_AUTOADDR</font></td>

<td><font face="Times">Automatically set the address of the interface.</font></td></tr>

<tr valign=top>

<td width=124 height=9></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times">IFCONTROL_UNIXIOCTL</font></td>

<td><font face="Times">Perform a UNIX <b>ioctl()</b> command. This is only for compatibility; <b>ioctl()</b> isn't a recommended interface for network drivers. The argument is of type <b>if_ioctl_t *</b>, where the <b>if_ioctl_t </b>structure contains the UNIX ioctl request (for example, SIOCSIFADDR) in the <b>ioctl_command</b> field and the ioctl data in the <b>ioctl_data</b> field.</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">An example of implementing <b>performCommand:data:</b> follows.</font></td></tr>

</table>

<p><img src="../../../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">- (int)performCommand:(const char *)command data:(void *)data</font><br>
<img src="../../../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">{</font><br>
<img src="../../../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1">int error = 0;</font>

<p><img src="../../../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1">if (strcmp(command, IFCONTROL_SETFLAGS) == 0)</font><br>
<img src="../../../../Images/sp.gif" width=180 height=1><font face="Courier" size="-1">/* do nothing */;</font><br>
<img src="../../../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1">else</font><br>
<img src="../../../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1">if (strcmp(command, IFCONTROL_GETADDR) == 0)</font><br>
<img src="../../../../Images/sp.gif" width=180 height=1><font face="Courier" size="-1">bcopy(&amp;my_address, data, sizeof (my_address));</font><br>
<img src="../../../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1">else</font><br>
<img src="../../../../Images/sp.gif" width=180 height=1><font face="Courier" size="-1">error = EINVAL;</font>

<p><img src="../../../../Images/sp.gif" width=152 height=1><font face="Courier" size="-1">return (error);</font><br>
<img src="../../../../Images/sp.gif" width=124 height=1><font face="Courier" size="-1">}</font>



<p><br>

</body>
</html>
