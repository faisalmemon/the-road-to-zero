<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<!-- Created with LatinByrd III -->
<!-- File: /Apps/NextDev/ReleaseNotes/3DKit.rtf -->
<!-- Date: Sun Jun 28 20:13:10 1998 -->
<head>
<title>3DKit</title>
</head>

<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" alink="#FF00FF" vlink="#FF0000">

<basefont size=3>

<p><font face="Times" size="-1">Release 3.3&nbsp; Copyright</font> <font size="-1">&copy;</font><font face="Times" size="-1">1995 by NeXT Computer, Inc.&nbsp; All Rights Reserved.</font>

<p><br><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td><font face="Times" size="+1">3.3 Release Notes:</font><br>
<font face="Times" size="+1">3D Graphics Kit</font>

<p><br><br><br>

<p><font face="Times">This file contains release notes for the 3.3 release of the 3D Graphics Kit.&nbsp; Release notes for 3.0 have been incorporated into the introduction of the printed and on-line Developer's Library (chapter 17 of <i>NEXTSTEP General Reference</i> or <b>/NextLibrary/Documentation/NextDev/GeneralRef/17_3DKit</b>).</font></td></tr>

</table>

<p><br><br>

<p><font face="Times" size="+1"><b>Notes Specific to Release 3.2</b></font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Times"><b>Platform-specific Differences</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td><font face="Times"><b>1.</b>&nbsp; The RenderMan software under NEXTSTEP does not recognize the token <b>int</b>.&nbsp; You have to use <b>integer</b>.&nbsp; <b>int</b> is not a valid RenderMan token, but it was allowed under some older implementations, and some versions of RenderMan running on other platforms.&nbsp; For example, RIB code like this:</font></td></tr>

</table>

<p><img src="../Images/sp.gif" width=90 height=1><font face="Courier" size="-1">Declare &#34;foo&#34; &#34;uniform int&#34;</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td><font face="Times">will produce this error message under NEXTSTEP:</font></td></tr>

</table>

<p><img src="../Images/sp.gif" width=90 height=1><font face="Courier" size="-1">Warning in context RMContext00001 in command RiDeclare: UnrecognizedToken:</font><br>
<img src="../Images/sp.gif" width=146 height=1><font face="Courier" size="-1">'type' == &#34;int&#34;</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td><font face="Times"><b>2.</b>&nbsp; The Phototreal RenderMan software running under NEXTSTEP does not initialize a default camera space in the same way as PhotoReal RenderMan version on other platforms.&nbsp; If you attempt to make any transformations outside of world space without a Projection command, you will get an error like this:</font></td></tr>

</table>

<p><img src="../Images/sp.gif" width=90 height=1><font face="Courier" size="-1">Warning in context RMContext00001 in command RiWorldBegin: OutOfRange:</font><br>
<img src="../Images/sp.gif" width=146 height=1><font face="Courier" size="-1">Non-identity world-to-screen transformation without projection call.</font><br>
<img src="../Images/sp.gif" width=90 height=1><font face="Courier" size="-1">Ill-defined camera space.</font>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Times"><b>Bugs Fixed in Release 3.2</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td><font face="Times">These bugs have been fixed in Release 3.2:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Reference</font></td>

<td><font face="Times">24246</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Problem</font></td>

<td><font face="Times"><b>RiLightSource()</b> generated invalid &quot;sequencenumbers&quot;</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Description</font></td>

<td><font face="Times">The sequence numbers emitted by <b>RiLightSource()</b> when in 3.1-compatibility mode weren't in the proper range.</font></td></tr>

<tr valign=top>

<td width=97 height=34></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Reference</font></td>

<td><font face="Times">31048</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Problem</font></td>

<td><font face="Times">Memory leak in RenderMan</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Description</font></td>

<td><font face="Times">There was a memory leak in the N3DShader object every time you used the <b>setShader:</b> method.</font></td></tr>

<tr valign=top>

<td width=97 height=34></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Reference</font></td>

<td><font face="Times">34628</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Problem</font></td>

<td><font face="Times">Incorrect shading on NeXTdimension</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Description</font></td>

<td><font face="Times">Solid shaded images on the NeXTdimension system were not correctly shaded--they were always shaded with a uniform color.</font></td></tr>

<tr valign=top>

<td width=97 height=34></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Reference</font></td>

<td><font face="Times">34741</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Problem</font></td>

<td><font face="Times">Resurrection of NaN problem [Tracker #25553]</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Description</font></td>

<td><font face="Times">With the default 3D graph shown in <b>/NextDeveloper/Examples/Appkit/Graph</b>, the equation is:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=198></td>

<td><font face="Times">A * (u^2 + v^2) + C</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=180></td>

<td><font face="Times">When changed to graph the square root of u, like this:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=198></td>

<td><font face="Times">A * (<i>u^.5</i> + v^2) + C</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=180></td>

<td><font face="Times">the equation results in a NaN when trying to evaluate the square root of </font><img src="../Images/c2D.gif" width=8 height=4><font face="Times">2.&nbsp; This would work in the &quot;wire&quot; plot mode, but changing to one of the solid shaded modes would hang the Window Server.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Reference</font></td>

<td><font face="Times">34852</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Problem</font></td>

<td><font face="Times">3DKit had classes with bad names</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Description</font></td>

<td><font face="Times">Some of the internal 3Dkit classes did not adhere to the NEXTSTEP naming convention of using a proper prefix or an underscore at the beginning of the name.</font></td></tr>

<tr valign=top>

<td width=97 height=34></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Reference</font></td>

<td><font face="Times">34897</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Problem</font></td>

<td><font face="Times">Crasher in <b>NSDestroyContext()</b> when exiting Backspace after using Teapot View</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Description</font></td>

<td><font face="Times">If you managed to break up your 3D window into more than 64 rectangles, the Window Server would crash and you would be logged out.</font></td></tr>

<tr valign=top>

<td width=97 height=34></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Reference</font></td>

<td><font face="Times">35181</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Problem</font></td>

<td><font face="Times">Polygons with normals drawn weren't rendered properly</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Description</font></td>

<td><font face="Times">If you had a polygon with normals declared for all the vertices, it made a nice lovely drawing when drawn with N3D_SmoothSolids.&nbsp; However, if you drew it with N3D_FacetedSolids, all the polygons were rendered with the same color.</font></td></tr>

<tr valign=top>

<td width=97 height=34></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Reference</font></td>

<td><font face="Times">35386</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Problem</font></td>

<td><font face="Times">N3DShader's <b>setShader:</b> method didn't check file format</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Description</font></td>

<td><font face="Times">If you have an ASCII file or a generic file that is not a shader and you invoke <b>setShader:</b> with that file's name as the argument; your application would crash.</font></td></tr>

<tr valign=top>

<td width=97 height=34></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Reference</font></td>

<td><font face="Times">35894</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Problem</font></td>

<td><font face="Times">zfile + <b>RiMakeShadow()</b> creates bad shadow texture on i386 architecture</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Description</font></td>

<td><font face="Times">When creating a shadow by first rendering a depth file and then using <b>RiMakeShadow()</b> to create a show map, the shadow map is unusable. This happens on the Intel i386 architecture only.&nbsp; Rendering directly to &quot;shadow&quot; texture is a workaround but limits the RIB file's portability.</font></td></tr>

<tr valign=top>

<td width=97 height=34></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Reference</font></td>

<td><font face="Times">36516</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Problem</font></td>

<td><font face="Times">Using light sources in a certain way caused logout on a NeXTdimension system</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Description</font></td>

<td><font face="Times">On a NeXTdimension system, if you declared a light source outside of a world block (that is, before <b>RiWorldBegin()</b>), you would get logged out. All other architectures properly reported an error back to the client.</font></td></tr>

</table>

<p><br><br>

<p><font face="Times" size="+1"><b>Notes Specific to Release 3.1</b></font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Times"><b>Bugs Fixed in Release 3.1</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td><font face="Times">These bugs have been fixed in Release 3.1:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Reference</font></td>

<td><font face="Times">21211</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Problem</font></td>

<td><font face="Times"><b>.tx</b> and <b>.slo</b> files should have an icon</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Description</font></td>

<td><font face="Times">In release 3.0, neither <b>.tx</b> (texture) or <b>.slo</b> (shading language object) files have icons.</font></td></tr>

<tr valign=top>

<td width=97 height=34></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Reference</font></td>

<td><font face="Times">25374</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Problem</font></td>

<td><font face="Times">Compiler incompatibility in the <b>ri/ri.h</b> header file</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Description</font></td>

<td><font face="Times">There is an ambiguous function declaration in the <b>ri/ri.h</b> header file that causes the C++ compiler to crash.&nbsp; A workaround for 3.0 required editing the header file <b>ri/ri.h</b>.&nbsp; For Release 3.1, the edit is incorporated into the header file.</font></td></tr>

<tr valign=top>

<td width=97 height=34></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Reference</font></td>

<td><font face="Times">29630</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Problem</font></td>

<td><font face="Times">NXImages don't work with <b>loadFromFile:</b> on RIB files</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Description</font></td>

<td><font face="Times">A bug in N3DRIBImageRep's <b>canLoadFromStream:</b> method caused it to fail to return YES for the appropriate file types.</font></td></tr>

<tr valign=top>

<td width=97 height=34></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Reference</font></td>

<td><font face="Times">29471</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Problem</font></td>

<td><font face="Times">QuickRenderMan crashes the Window Server if an application has two N3DCameras, one with lights, one without.</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Description</font></td>

<td><font face="Times">In Release 3.0, there is an internal pointer to the light lists in the shading mechanism that's not properly synched with the real light list. You can get this problem when you have at least 2 N3DCameras, one with lights and one without.&nbsp; If you render the lighted one first, then the non-lighted one, you will get this crash.</font></td></tr>

<tr valign=top>

<td width=97 height=34></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Reference</font></td>

<td><font face="Times">29981</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Problem</font></td>

<td><font face="Times"><b>nupatch</b> and big polygons can crash the Window Server.</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Description</font></td>

<td><font face="Times">If you send a <b>nupatch</b> of almost any size, or a polygon with more than about 100 vertices, you will crash the Window Server.</font></td></tr>

<tr valign=top>

<td width=97 height=34></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Reference</font></td>

<td><font face="Times">29984</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Problem</font></td>

<td><font face="Times">Intermittent DPS client errors from 3D programs</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Description</font></td>

<td><font face="Times">Every so often, you will get &quot;DPS client library error: Invalid port, DPSContext 0, data 29&quot; and your application will not work properly; sometimes it will just hang.&nbsp; Usually the only way to get going again is to quit the application.&nbsp; In release 3.1, the N3DCamera <b>flushRib </b>method is revised to prevent this bug.</font></td></tr>

<tr valign=top>

<td width=97 height=34></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Reference</font></td>

<td><font face="Times">30793</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Problem</font></td>

<td><font face="Times">TrimCurve divide-by-zero problem causes photoreal renderer segmentation fault.</font></td></tr>

<tr valign=top>

<td width=97 height=10></td></tr>

<tr valign=top>

<td width=97></td>

<td nowrap><font face="Helvetica" size="-2">Description</font></td>

<td><font face="Times">The photoreal renderer may produce TrimCurve segmentation faults, caused by a divide-by-zero problem in the TrimCurve routine.&nbsp; This bug affects N3DCamera's <b>renderAsTIFF</b> and <b>renderAsEPS </b>methods.</font></td></tr>

</table>



<p><br><br><br><br>

</body>
</html>
