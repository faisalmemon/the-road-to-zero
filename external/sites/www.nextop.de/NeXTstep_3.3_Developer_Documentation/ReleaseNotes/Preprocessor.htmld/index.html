<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<!-- Created with LatinByrd III -->
<!-- File: /Apps/NextDev/ReleaseNotes/Preprocessor.rtf -->
<!-- Date: Sun Jun 28 20:13:56 1998 -->
<head>
<title>Preprocessor</title>
</head>

<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" alink="#FF00FF" vlink="#FF0000">

<basefont size=3>

<p><font face="Times" size="-1">Release 3.3&nbsp; Copyright</font> <font size="-1">&copy;</font><font face="Times" size="-1">1995 by NeXT Computer, Inc.&nbsp; All Rights Reserved.</font>

<p><br><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td><font face="Times" size="+1">3.3 Release Notes:</font><br>
<font face="Times" size="+1">C Preprocessor</font>

<p><br><br>

<p><font face="Times">A new implementation of the C Preprocessor, <b>/lib/cpp-precomp</b>, was introduced in the 3.0 release to support precompiled headers. It is invoked by <b>cc</b>(1) whenever the output will be fed to the C or Objective-C compiler. There were no changes for Release 3.3.</font></td></tr>

</table>

<p><br><br>

<p><font face="Times" size="+1"><b>Notes Specific to Release 3.2</b></font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Times"><b>New Features</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td><font face="Times">The following new features have been added to the preprocessor since Release 3.1.</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times"><img src="../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times"><b>Support for RTF&nbsp; source code.</b>&nbsp; Both cpp and cpp-precomp now strip RTF, if present, from files passed to cpp (and thus cc).&nbsp; The RTF information (for example, fonts, colors, help links and markers, underlining, etc.) is stripped and only the ASCII information is left for normal preprocessing.&nbsp;&nbsp; This means that any part of source code can be made rich.</font></td></tr>

<tr valign=top>

<td width=72 height=17></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap></td>

<td><font face="Times">Additional information about using Edit to create and edit rich source code can be found in the <b>Edit.rtf</b> release note.&nbsp; However, tools like <b>grep</b> and <b>sed</b> may produce spurious results on RTF code (although the ProjectBuilder &quot;Finder&quot; mode can be used to search for text strings in both rich and non-rich source code).</font></td></tr>

<tr valign=top>

<td width=72 height=17></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times"><img src="../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times"><b>Automatic byte-swapping of precompiled headers.</b>&nbsp; In 3.1, by use of the <b>-arch</b> flags, precompiled headers could be generated for use during native compilation, cross compilation, and compilation for multiple architectures.&nbsp; However, precompiled headers generated on one architecture were often not usable during compilation on a host of a different architecture.&nbsp; This was a byte-swapping issue, which is handled in 3.2 by on-demand byte-swapping of precomps before checking and using them.&nbsp; Note that there is an approximate 20% slow-down in the usage of a precomp due to the time necessary to do this byte-swapping.&nbsp; Therefore, you should always attempt to build your precomps on the host architecture on which you will be doing the majority of your compilations.</font></td></tr>

</table>

<p><font face="Times" size="+1"><b>Notes Specific to Release 3.1</b></font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td><font face="Times">Three distinct changes have been made regarding cpp-precomp for release 3.1:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times"><img src="../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">The standard GNU C preprocessor,&nbsp; <b>/lib/cpp</b>, is <i>no longer used</i> when <b>cc</b> is invoked with the <b>-E</b> option; <b>cc -E</b> always produces exactly what the compiler would see.&nbsp; Note that this may be problematic when invoking <b>cc -E</b> (as opposed to <b>/lib/cpp</b>) on something other than source code (for example, a Makefile).&nbsp; In this case, the <b>-traditional-cpp </b>option, described below, should also be passed.</font></td></tr>

<tr valign=top>

<td width=72 height=18></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times"><img src="../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">The <b>-Wprecomp</b> option has now become the default, but only causes warnings in the rare cases when a precompiled header (or precomp) can not be used.&nbsp; The <b>-Wno-precomp</b> option can be used to suppress these warning messages if desired.</font></td></tr>

<tr valign=top>

<td width=72 height=18></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times"><img src="../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">The default search path for cpp-precomp has been brought into line with the default search path for cpp.&nbsp; Most notably, this removes <b>/usr/local/include/</b> from the standard search path.&nbsp; Developers are encouraged to place local, shared headers in <b>/LocalDeveloper/Headers/</b> instead.&nbsp; As of release 3.1, the default search path for cpp-precomp is now:</font></td></tr>

</table>

<p><img src="../Images/sp.gif" width=124 height=1><font face="Times">/NextDeveloper/Headers</font><br>
<img src="../Images/sp.gif" width=124 height=1><font face="Times">/NextDeveloper/Headers/ansi</font><br>
<img src="../Images/sp.gif" width=124 height=1><font face="Times">/NextDeveloper/Headers/bsd</font><br>
<img src="../Images/sp.gif" width=124 height=1><font face="Times">/LocalDeveloper/Headers</font><br>
<img src="../Images/sp.gif" width=124 height=1><font face="Times">/LocalDeveloper/Headers/ansi</font><br>
<img src="../Images/sp.gif" width=124 height=1><font face="Times">/LocalDeveloper/Headers/bsd</font><br>
<img src="../Images/sp.gif" width=124 height=1><font face="Times">/NextDeveloper/2.0CompatibleHeaders</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=78></td>

<td><font face="Times">By adding <b>-I/usr/local/include</b> to the cc(1) command line, headers that were previously included from that directory can again be used in this release.</font></td></tr>

</table>

<p><font face="Times" size="+1"><b>Notes Specific to Release 3.0</b></font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Times"><b>Precompiled Headers</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td><font face="Times">Precompiled headers improve compile time and reduce symbol table size.&nbsp; A separate file, <b>PrecompiledHeaders.rtf</b>, describes how to install and use them.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Times"><b>Switches</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td><font face="Times">The new preprocessor supports the following new switches.</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times"><b>-precomp</b></font></td>

<td><font face="Times">Produce a precompiled header.</font></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times"><b>-no-precomp</b></font></td>

<td><font face="Times">Do not use precompiled headers.</font></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times"><b>-traditional-cpp</b></font></td>

<td><font face="Times">Use the standard GNU preprocessor instead of cpp-precomp, causing precompiled headers to be ignored.</font></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times"><b>-Wno-precomp</b></font></td>

<td><font face="Times">Do not give warnings when precompiled headers are found unusable (by default, such warnings are given).</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Times"><b>Known Problems</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td><font face="Times">The new preprocessor does not yet support the following switches.</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times"><b>-fno-asm</b></font></td>

<td><font face="Times">Do not recognize <b>asm</b>, <b>inline</b>, or <b>typeof</b> keywords (note that <b>-ansi</b> also implies <b>-fno-asm</b>).</font></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times"><b>-pedantic</b></font></td>

<td><font face="Times">Issue warnings required by the ANSI C standard.</font></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times"><b>-T</b></font></td>

<td><font face="Times">Process ANSI standard trigraph sequences.</font></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times"><b>-d</b></font></td>

<td><font face="Times">Produce a list of #define commands.</font></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times"><b>-P</b></font></td>

<td><font face="Times">Inhibit generation of # lines.</font></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times"><b>-H</b></font></td>

<td><font face="Times">Print the name of each header file used.</font></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times"><b>-dM</b></font></td>

<td><font face="Times">Output only a list of macro definitions that are in effect at the end of processing.</font></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times"><b>-dD</b></font></td>

<td><font face="Times">Pass all macro definitions into the output.</font></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times"><b>-dN</b></font></td>

<td><font face="Times">Like <b>-dD</b>, except macro arguments and contents are omitted.</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td><font face="Times">Use of the above switches must be accompanied by the <b>-traditional-cpp</b> switch.</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Times"><b>Other Changes</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td><font face="Times">The output of the new preprocessor sometimes has token spacing (within a line) that is different than the GNU preprocessor. This conforms to the ANSI standard and should be transparent to users of <b>cc</b>.</font></td></tr>

</table>



<p>

</body>
</html>
