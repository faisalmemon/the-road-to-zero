<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<!-- Created with LatinByrd III -->
<!-- File: /Apps/NextDev/Summaries/16_Sound/DriverFunctionSummary.rtf -->
<!-- Date: Sun Jun 28 20:19:05 1998 -->
<head>
<title>DriverFunctionSummary</title>
</head>

<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" alink="#FF00FF" vlink="#FF0000">

<basefont size=3>

<p><font face="Times" size="-1">Copyright</font> <font size="-1">&copy;</font><font face="Times" size="-1">1995 by NeXT Computer, Inc.&nbsp; All Rights Reserved.</font>

<p><br><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>Driver Functions</b></font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=69></td>

<td><font face="Helvetica" size="+1"><b>DSP Functions</b></font>

<p><br><br>

<p><font face="Helvetica"><b>Start the DSP</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_dsp_boot(</b>port_t <i>commandPort</i>, int *<i>bootImage</i>, int <i>imageSize</i>, int <i>priority</i><b>)</b></font></td></tr>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_dsp_reset(</b>port_t <i>commandPort</i>, int <i>priority</i><b>)</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=69></td>

<td><font face="Helvetica"><b>Transfer data to and from the DSP via DMA</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_dsp_dma_write(</b>port_t <i>commandPort</i>, int <i>elementCount</i>, int <i>dataFormat</i>, pointer_t <i>data</i><b>)</b></font></td></tr>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_dsp_dma_read(</b>port_t <i>commandPort</i>, int <i>elementCount</i>, int <i>dataFormat</i>, pointer_t <i>data</i><b>)</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=69></td>

<td><font face="Helvetica"><b>Enqueue a DSP command</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_dsp_host_cmd(</b>port_t <i>commandPort</i>, u_int <i>hostCommand</i>, u_int <i>priority</i><b>)</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=69></td>

<td><font face="Helvetica"><b>Set the sound driver's protocol vis-a-vis the DSP</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t <b>s</b></font></td>

<td><font face="Times"><b>nddriver_dsp_protocol(</b>port_t <i>devicePort</i>, port_t <i>ownerPort</i>, int <i>protocol</i><b>)</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=69></td>

<td><font face="Helvetica"><b>Set the DSP host flags</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_dsp_set_flags(</b>port_t <i>commandPort</i>, u_int <i>flagMask</i>,u_int <i>flagValue</i>, u_int <i>priority</i><b>)</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=69></td>

<td><font face="Helvetica"><b>Transfer data to and from the DSP</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_dsp_write(</b>port_t <i>commandPort</i>, void *<i>buffer</i>, int <i>elementCount</i>, int <i>elementSize</i>, int <i>priority</i><b>)</b></font></td></tr>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_dsp_read(</b>port_t <i>commandPort</i>, void *<i>buffer</i>, int <i>elementCount</i>, int <i>elementSize</i>, int <i>priority</i><b>)</b></font></td></tr>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_dsp_read_messages(</b>port_t <i>commandPort</i>, void *<i>buffer</i>, int <i>elementCount</i>, int <i>elementSize</i>, int <i>priority</i><b>)</b></font></td></tr>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_dsp_read_data(</b>port_t <i>commandPort</i>, void **<i>buffer</i>, int <i>elementCount</i>, int <i>elementSize</i>, int <i>priority</i><b>)</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=69></td>

<td><font face="Helvetica"><b>Request a DSP host interface register condition</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_dspcmd_req_condition(</b>port_t <i>commandPort</i>, u_int <i>registerMask</i>, u_int <i>conditionFlags</i>, int <i>priority</i>, port<b>_</b>t <i>replyPort</i><b>)</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=69></td>

<td><font face="Helvetica"><b>Request the contents of the DSP-reply buffers</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_dspcmd_req_msg(</b>port_t <i>commandPort</i>, port_t <i>replyPort</i><b>)</b></font></td></tr>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_dspcmd_req_err(</b>port_t <i>commandPort</i>, port_t <i>replyPort</i><b>)</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=69></td>

<td><font face="Helvetica"><b>Get the DSP command port</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_get_dsp_cmd_port(</b>port_t <i>devicePort</i>, port_t <i>ownerPort</i>, port_t *<i>commandPort</i><b>)</b></font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=69></td>

<td><font face="Helvetica" size="+1"><b>Driver Setup and Access</b></font>

<p><br><br>

<p><font face="Helvetica"><b>Acquire ownership of sound resources</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_set_dsp_owner_port(</b>port_t <i>devicePort</i>, port_t <i>ownerPort</i>, port_t *<i>negotiationPort</i><b>)</b></font></td></tr>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_set_sndin_owner_port(</b>port_t <i>devicePort</i>, port_t <i>ownerPort</i>, port_t *<i>negotiationPort</i><b>)</b></font></td></tr>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_set_sndout_owner_port(</b>port_t <i>devicePort</i>, port_t <i>ownerPort</i>, port_t *<i>negotiationPort</i><b>)</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=69></td>

<td><font face="Helvetica"><b>Reallocate the sound driver device port</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_new_device_port(</b>port_t <i>devicePort</i>, port_t <i>superuserPort</i>, port_t *<i>newDevicePort</i><b>)</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=69></td>

<td><font face="Helvetica"><b>Respond to asynchronous sound driver messages</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_reply_handler(</b>msg_header_t *<i>reply</i>, snddriver_handlers_t *<i>handlers</i><b>)</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=69></td>

<td><font face="Helvetica"><b>Set and get sound playback attributes</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_set_device_parms(</b>port_t <i>devicePort</i>, boolean_t <i>speakerOn</i>, boolean_t <i>filterOn</i>, boolean_t <i>zerofill</i><b>)</b></font></td></tr>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_get_device_parms(</b>port_t <i>devicePort</i>, boolean_t *<i>speakerOn</i>, boolean_t *<i>filterOn</i>, boolean_t *<i>zerofill</i><b>)</b></font></td></tr>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_set_volume(</b>port_t <i>devicePort</i>, int <i>leftVolume</i>, int <i>rightVolume</i><b>)</b></font></td></tr>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_get_volume(</b>port_t <i>devicePort</i>, int *<i>leftVolume</i>, int *<i>rightVolume</i><b>)</b></font></td></tr>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_set_ramp(</b>port_t <i>devicePort</i>, int <i>rampOn</i><b>)</b></font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=69></td>

<td><font face="Helvetica" size="+1"><b>Stream Setup and Access</b></font>

<p><br><br>

<p><font face="Helvetica"><b>Configure stream transfer buffers</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_set_sndout_bufcount(</b>port_t <i>devicePort</i>, port_t <i>sndoutPort</i>, int <i>count</i><b>)</b></font></td></tr>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_set_sndout_bufsize(</b>port_t <i>devicePort</i>, port_t <i>sndoutPort</i>, int <i>size</i><b>)</b></font></td></tr>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_stream_ndma(</b>port_t <i>streamPort</i>, int <i>regionTag</i>, int <i>count</i><b>)</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=69></td>

<td><font face="Helvetica"><b>Control and query a stream</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_stream_control(</b>port_t <i>streamPort</i>, int <i>regionTag</i>, int <i>control</i><b>)</b></font></td></tr>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_stream_nsamples(</b>port_t <i>streamPort</i>, int *<i>byteCount</i><b>)</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=69></td>

<td><font face="Helvetica"><b>Configure a sound stream</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_stream_setup(</b>port_t <i>devicePort</i>, port_t <i>ownerPort</i>, int <i>dataPath</i>, int <i>sampleCount</i>, int <i>sampleSize</i>, int <i>lowWater</i>, int <i>highWater</i>, int *<i>protocol</i>, port_t *<i>streamPort</i><b>)</b></font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=69></td>

<td><font face="Helvetica"><b>Send data to and retrieve data fom a stream</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_stream_start_writing(</b>port_t <i>streamPort</i>, void *<i>data</i>, int <i>sampleCount</i>, int <i>regionTag</i>, boolean_t <i>preempt</i>, boolean_t <i>deallocateWhenDone</i>, boolean_t <i>msgStarted</i>, boolean_t <i>msgCompleted</i>, boolean_t <i>msgAborted</i>, boolean_t <i>msgPaused</i>, boolean_t <i>msgResumed</i>, boolean_t <i>msgUnderrun</i>, port_t <i>replyPort</i><b>)</b></font></td></tr>

<tr valign=top>

<td width=86></td>

<td nowrap><font face="Times">kern_return_t</font></td>

<td><font face="Times"><b>snddriver_stream_start_reading(</b>port_t <i>streamPort</i>, char *<i>filename</i>, int <i>sampleCount</i>, int <i>regionTag</i>, boolean_t <i>msgStarted</i>, boolean_t <i>msgCompleted</i>, boolean_t <i>msgAborted</i>, boolean_t <i>msgPaused</i>, boolean_t <i>msgResumed</i>, boolean_t <i>msgOverrun</i>, port_t <i>replyPort</i><b>)</b></font></td></tr>

</table>



</body>
</html>
