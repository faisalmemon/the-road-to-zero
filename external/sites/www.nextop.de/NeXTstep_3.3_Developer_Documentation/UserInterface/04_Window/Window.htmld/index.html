<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<!-- Created with LatinByrd III -->
<!-- File: /Apps/NextDev/UserInterface/04_Window/Window.rtfd -->
<!-- Date: Sun Jun 28 20:22:13 1998 -->
<head>
<title>Window</title>
</head>

<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" alink="#FF00FF" vlink="#FF0000">

<basefont size=3>

<p><font face="Times" size="-1">Release 3.3 Copyright</font> <font size="-1">&copy;</font><font face="Times" size="-1">1995 by NeXT Computer, Inc.&nbsp; All Rights Reserved.</font>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+3" color="#FF00FF"><b>4</b></font></td></tr>

</table>

<p><br><br>

<p><font face="Times" size="+3"><i>The Window Interface to Applications</i></font>

<p><br><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">The NEXTSTEP user interface is window-based.&nbsp; Each window is placed on the screen by a particular application, and each application typically owns a variety of different windows.&nbsp; The screen shown below has several kinds of windows belonging to several applications.</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F1.gif" width=428 height=292></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">This chapter discusses windows in general--standard windows, panels, menus, pop-up and pull-down lists, miniwindows, and application icons--before going on to discuss standard windows in particular.&nbsp; For more information on panels and menus, see Chapter 5, &quot;Panels,&quot; and Chapter 6, &quot;Menus,&quot; respectively.&nbsp; For more information on pop-up and pull-down lists, see Chapter 7, &quot;Controls.&quot;&nbsp; Miniwindows and application icons are described in Chapter 1, &quot;A Visual Guide to the User Interface.&quot;</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>How Windows Work</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Every window has a content area, where the application is free to draw (although the Application Kit draws default miniwindows and application icons for you).&nbsp; Standard windows, panels, and menus also have a title bar above the content area, and a border surrounding both the content area and title bar.</font>

<p><font face="Times">The title bar is the center of control for the window.&nbsp; It holds the window's title, if it has one, and may contain buttons that can be used to dismiss it from the screen.&nbsp; If a window has a title bar, users move the window by dragging it by its title bar.</font>

<p><font face="Times">Panels and standard windows can also have a resize bar at the bottom, below the content area but within the border.&nbsp; By dragging any of the regions of the resize bar, the user can alter the size and shape of the window.&nbsp; The resize bar is the only window control located outside the title bar.</font>

<p><font face="Times">The parts of a window are illustrated below.</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F5.gif" width=275 height=168></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica" size="+1"><b>Window Order</b></font>

<p><font face="Times">Windows on-screen are ordered from front to back.&nbsp; Like sheets of paper loosely stacked together, windows in front can overlap, or even completely cover, those behind them.&nbsp; Each window has a unique position in the order.&nbsp; When two windows are placed side-by-side, one is still technically in front of the other.</font>

<p><font face="Times">If any window could be in front of any other window, then small but important windows--like menus and docked icons--might get lost behind larger ones.&nbsp; Windows that require user action, like attention panels and pop-up lists, might disappear behind another window and go unnoticed.&nbsp; To prevent this, all the windows on-screen are organized into <i>tiers</i>.</font>

<p><font face="Times">When two windows belong to the same tier, either one can be in front.&nbsp; When two windows belong to different tiers, however, the one in the higher tier will always be above the other.&nbsp; on-screen windows are divided into these seven tiers:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">Windows that appear in a spring-loaded mode--pop-up lists, pull-down lists, and menus that come to the cursor--are assigned the frontmost tier.&nbsp; (Having menus come to the cursor is an option that the user can enable with the Preferences application.&nbsp; It's described in &quot;Bringing the Main Menu to the Cursor&quot; in Chapter 6.)&nbsp; Spring-loaded windows remain on-screen only while the user holds a mouse button down, so they only momentarily obscure other windows.&nbsp; Putting them in the first tier guarantees that they won't appear in back of another window.</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">Attention panels are assigned to the second tier.&nbsp; Like spring-loaded windows, they're only temporarily on-screen.&nbsp; But unlike spring-loaded windows, the user must do something to dismiss them, rather than continue an action to keep them visible.&nbsp; Keeping an attention panel in front, where it can't be covered by other windows, confronts the user with it until it's dismissed and thus encourages prompt user action.</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">The main menu is assigned the next tier back.&nbsp; In the absence of an attention panel or spring-loaded window, the usual case, it's the frontmost window on-screen.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="../../Images/EPS9.gif" width=688 height=33></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=132></td>

<td><font face="Helvetica"><b>Writing Note:&nbsp; The Meaning of <i>Window</i></b></font>

<p><font face="Helvetica" size="-1">In documentation for users, the term <i>window</i> generally refers only to standard windows, though panels and menus are acknowledged to be windows of a special type.&nbsp; Miniwindows, lists, and icons are referred to only by their specific names; they should not be included within the generic term <i>window</i> as this would imply common behavior that's lacking.</font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="../../Images/EPS9.gif" width=688 height=33></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">Other menus are assigned to a tier just below the main menu.&nbsp; They can cover each other, but not the main menu.</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">Docked application icons occupy the fifth tier.&nbsp; They can be covered by lists, attention panels, and menus, but not by the ordinary windows of your application.</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">Floating panels are in the sixth tier.&nbsp; Floating panels are defined and discussed in Chapter 5.</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">All other windows are grouped in the seventh--the last and largest--tier.&nbsp; Most of the windows seen on-screen are in this tier.&nbsp; They can cover each other, but can't come in front of the dock, menus, attention panels, or spring-loaded windows.</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">This seven-tier system keeps attention panels, menus, and docked application icons in view, and thus readily available to the user; it prevents them from being inadvertently lost in a large pile of windows.&nbsp; Although attention panels, menus, and docked application icons can cover other windows, the user can get them out of the way when needed.&nbsp; Menus can be moved to the side or closed, and the dock can be slid mostly off-screen.&nbsp; Attention panels should be attended to and dismissed.</font>

<p><font face="Times">To get the user's attention, when a window is first placed on-screen it comes up at the front of its tier.</font>

<p><font face="Helvetica"><b>Note:</b></font>&nbsp; <font face="Times">Even when a window is totally obscured by other windows, it's still considered to be on-screen; it retains its ranking in the order and can be exposed by moving the windows in front to the side.</font>

<p><br><br><br>

<p><font face="Helvetica" size="+1"><b>Window Behavior</b></font>

<p><font face="Times">Windows respond to user actions in the following ways:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">Any window can be brought to the front of the screen, relative to other windows in its tier.</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">Any window with a title bar can be moved to a new location on the screen, as can any miniwindow or application icon.</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">Any window with a resize bar can be resized.</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">A window with the appropriate buttons in its title bar can be closed or miniaturized.</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">A window's title bar can display two buttons:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times">Miniaturize button</font></td>

<td><font face="Times">Clicking this replaces the window with its miniwindow counterpart.&nbsp; The miniwindow represents the window on-screen and gives the user access to it.&nbsp; Double-clicking the miniwindow causes it to disappear and the window that was miniaturized to reappear.</font></td></tr>

<tr valign=top>

<td width=124 height=12></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times">Close button</font></td>

<td><font face="Times">Clicking this removes the window from the screen.</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">When the user clicks a button in the title bar, the action of the button is performed.&nbsp; The click doesn't count as &quot;clicking in a window&quot; for the purpose of bringing the window to the front, making it the key window, or activating an application (the key window and active application are discussed in &quot;Application and Window Status&quot; in this chapter).</font>

<p><font face="Times">Title bar buttons are illustrated below.&nbsp; The window in front has both buttons as they normally appear.&nbsp; The miniaturize button is on the left and the close button is on the right.&nbsp; The window in back shows a <i>broken</i> close button.&nbsp; The close button should be broken when the user would lose work by closing the window--for example, when the window displays a document that the user has edited but not saved.&nbsp; More information on the miniaturize and close buttons is in &quot;Implementing Windows&quot; in this chapter.</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F3.gif" width=417 height=99></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica" size="+1"><b>Reordering</b></font>

<p><font face="Times">Clicking in a window brings it to the front of its tier, provided that the click isn't in a title bar button.&nbsp; The window is reordered immediately as the mouse button is pressed.&nbsp; If the user is dragging the window to a new location, this lets the window assume its reordered position before being moved.</font>

<p><font face="Times">Another way the user can reorder windows is to press the Command key while pressing the up-arrow or down-arrow key. Command-up arrow moves the backmost panel (if it's in the lowest tier) or standard window to the front of the tier. Command-down arrow moves the frontmost one to the back.</font>

<p><br><br>

<p><font face="Helvetica" size="+1"><b>Moving</b></font>

<p><font face="Times">The user can drag any window by its title bar (if it has one).&nbsp; The action of pressing and releasing the mouse button to drag the window also counts as a click and brings the window to the front of its tier.</font>

<p><br><br>

<p><font face="Helvetica" size="+1"><b>Resizing</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F2.gif" width=557 height=508></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">If a window has a resize bar, the user can change the size of the window by dragging the resize bar.&nbsp; An outline of the window edge follows the cursor, as shown in the figure above.&nbsp; When the user releases the mouse button, the window resizes to the outline.</font>

<p><br><br>

<p><font face="Helvetica" size="+1"><b>Closing</b></font>

<p><font face="Times">The close button removes a window from the screen.&nbsp; What this means depends on the type of window:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times">Menus and panels</font></td>

<td><font face="Times">A menu that's closed is removed from the screen, but the user retains a way to retrieve it quickly through a command in another menu.&nbsp; Panels that are closed are retrievable in the same way. (See Chapter 6 for more information on menus.)</font></td></tr>

<tr valign=top>

<td width=124 height=12></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap></td>

<td><font face="Times">When a panel that was closed is returned to the screen, it assumes its former size and location, and it retains its former state.&nbsp; From the user's point of view, and programmatically, it's the same panel that was closed.</font></td></tr>

<tr valign=top>

<td width=124 height=12></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times">Standard windows</font></td>

<td><font face="Times">Closing a standard window usually removes it from the application as well as from the screen. From the user's point of view, the same window can't necessarily be made visible again.&nbsp; The application might create a new window with the same title and a similar display, but there might be differences.&nbsp; The selection might not be preserved, and the new window won't necessarily be located in the same place or have the same shape as the old one, especially if the user had moved or resized the window that was closed.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="../../Images/EPS9.gif" width=688 height=33></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=132></td>

<td><font face="Helvetica"><b>Programming Note:&nbsp; Windows and the Application Kit</b></font>

<p><font face="Helvetica" size="-1">Everything that this section, &quot;How Windows Work,&quot; discusses is automatically handled by the Application Kit Window class and its subclasses.&nbsp; For example, when the user closes the key window, a new one is automatically chosen.&nbsp; The few decisions you must make are discussed later under &quot;Implementing Windows.&quot;</font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="../../Images/EPS9.gif" width=688 height=33></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica" size="+1"><b>Miniaturizing</b></font>

<p><font face="Times">Miniaturizing a window removes it from the screen without destroying it or its contents.&nbsp; From the user's point of view, the window is transformed into a miniwindow.&nbsp; Double-clicking the miniwindow reverses the miniaturization.</font>

<p><font face="Times">Most standard windows and some panels have a miniaturize button.&nbsp; Windows that have a miniaturize button can be miniaturized using either the button or the standard Miniaturize Window menu command.&nbsp; A group of windows representing a single document can be miniaturized into a single miniwindow, as described under &quot;The Document Menu&quot; in Chapter 6.</font>

<p><font face="Times">Users can't work in a miniaturized window, but programs can continue to alter the window's display.&nbsp; For example, if you begin compiling a program in a Terminal window, and then miniaturize the window, you'll see any error messages written by the compiler when you return the window to the screen.</font>

<p><font face="Times">Miniaturizing differs from closing in a number of ways:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">Miniaturizing preserves the window as it was last seen on-screen.&nbsp; A window that's closed can't necessarily be retrieved in the same state.</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">Miniaturizing a window leaves behind a miniwindow so that it can be brought back to the screen.&nbsp; Closing a window doesn't provide the user with a way of getting it back.</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">Miniaturizing a window that displays a file won't close the file or change the way it's displayed.&nbsp; Closing a window usually closes the file it displays.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica" size="+1"><b>Hiding and Retrieving Windows</b></font>

<p><font face="Times">The Hide menu command lets the user clear the screen of all the windows belonging to an application.&nbsp; This opens up the workspace so that it's easier to work in another application.</font>

<p><font face="Times">When an application is hidden, only its application icon remains on-screen.&nbsp; When the user double-clicks the icon, the hidden windows reappear on-screen.&nbsp; Users can resume working in the application, picking up again at exactly the point where they left off.</font>

<p><font face="Times">Double-clicking an application icon has one other effect:&nbsp; It activates the application (as discussed in the next section), and so may cause the menus and panels of another application to disappear, while those of the newly activated application reappear.</font>

<p><font face="Times">Double-clicking the icon for a running application activates it and brings its windows to the front, even if the application wasn't hidden.&nbsp; (The user can also bring covered windows forward using commands in the Windows menu, as described in Chapter 6.) The application's menus also return to the screen.</font>

<p><font face="Times">If the user holds down the Command key while double-clicking an application icon, the application is activated as usual, but in addition all other applications are hidden.</font>

<p><font face="Helvetica"><b>Note:</b></font>&nbsp; <font face="Times">A window that's completely obscured by other windows is &quot;covered,&quot; but not &quot;hidden&quot; in the sense used here.&nbsp; A covered window can be made visible by moving the windows in front of it to the side.&nbsp; A hidden window can't be--it's completely removed from the workspace.</font>

<p><br><br><br>

<p><font face="Helvetica" size="+1"><b>Application and Window Status</b></font>

<p><font face="Times">Since more than one application can run at a time, the screen is likely to display windows for a variety of different applications. The Workspace Manager is one application that will often have a window on-screen.&nbsp; Some users will also run Mail and a spreadsheet, or perhaps a word processor and Digital Webster</font><font size="-2"><sup><sup>TM</sup></sup></font><font face="Times">(a dictionary and thesaurus application), at the same time as other applications.</font>

<p><font face="Times">The user must be able to pick a particular application, and a particular window in that application, to work in.&nbsp; The application that the user is currently working in is known as the <i>active application</i>; the windows that are the current focus of user attention in the active application are the <i>key window</i> and the <i>main window</i>.&nbsp; The key window and main window are usually one and the same.&nbsp; The two terms identify different functional roles that can be assumed by the same window:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">The key window is the window that receives characters from the keyboard.</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">The main window is the window containing the selected target for controls.</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">These three concepts--the active application, key window, and main window--refer not to inherent properties of applications and windows, but to their status at a particular point in time.&nbsp; They're discussed more fully in the three sections that follow.</font>

<p><br><br>

<p><font face="Helvetica" size="+1"><b>The Active Application</b></font>

<p><font face="Times">Out of all running applications, at most one is selected to be the active application (the principal application the user is working in).&nbsp; An application must be activated--made to be the active application--before the user can type in its windows or use its menus.</font>

<p><font face="Times">The active application differs from other running applications in four ways:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">It's the only application with visible menus.&nbsp; When an application is deactivated, its menus are hidden from view.&nbsp; When it's reactivated, they're restored to the screen.</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">It's the application that owns most, if not all, of the panels that are visible on-screen.&nbsp; In general, panels behave like menus: They hide when the application isn't active and return to the screen when the application is reactivated.&nbsp; In exceptional cases, however, you may choose to leave a panel on-screen even when the application isn't active.&nbsp; (See Chapter 5 for guidelines on when it's appropriate to allow a panel to persist.)</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">It's the application that receives the user's keyboard actions.&nbsp; Typing and keyboard alternatives can affect only the active application.&nbsp; When there's no active application, the user's keystrokes have no effect.</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">It's the application that contains the key window and main window (if there is a current key window or main window), and its windows are likely to be in front of the windows of other applications.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Application Activation</b></font>

<p><font face="Times">In general, the task of selecting the active application is left to the user.&nbsp; With one exception, an application never becomes active unless the user does something to activate it.&nbsp; The user's action can be direct, such as starting up the application or clicking in one of its windows, or indirect, such as having one application send a message to another application.</font>

<p><font face="Times">The exception is that when the user hides or terminates an application, the system guesses which application should be activated next (based on which applications have on-screen windows, as described below).&nbsp; This method saves the user from always having to click to choose the new active application.</font>

<p><font face="Times">An application is activated when:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">The user starts it up, unless the user activates another application while the first one is starting up.</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">The user double-clicks a miniwindow belonging to the application, or double-clicks the application's freestanding or docked icon.&nbsp; Double-clicking a docked icon starts up the application if it's not already running.</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">The user clicks within one of the windows belonging to the application, provided the window isn't a miniwindow or application icon.</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">It receives a message from another application, if the message asks it to do something that may require interaction with the user.&nbsp; A message from the Workspace Manager asking the receiver to open a file is one such message.&nbsp; A message sent to Digital Webster asking it to define a word is another.&nbsp; (See &quot;Activating an Application&quot; later in this chapter for details.)</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">It has the frontmost panel or standard window on-screen after the current application is hidden or terminated.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica"><b>Application Deactivation</b></font>

<p><font face="Times">There can be only one active application per workspace (that is, one per Window Server) at a time.&nbsp; Whenever the user chooses a new active application, the previous one is automatically deactivated.&nbsp; The Application Kit and Workspace Manager take care of this task.</font>

<p><font face="Times">The active application is also deactivated when:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">The user hides its windows (by using the Hide command).</font></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">The user terminates it (by choosing the Quit command).</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">In either case, if another application has panels or standard windows on-screen, then the Workspace Manager activates the application with the frontmost panel or window.&nbsp; If no other applications have panels or standard windows on-screen, then no application becomes active.</font>

<p><font face="Times">In addition, an application should deactivate itself just before sending a message to another application, if the intent of the message is to have the other application become active.&nbsp; (See &quot;Activating an Application&quot; later in this chapter for details.)</font>

<p><font face="Helvetica"><b>Note:</b></font>&nbsp; <font face="Times">A deactivated but running application can still do work.&nbsp; It's &quot;deactivated&quot; only in the sense that it no longer is the active application, so the user can't interact with it without activating it again.</font>

<p><br><br>

<p><font face="Helvetica" size="+1"><b>The Key Window</b></font>

<p><font face="Times">Users expect to see their actions on the keyboard and mouse take effect not only in a particular application, but also in a particular window of that application.&nbsp; Each user action is associated with a window by the Window Server and Application Kit. Before acting, the user needs to know which window will be affected--there should be no surprises.</font>

<p><font face="Times">Since the mouse controls a cursor, it's quite easy for the user to determine which window a mouse action is associated with. It's whatever window the cursor is over.&nbsp; But the keyboard doesn't have a cursor, so there's no natural way to determine where typing will appear.</font>

<p><font face="Times">The window associated with keyboard actions, the one where typing will appear, is known as the key window.&nbsp; To mark the key window for users, the Application Kit highlights its title bar (by turning it black).</font>

<p><font face="Times">Key window highlighting is illustrated below.</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F4.gif" width=230 height=180></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">You can think of the highlighting as a kind of cursor for the keyboard.&nbsp; It shifts from window to window as the key window changes.&nbsp; Key-window status also moves from application to application as the active application changes.&nbsp; Only one window on the screen is marked at a time, and it must be in the active application.&nbsp; There's just one key window per machine and keyboard. Even a system that has two screens, but only one keyboard, has at most one key window.</font>

<p><font face="Helvetica"><b>Note:</b></font>&nbsp; <font face="Times">A window doesn't have to become the key window to receive, and act on, keyboard alternatives.&nbsp; It does, however, have to be in the active application.</font>

<p><font face="Times">Since the key window belongs to the active application, its black title bar has the secondary effect of helping to show which application is currently active.&nbsp; The key window is the most prominently marked window in the active application, making it &quot;key&quot; in a second sense:&nbsp; It's the main focus of the user's attention on the screen.</font>

<p><br><br>

<p><font face="Helvetica" size="+1"><b>The Main Window</b></font>

<p><font face="Times">The <i>main window</i> is the standard window where the user is currently working.&nbsp; It's the focus of user actions carried out in panels and menus.&nbsp; The Find panel, for example, requires the user to supply information by typing it.&nbsp; Since the panel is the destination of the user's keystrokes, it's marked as the key window.&nbsp; But the panel is just an instrument through which users can do work in another window--the main window.</font>

<p><font face="Times">Whenever a standard window becomes the key window, it also becomes the main window.&nbsp; When key-window status shifts from a standard window to a panel, main-window status remains with the standard window.</font>

<p><font face="Times">So that users can pick out the main window when it's not the key window, the Application Kit highlights its title bar in dark gray.&nbsp; If the main window is also the key window, it has only the black highlighting of the key window.&nbsp; The following figure illustrates the main window when it's marked as the key window and when it's not.</font>

<p><font face="Times">A menu command might affect either the key window or the main window, depending on the command.&nbsp; For example, the Paste command can be used to enter text in a Find panel.&nbsp; But the Save command saves the document displayed in the main window, and the Bold command turns the current selection in the main window bold.&nbsp; For this reason, user actions in a panel or menu are associated with both the key window and the main window:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">An action is first associated with the key window.</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">If the key window is a panel and it can't handle the action, the action is next associated with the main window.</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Note that this order of precedence is reflected in the way windows are highlighted:&nbsp; The key window is always marked, but the main window is marked only when it's not the key window.</font>

<p><font face="Times">The main window is always in the same application as the key window, the active application.&nbsp; It follows the key window as the user's actions shift the focus from window to window and from application to application.</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F8.gif" width=325 height=468></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica" size="+1"><b>How Windows Become the Key Window and Main Window</b></font>

<p><font face="Times">Whenever possible, the user, rather than the application, selects the key window and main window.&nbsp; This section describes how this happens and the part that the Application Kit plays.&nbsp; Later in this chapter, &quot;Choosing the Key Window&quot; describes when and how an application needs to choose its own key window.</font>

<p><br><br>

<p><font face="Helvetica"><b>In the Active Application</b></font>

<p><font face="Times">In the active application, the user can select a new key window by clicking in it.&nbsp; If the window is a standard window, it's also made the main window.&nbsp; If it's a panel that accepts keystrokes, it's highlighted as the new key window, but the former main window retains its status and is highlighted in dark gray.&nbsp; The user can't select a main window without also making it the key window.</font>

<p><font face="Times">The Application Kit chooses a new key window (or main window) for the active application whenever the user closes or miniaturizes the window currently having that status.&nbsp; Even if the application has no more windows on-screen, and thus no new key window can be chosen, the application still remains active:&nbsp; It's up to the user to decide whether to continue working in it.</font>

<p><br><br>

<p><font face="Helvetica"><b>When an Application Is Activated</b></font>

<p><font face="Times">When an application is activated, one of its windows is made the key window and one (usually the same one) is made the main window.&nbsp; Again, whenever possible, the user makes the selection:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">If the user activates the application by clicking in a window that accepts keystrokes, it becomes the key window.&nbsp; If the window is a standard window, it's also made the main window.</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">If the user activates the application by double-clicking a miniwindow, the window it represents again appears on-screen and becomes the key window and main window.</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">If an application is activated without the user directly selecting a new key window, the user's previous selections are honored. For example, if the user reactivates an application by double-clicking its icon, the previous key window and main window are restored.</font>

<p><font face="Helvetica"><b>Note:</b></font>&nbsp; <font face="Times">When a new application is activated, its key window may be highlighted before the former key window (in the deactivated application) loses its highlighting.&nbsp; This is a consequence of a multitasking environment.&nbsp; Users can begin working in one process (the new active application) before their instructions to another process (the previous active application) have been completed.&nbsp; Although the former key window may retain its highlighting for a short time, it's no longer the key window; all keyboard actions are associated with the new active application.</font>

<p><br><br>

<p><font face="Helvetica" size="+1"><b>The Results of Clicking in a Window</b></font>

<p><font face="Times">Clicking in a window has two separate, but related, results:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">The window usually becomes the key window (and usually also the main window), and its application is activated.&nbsp; Standard windows always become the key window when clicked, but panels might not, as described in Chapter 5.</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">The window comes to the front of its tier.</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">The first is a change in the window's status, the second in its position on-screen.</font>

<p><font face="Times">Both results are required to make the window available to the user to work in.&nbsp; The window needs to be reordered in front of other windows so that its contents aren't covered.&nbsp; It also must become the key window for the user to be able to type in it and for it to receive menu commands.&nbsp; For a window to become the key window, its application must be activated.</font>

<p><font face="Times">In NEXTSTEP, however, these two results of a mouse click, while logically related, are not inseparable.&nbsp; If the click is in the window's title bar and is modified by the Alternate key, it brings the window to the front, but doesn't make it the key window or activate its application.&nbsp; Alternate-clicking in the title bar thus lets users rearrange and reorder windows on the screen without changing the current key window, main window, or active application.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>Implementing Windows</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">The section gives a few guidelines for designing and placing various kinds of windows.</font>

<p><br><br><br>

<p><font face="Helvetica" size="+1"><b>Designing Windows</b></font>

<p><font face="Times">The only windows that have a fixed size are miniwindows and icons.&nbsp; The initial size of all other windows is determined by the application.&nbsp; Generally, standard windows are larger than panels and panels are larger than menus, but there are no fixed rules.</font>

<p><font face="Times">When designing a panel or standard window, you should keep a substantial proportion of it free of objects that respond to the first click.&nbsp; It shouldn't be difficult for the user to find a place to click within the window to select it.</font>

<p><font face="Times">You should try to limit of the number of panels and standard windows that the user needs to use your application.&nbsp; Having too many windows results in a cluttered screen that can confuse the user.&nbsp; Even two windows can be too many if users can't tell which window they're supposed to work in.&nbsp; And a cluttered screen can frustrate the user's attempts to work in two or more applications at once.</font>

<p><br><br><br>

<p><font face="Helvetica" size="+1"><b>Placing Windows</b></font>

<p><font face="Times">One of the principles of the NEXTSTEP user interface is that users are in control of their own workspace.&nbsp; Part of this control is the freedom to rearrange windows to suit the users' own tastes and needs.&nbsp; However, if a window that's been dismissed and then brought up again doesn't appear in its previous location, the user's work of rearranging windows is thrown away. The user might have to move the window back to its previous location every time the window is brought up.</font>

<p><font face="Times">To avoid making the user rearrange windows unnecessarily, each panel and non-document standard window should remember its own location.&nbsp; The next time the window is brought up, it should appear in the location it last appeared in.&nbsp;&nbsp; For example, suppose the user brings up a Find panel, moves it to a new position, and then closes it.&nbsp; The next time the user brings up the Find panel, it should come up in the new position--even if the user has quit and restarted the application in the meantime.</font>

<p><font face="Times">Whether document windows should also remember their position depends on the application.&nbsp; For example, Digital Librarian document windows don't remember their positions because users typically open many documents at once, and thus need the application's help in positioning the windows.&nbsp; However, an application such as a drawing program that's typically used for editing one file at a time should probably let the user determine each document window's default location.</font>

<p><font face="Times">The first time a window comes up, its position is determined by the application.&nbsp; To ensure a consistent user interface, all applications should follow these guidelines for initial locations of windows:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">When an application starts up, its main menu should appear in the upper left corner of the screen, unless the user has specified a different location for it.</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">Standard windows should come up to the right of the main menu, allowing enough room for submenus that might later be attached to the main menu.&nbsp; Some applications also allow room for panels to come up to the left of the standard window and below the main menu.</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">Attention panels should come up centered in the upper part of the screen, where they won't be overlooked.</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times">No part of any window (other than miniwindows and icons) should be placed off-screen, unless the user has put it there.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="../../Images/EPS9.gif" width=688 height=33></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=132></td>

<td><font face="Helvetica"><b>Programming Note:&nbsp; Saving Window Positions</b></font>

<p><font face="Helvetica" size="-1">Three methods exist to help panels and non-document standard windows remember their window position.&nbsp; Calling the <b>setFrameAutosaveName:</b> method once per window makes the window save its position in the defaults system whenever necessary.&nbsp; The next time the window comes up, it automatically appears at the last-saved position.&nbsp; A less automated way of remembering the window position is to call <b>saveFrameUsingName:</b> every time you wish to save the position, and call <b>setFrameUsingName:</b> to set the window's position when it's being brought up.</font>

<p><font face="Helvetica" size="-1">The methods discussed above aren't appropriate for document windows, since there's no easy way to guarantee unique names for documents.&nbsp; If your application saves the positions of its document windows, you should use the <b>saveFrameToString:</b> method to save a representation of the window's position into the document itself.&nbsp; When opening the document, you should position its window using <b>setFrameFromString:</b>.</font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="../../Images/EPS9.gif" width=688 height=33></td></tr>

</table>

<p><br><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>Implementing Standard Windows</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Standard windows are the most widely used type of window and the principal type for all applications.&nbsp; If an application lets the user edit files, each file should be displayed in a separate standard window.&nbsp; If the application is a game, the game board should be in a standard window, and if the application is a simple accessory like a clock, the clock face should occupy a small standard window of its own.</font>

<p><font face="Times">Every standard window has a title bar; most also have window controls--a resize bar, close button, and miniaturize button.&nbsp; This section discusses choosing the window's title and everything that you need to implement when the window controls are present. It also describes cases when it's acceptable to omit the window controls.</font>

<p><br><br><br>

<p><font face="Helvetica" size="+1"><b>Choosing a Title</b></font>

<p><font face="Times">If a window displays a document that can be saved, the title bar of the window should display the name of the document, followed by an em dash and the path of the folder where the document is located.&nbsp; The em dash is set off by two spaces on each side.&nbsp; For example:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=125></td>

<td><font face="Helvetica">jobRecords&nbsp; --&nbsp; /Net/machine/home/records</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">The title bar is not usually a good place to show status, such as what the application is currently doing.&nbsp; It's usually clearer to display this status in the window or in a panel.&nbsp; Status within a window is often displayed in small, dark gray text (as in the Workspace Manager File Viewer).</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="../../Images/EPS9.gif" width=688 height=33></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=132></td>

<td><font face="Helvetica"><b>Programming Note:&nbsp; Implementing Titles of Document Windows</b></font>

<p><font face="Helvetica" size="-1">You should use the <b>setTitleAsFilename:</b> method of the Window class to set the title of a document window.&nbsp; For example, to produce the window title</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=144></td>

<td><font face="Helvetica" size="-1">jobRecords&nbsp; --&nbsp; /Net/machine/home/records</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=132></td>

<td><font face="Helvetica" size="-1">you should send a <b>setTitleAsFilename:</b> message with the argument &quot;/Net/machine/home/records/jobRecords&quot;.</font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="../../Images/EPS9.gif" width=688 height=33></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica" size="+1"><b>Using the Resize Bar</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F0.gif" width=380 height=9 vspace=3></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Most standard windows--especially those with scrollable contents--should have a resize bar.&nbsp; It gives users control of their environment by letting them choose how much screen space to devote to the contents of the window.</font>

<p><font face="Times">If a window has a resize bar, you should be careful that the window remains as useful and attractive as possible, no matter how small or large it becomes.&nbsp; Each window can constrain its shape so that it doesn't become too big or too small, or so that it grows and shrinks in unit amounts.&nbsp; For example, the Workspace Manager File Viewer grows and shrinks only by the width of its browser columns, which eliminates the possibility of showing only a partial column.</font>

<p><br><br><br>

<p><font face="Helvetica" size="+1"><b>Using the Miniaturize Button <img src="EPS6.gif" width=12 height=12></b></font>

<p><font face="Times">Except when an application is useless without a particular standard window, each standard window should have a miniaturize button.&nbsp; When a window is miniaturized, it should remain miniaturized until the user explicitly unminiaturizes it.</font>

<p><font face="Times">Because a miniaturized window isn't likely to be foremost in the user's thoughts, the application should never alter a miniaturized window without the user's knowledge.&nbsp; However, it's fine for an application to continue doing some work in a miniaturized window, as long as the user requested that the work be done.&nbsp; For example, the Terminal application completes commands that the user entered in a Terminal window.&nbsp; But it's unacceptable, for example, to change the font in a miniaturized window unless the user specified a font change for <i>all</i> windows.</font>

<p><font face="Times">The miniaturize button has a counterpart command in the Windows menu that miniaturizes the key window.&nbsp; You can also provide a command in the Document menu that miniaturizes several related windows into a single miniwindow.&nbsp; See &quot;The Windows Menu&quot; and &quot;The Document Menu&quot; in Chapter 6 for information on how these commands work.</font>

<p><br><br><br>

<p><font face="Helvetica" size="+1"><b>Using the Close Button <img src="EPS9.gif" width=12 height=12></b></font>

<p><font face="Times">Most standard windows have a close button.&nbsp; However, sometimes the close button isn't necessary.&nbsp; For example, the Digital Webster application is useless if its only standard window isn't visible, so the window has no close button.</font>

<p><font face="Times">Your application should break the close button <img src="EPS7.gif" width=12 height=12> whenever the user would lose work by closing the window.&nbsp; From the user's point of view, a broken close button means that the application won't let the user lose work by accidentally closing the window. If the user tries to close a window that has a broken close button or tries to quit its application, the application should bring up a Close or Quit panel, respectively.&nbsp; (See Chapter 5 for more information on these standard panels.)</font>

<p><font face="Helvetica"><b>Note:</b></font>&nbsp; <font face="Times">If an application uses multiple windows to display a single file, then all the windows' close buttons should break when unsaved work is in any window.&nbsp; However, the application shouldn't bring up a Close panel until the user closes the last window for the file.</font>

<p><font face="Times">An example of breaking the close button is in the Mail application.&nbsp; Mail breaks a Send window's close button as soon as the user types in the message area of the window.&nbsp; If the user then tries to close the window (either directly or by quitting the application), Mail puts up an attention panel that makes the user either confirm that the window should be closed or cancel the close.</font>

<p><font face="Times">If an application does no work that can be saved, but merely shows data that can change, then it can break the close button to show that the window isn't up-to-date.&nbsp; The application should also provide a way for the user to force the window to update. Workspace Manager uses the close button this way.</font>

<p><font face="Times">Like the miniaturize button, the close button has a matching command in the Windows menu.&nbsp; The command has a keyboard alternative, Command-w (for &quot;window&quot;).&nbsp; (See &quot;The Windows Menu&quot; in Chapter 6 for details.)</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+2"><b>Implementing Window and Application Status</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times">Most aspects of window and application status are handled automatically.&nbsp; However, you still must choose the first key window and decide which windows can become key windows.&nbsp; (For information on when to make a panel the key window, see Chapter 5.)&nbsp; The application should also activate itself in the appropriate way, as discussed below.</font>

<p><br><br><br>

<p><font face="Helvetica" size="+1"><b>Choosing the Key Window</b></font>

<p><font face="Times">In general, all the standard windows in your application should be permitted to become the key window, even if they don't respond to keyboard actions.&nbsp; Giving key-window status to a window focuses attention on it and prevents the user from typing in any other window.&nbsp; If the key window doesn't do anything with the user's typing, it should beep as it receives the keystrokes to indicate to the user that typing isn't appropriate.</font>

<p><font face="Times">When an application is activated on startup, it should designate one of its windows to be the initial key (and main) window.&nbsp; If the application opens a document file for the user, the window that displays the document should be the key window.</font>

<p><br><br><br>

<p><font face="Helvetica" size="+1"><b>Activating an Application</b></font>

<p><font face="Times">Usually, an application doesn't have to explicitly activate or deactivate itself.&nbsp; When your application exchanges messages with the Workspace Manager, uses services, or provides services, application activation and deactivation are handled by the system. For example, when the user chooses the Mail Selection service from Edit's Services menu, the Edit application is deactivated. Mail is then activated on condition that no other application is currently active.&nbsp; Since the Edit has been deactivated, this condition will be met, unless the user has activated another application in the meantime.&nbsp; All this happens automatically.</font>

<p><font face="Times">The only time an application should need to explicitly activate or deactivate itself is when it communicates with another application without using the services system or the Workspace Manager.&nbsp; This might happen when two applications work together closely by sending messages directly to each other.&nbsp; If the intent of a message is to activate the receiving application, then the sender of the message should deactivate itself just before sending the message, and the receiver should conditionally activate itself when it receives the message.&nbsp; If the intent of a message is not to activate the other application, then neither application should activate or deactivate itself.&nbsp; In general, a message should conditionally activate the receiving application if the user might need to work in it--even if only to operate a scroller.</font>

<p><font face="Helvetica"><b>Important:</b></font>&nbsp; <font face="Times">Applications should avoid activating themselves unconditionally.&nbsp; Unconditional activation violates the principle of user control, since it ignores the user's desire to turn to something else.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="../../Images/EPS9.gif" width=688 height=33></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=132></td>

<td><font face="Helvetica"><b>Programming Note:&nbsp; Activating and Deactivating an Application</b></font>

<p><font face="Helvetica" size="-1">As described in the section &quot;Activating an Application,&quot; most applications don't need to explicitly activate or deactivate themselves.&nbsp; However, when necessary, an application can conditionally activate itself with the following code:</font></td></tr>

</table>

<p><img src="../../Images/sp.gif" width=143 height=1><font face="Courier" size="-1">[NXApp activateSelf:NO];</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=132></td>

<td><font face="Helvetica" size="-1">An application can deactivate itself as follows:</font></td></tr>

</table>

<p><img src="../../Images/sp.gif" width=143 height=1><font face="Courier" size="-1">[NXApp deactivateSelf];</font>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="../../Images/EPS9.gif" width=688 height=33></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica" size="+1"><b>Avoiding Activation when Dragging</b></font>

<p><font face="Times">When a user drags an object such as a color or file between two applications, both the area that originally contains the object (the source) and the area that the object is being dragged to (the destination) need to be visible.&nbsp; Sometimes the user needs to move the windows of one or both applications to make this true.&nbsp; Once the user starts to drag the object, it can be inconvenient for the applications' windows to change their ordering, since that can cause the destination to be covered.&nbsp; But if the source's application isn't active when the user starts dragging, the standard response would be to activate it, which would bring the application's windows forward and perhaps cover the destination.</font>

<p><font face="Times">To avoid covering the destination, an exception to the standard activation behavior is necessary:&nbsp; When a user drags an object from one application to another, the source's application should not become active as a result of the dragging operation. However, the source's application should activate as usual when the user clicks anywhere in the source's window or begins a drag anywhere in the window except the source area.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="../../Images/EPS9.gif" width=688 height=33></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=132></td>

<td><font face="Helvetica"><b>Programming Note:&nbsp; How to Avoid Activation when Dragging</b></font>

<p><font face="Helvetica" size="-1">Avoiding activation when dragging objects is fairly simple to implement.&nbsp; First, each View that contains draggable objects should override <b>acceptsFirstMouse</b> so that it returns YES.&nbsp; This enables the View to receive events whether or not its window is the key window.&nbsp; Next, the View should override the <b>shouldDelayWindowOrderingForEvent:</b> method so that it returns YES when the passed mouse-down event occurred over a draggable object.&nbsp; (The <b>shouldDelayWindowOrderingForEvent:</b> message is sent just before the <b>mouseDown:</b> message for the event.)</font>

<p><font face="Helvetica" size="-1">That's all you have to do if you use the dragging system.&nbsp; The dragging system automatically calls the <b>preventWindowOrdering </b>method (which prevents the window's application from being activated) if the object is dragged.&nbsp; Unless the <b>preventWindowOrdering</b> method is called, the window's application is activated, as usual.</font></td></tr>

</table>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="../../Images/EPS9.gif" width=688 height=33></td></tr>

</table>



<p><br>

</body>
</html>
